if(window.Effect){Effect.Base.prototype.prepare=function(){if(this.setup){this.setup();this.update(this.options.from)}};Effect.Base.prototype.stop=function(){this.render(this.options.to);this.cancel();this.event("beforeFinish");if(this.finish){this.finish()}this.event("afterFinish")};Effect.Base.prototype.execInstantly=function(){this.start(this.options);this.render(this.options.to);this.cancel();this.event("beforeFinish");if(this.finish){this.finish()}this.event("afterFinish")};var autoInsertedTag="span";var autoInsertedFlag="webshow.autoinserted";var autoInsertedValue="true";function insertInnerElementWrapper(b){if(b){var d=b.ownerDocument;if(d){var a=d.createElement(autoInsertedTag);a.setAttribute(autoInsertedFlag,autoInsertedValue);try{b.appendChild(a);changeAllParent($A($(b).childNodes).clone(),a);return a}catch(c){return null}}}return null}function removeInnerElementWrapper(a){if(a){var b=$(a).childElements().find(function(c){return((c.tagName.toLowerCase()==autoInsertedTag)&&(c.getAttribute(autoInsertedFlag)==autoInsertedValue))});if(b){changeAllParent($A(b.childNodes).clone(),a);a.removeChild(b)}}}function insertOuterElementWrapper(b){if(b&&b.parentNode){var d=b.ownerDocument;if(d){var c=b.parentNode;var a=d.createElement(autoInsertedTag);a.setAttribute(autoInsertedFlag,autoInsertedValue);changeElementParent(b,a);c.appendChild(a);return a}}return null}function removeOuterElementWrapper(a){if(a&&a.parentNode){var c=$(a).parentNode;if(((c.tagName.toLowerCase()==autoInsertedTag)&&(c.getAttribute(autoInsertedFlag)==autoInsertedValue))){var d=c;var b=d.parentNode;if(b){changeElementParent(a,b);b.removeChild(d)}}}}function changeElementParent(a,b){if(a==b){return}if(a.parentNode){a.parentNode.removeChild(a)}if(b){b.appendChild(a)}}function changeAllParent(d,c){for(var b=0,a=d.length;b<a;++b){var f=d[b];if(f&&(f!=c)){changeElementParent(f,c)}}}var stretchElementTags=$A(["img"]);function isStretchElement(a){return stretchElementTags.include(a.tagName.toLowerCase())}Effect.SlideDownSafe=function(c){c=$(c).cleanWhitespace();insertInnerElementWrapper(c);if(c.down()){var a=c.down().getStyle("bottom")}var b=c.getDimensions();return new Effect.Scale(c,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:b.height,originalWidth:b.width},restoreAfterFinish:true,beforeSetup:function(d){},afterSetup:function(d){d.element.makePositioned();if(d.element.down()){d.element.down().makePositioned()}if(window.opera){d.element.setStyle({top:""})}d.element.makeClipping().setStyle({height:"0px"}).show()},afterUpdateInternal:function(d){if(d.element.down()){d.element.down().setStyle({bottom:(d.dims[0]-d.element.clientHeight)+"px"})}},afterFinishInternal:function(d){d.element.undoClipping().undoPositioned();if(d.element.down()){d.element.down().undoPositioned().setStyle({bottom:a})}removeInnerElementWrapper(d.element)}},arguments[1]||{}))};Effect.SlideUpSafe=function(c){c=$(c).cleanWhitespace();insertInnerElementWrapper(c);if(c.down()){var a=c.down().getStyle("bottom")}var b=c.getDimensions();return new Effect.Scale(c,window.opera?0:1,Object.extend({scaleContent:false,scaleX:false,scaleMode:"box",scaleFrom:100,scaleMode:{originalHeight:b.height,originalWidth:b.width},restoreAfterFinish:true,beforeSetup:function(d){},afterSetup:function(d){d.element.makePositioned();if(d.element.down()){d.element.down().makePositioned()}if(window.opera){d.element.setStyle({top:""})}d.element.makeClipping().show()},afterUpdateInternal:function(d){if(d.element.down()){d.element.down().setStyle({bottom:(d.dims[0]-d.element.clientHeight)+"px"})}},afterFinishInternal:function(d){d.element.hide().undoClipping().undoPositioned();if(d.element.down()){d.element.down().undoPositioned().setStyle({bottom:a})}removeInnerElementWrapper(d.element)}},arguments[1]||{}))};function analysisCssLength(b){var a=[];if(b==null){a.num==null;a.unit==null}else{a.num=parseFloat(b);if(a.num!=null){a.unit=b.replace(a.num.toString(),"").replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/,"");if(a.unit==""){a.unit="px"}}else{a.unit=b}}return a}function getCssLengthUnit(b){var a=this.analysisCssLength(b);return a.unit}function getCssLengthNumber(b){var a=this.analysisCssLength(b);return a.num}function getCssLengthStr(c){var a=(c.num!==null)?c.num:0;var b=(c.unit!="")?c.unit:"px";return a.toString()+b}Effect.MoveEh=Class.create(Effect.Base,{initialize:function(b){this.element=$(b);if(!this.element){throw (Effect._elementDoesNotExistError)}var a=Object.extend({x:0,y:0,mode:"relative"},arguments[1]||{});this.start(a)},setup:function(){this.element.makePositioned();this.originalLeft=analysisCssLength(this.element.getStyle("left")||"0");this.originalTop=analysisCssLength(this.element.getStyle("top")||"0");if(this.options.mode=="absolute"){this.options.x=this.options.x-this.originalLeft.num;this.options.y=this.options.y-this.originalTop.num}},update:function(a){this.element.setStyle({left:(this.options.x*a+this.originalLeft.num)+this.originalLeft.unit,top:(this.options.y*a+this.originalTop.num)+this.originalTop.unit})}});Effect.EdgeMove={EdgeDirection:{LEFT:1,TOP:2,RIGHT:4,BOTTOM:8},EdgeDirectionText:["none","left","top","top-left","right","left","top-right","top-left","bottom","bottom-left","top","top-left","bottom-right"],textToEdgeDirection:function(a){return Effect.EdgeMove.EdgeDirectionText.indexOf(a)},EdgeType:{NONE:0,DOCUMENT:1,CLIENT:2,PARENT:3,OFFSETPARENT:3,REF_ELEM:4},EdgeTypeText:["none","document","client","parent","refElem"],textToEdgeType:function(a){return Effect.EdgeMove.EdgeTypeText.indexOf(a)},EdgeMoveDirection:{MOVEIN:1,MOVEOUT:0}};Effect.MoveByEdge=Class.create(Effect.Base,{initialize:function(b){this.element=$(b);if(!this.element){throw (Effect._elementDoesNotExistError)}var a=Object.extend({edge:Effect.EdgeMove.EdgeDirection.LEFT,edgeType:Effect.EdgeMove.EdgeType.CLIENT,direction:Effect.EdgeMove.EdgeMoveDirection.MOVEOUT,refElem:null},arguments[1]||{});this.oldLeft=parseFloat(this.element.getStyle("left")||"0");this.oldTop=parseFloat(this.element.getStyle("top")||"0");this._moveLeft=false;this._moveTop=false;this.start(a)},getWidthWithMargin:function(a){return a.offsetWidth},getHeightWithMargin:function(a){return a.offsetHeight},getHorizonBorderWidth:function(a){return a.offsetWidth-a.clientWidth},getVerticalBorderHeight:function(a){return a.offsetHeight-a.clientHeight},calcEdgeLeft:function(h,m){var j=this.element.ownerDocument;var b;var g=this.element.offsetWidth;var c=this.element.offsetLeft;var e=0;if(this.element.offsetParent){e=Element.cumulativeOffset(this.element.offsetParent).left}if(h&Effect.EdgeMove.EdgeDirection.LEFT){if(m==Effect.EdgeMove.EdgeType.OFFSETPARENT){if(WebShow.PositionUtils.isAbsolute(this.element)){b=-g}else{b=-(g+c)}}else{if((m==Effect.EdgeMove.EdgeType.DOCUMENT)||(m==Effect.EdgeMove.EdgeType.REF_ELEM)){if(WebShow.PositionUtils.isAbsolute(this.element)){b=-(g+e)}else{b=-(g+c+e)}if(m==Effect.EdgeMove.EdgeType.REF_ELEM){var f=this.options.refElem?Element.cumulativeOffset(this.options.refElem).left:0;b=b+f}}else{if(WebShow.PositionUtils.isAbsolute(this.element)){b=j.viewport.getScrollOffsets().left-(g+e)}else{b=j.viewport.getScrollOffsets().left-(g+c+e)}}}}else{if(h&Effect.EdgeMove.EdgeDirection.RIGHT){var a=0;if(this.element.offsetParent){a=this.element.offsetParent.offsetWidth}if(m==Effect.EdgeMove.EdgeType.OFFSETPARENT){if(WebShow.PositionUtils.isAbsolute(this.element)){b=a}else{b=g-c}}else{if((m==Effect.EdgeMove.EdgeType.DOCUMENT)||(m==Effect.EdgeMove.EdgeType.REF_ELEM)){var k=this.element.ownerDocument.documentElement.offsetWidth;if(WebShow.PositionUtils.isAbsolute(this.element)){b=k-e}else{b=k-e-c}if(m==Effect.EdgeMove.EdgeType.REF_ELEM){var f=this.options.refElem?Element.cumulativeOffset(this.options.refElem).left:0;var d=this.options.refElem?this.options.refElem.offsetWidth:0;b=b-(k-d-f)}}else{if(WebShow.PositionUtils.isAbsolute(this.element)){b=j.viewport.getWidth()+j.viewport.getScrollOffsets().left-e}else{b=j.viewport.getWidth()+j.viewport.getScrollOffsets().left-e-c}}}}else{b=null}}return b},calcEdgeTop:function(g,m){var h=this.element.ownerDocument;var f;var b=this.element.offsetHeight;var a=this.element.offsetTop;var k=0;if(this.element.offsetParent){k=Element.cumulativeOffset(this.element.offsetParent).top}if(g&Effect.EdgeMove.EdgeDirection.TOP){if(m==Effect.EdgeMove.EdgeType.OFFSETPARENT){if(WebShow.PositionUtils.isAbsolute(this.element)){f=-b}else{f=-(b+a)}}else{if((m==Effect.EdgeMove.EdgeType.DOCUMENT)||(m==Effect.EdgeMove.EdgeType.REF_ELEM)){if(WebShow.PositionUtils.isAbsolute(this.element)){f=-(b+k)}else{f=-(b+a+k)}if(m==Effect.EdgeMove.EdgeType.REF_ELEM){var d=this.options.refElem?Element.cumulativeOffset(this.options.refElem).top:0;f=f+d}}else{if(WebShow.PositionUtils.isAbsolute(this.element)){f=h.viewport.getScrollOffsets().top-(b+k)}else{f=h.viewport.getScrollOffsets().top-(b+a+k)}}}}else{if(g&Effect.EdgeMove.EdgeDirection.BOTTOM){var j=0;if(this.element.offsetParent){j=this.element.offsetParent.offsetHeight}if(m==Effect.EdgeMove.EdgeType.OFFSETPARENT){if(WebShow.PositionUtils.isAbsolute(this.element)){f=j}else{f=b-a}}else{if((m==Effect.EdgeMove.EdgeType.DOCUMENT)||(m==Effect.EdgeMove.EdgeType.REF_ELEM)){var c=this.element.ownerDocument.documentElement.offsetHeight;if(WebShow.PositionUtils.isAbsolute(this.element)){f=c-k}else{f=c-k-a}if(m==Effect.EdgeMove.EdgeType.REF_ELEM){var d=this.options.refElem?Element.cumulativeOffset(this.options.refElem).top:0;var e=this.options.refElem?this.options.refElem.offsetHeight:0;f=f-(c-e-d)}}else{if(WebShow.PositionUtils.isAbsolute(this.element)){f=h.viewport.getHeight()+h.viewport.getScrollOffsets().top-k}else{f=h.viewport.getHeight()+h.viewport.getScrollOffsets().top-k-a}}}}else{f=null}}return f},setup:function(){var a;var b;this.element.makePositioned();if(isNaN(parseInt(this.options.edge))){b=Effect.EdgeMove.textToEdgeDirection(this.options.edge)}else{b=this.options.edge}if(isNaN(parseInt(this.options.edgeType))){a=Effect.EdgeMove.textToEdgeType(this.options.edgeType)}else{a=this.options.edgeType}if(this.options.direction==Effect.EdgeMove.EdgeMoveDirection.MOVEIN){this.originalLeft=this.calcEdgeLeft(b,a);this.originalTop=this.calcEdgeTop(b,a);this._moveLeft=(this.originalLeft!==null);this._moveTop=(this.originalTop!==null);this.targetLeft=parseFloat(this.element.getStyle("left")||"0");this.targetTop=parseFloat(this.element.getStyle("top")||"0")}else{this.originalLeft=parseFloat(this.element.getStyle("left")||"0");this.originalTop=parseFloat(this.element.getStyle("top")||"0");this.targetLeft=this.calcEdgeLeft(b,a);this.targetTop=this.calcEdgeTop(b,a);this._moveLeft=(this.targetLeft!==null);this._moveTop=(this.targetTop!==null)}},update:function(a){if(this._moveLeft){Element.setStyle(this.element,{left:((this.targetLeft-this.originalLeft)*a+this.originalLeft).round()+"px"})}if(this._moveTop){Element.setStyle(this.element,{top:((this.targetTop-this.originalTop)*a+this.originalTop).round()+"px"})}}});Effect.MoveInFromEdge=function(b){b=$(b);var a=Object.extend({direction:Effect.EdgeMove.EdgeMoveDirection.MOVEIN,afterFinishInternal:function(c){c.element.forceRerendering()}},arguments[1]||{});return new Effect.MoveByEdge(b,a)};Effect.MoveOutToEdge=function(b){b=$(b);var a=Object.extend({direction:Effect.EdgeMove.EdgeMoveDirection.MOVEOUT,afterFinishInternal:function(c){c.element.forceRerendering()}},arguments[1]||{});return new Effect.MoveByEdge(b,a)};Effect.Depuff=function(e){e=$(e);var b={opacity:e.getInlineOpacity(),position:e.getStyle("position"),top:e.style.top,left:e.style.left,width:e.style.width,height:e.style.height};var d=Object.extend(arguments[1]||{},{afterFinishInternal:function(f){f.effects[0].element.show().setStyle(b)}});var c=d.to;d.to=0;d.from=c;var a=new Effect.Puff(e,d);return a};Effect.SimpleSetVisible=Class.create(Effect.Base,{initialize:function(a){this.element=$(a);if(!this.element){throw (Effect._elementDoesNotExistError)}this.options=Object.extend({visible:true,cssProp:"display",delayed:false},arguments[1]||{});if(!this.options.delayed){this.options=Object.extend(this.options,{duration:0})}this.start(this.options)},start:function($super,a){$super(a);if(!a.delayed){if(a.cssProp=="display"){if(a.visible){$(this.element).style.display=""}else{$(this.element).style.display="none"}}else{if(a.visible){$(this.element).style.visibility=""}else{$(this.element).style.visibility="hidden"}}}},finish:function(a){var b=this.options;if(b.delayed){if(b.cssProp=="display"){if(b.visible){$(this.element).style.display=""}else{$(this.element).style.display="none"}}else{if(b.visible){$(this.element).style.visibility=""}else{$(this.element).style.visibility="hidden"}}}},update:function(a){}});Effect.SimpleShow=function(b){b=$(b);var a=Object.extend({visible:true},arguments[1]||{});return new Effect.SimpleSetVisible(b,a)};Effect.SimpleHide=function(b){b=$(b);var a=Object.extend({visible:false},arguments[1]||{});return new Effect.SimpleSetVisible(b,a)};Effect.DelaySetVisible=Class.create(Effect.Base,{initialize:function(a){this.element=$(a);if(!this.element){throw (Effect._elementDoesNotExistError)}this.internalOptions=Object.extend({visible:true,cssProp:"display"},arguments[1]||{});this.start(this.internalOptions)},start:function($super,a){$super(a)},finish:function(a){var b=this.internalOptions;if(b.cssProp=="display"){if(b.visible){$(this.element).style.display=""}else{$(this.element).style.display="none"}}else{if(b.visible){$(this.element).style.visibility=""}else{$(this.element).style.visibility="hidden"}}},update:function(a){}});Effect.DelayShow=function(b){b=$(b);var a=Object.extend({visible:true},arguments[1]||{});return new Effect.DelaySetVisible(b,a)};Effect.DelayHide=function(b){b=$(b);var a=Object.extend({visible:false},arguments[1]||{});return new Effect.DelaySetVisible(b,a)};Effect.FadeIn=Effect.Opacity;Effect.FadeOut=function(b,a){b=$(b);var c=null;if(a){c=Object.extend(a);c.to=1-c.to;c.from=1-c.from}return new Effect.Opacity(b,a)};Effect.Clip=Class.create(Effect.Base,{initialize:function(b){this.element=$(b);if(!this.element){throw (Effect._elementDoesNotExistError)}var a=Object.extend({begin:[0,0,0,0],end:[0,1,1,0],duration:1,placeHolder:false},arguments[1]||{});if(a.beginTop!=null){a.begin[0]=a.beginTop}if(a.beginRight!=null){a.begin[1]=a.beginRight}if(a.beginBottom!=null){a.begin[2]=a.beginBottom}if(a.beginLeft!=null){a.begin[3]=a.beginLeft}if(a.endTop!=null){a.end[0]=a.endTop}if(a.endRight!=null){a.end[1]=a.endRight}if(a.endBottom!=null){a.end[2]=a.endBottom}if(a.endLeft!=null){a.end[3]=a.endLeft}this.oldPosition=this.element.getStyle("position")||"";this.oldClip=this.element.getStyle("clip")||"rect(auto auto auto auto)";this.needStub=(this.oldPosition!="absolute")&&a.placeHolder;var c=this.element.getDimensions();this.width={num:c.width,unit:"px"};this.height={num:c.height,unit:"px"};this.stubElement=null;if(this.needStub){this.createStubElement(this.element)}this.element.absolutize();if(this.needStub){this.insertStubElement(this.element)}this.width.num=this.width.num+(parseFloat(this.element.getStyle("padding-left"))||0)+(parseFloat(this.element.getStyle("padding-right"))||0)+(parseFloat(this.element.getStyle("border-left-width"))||0)+(parseFloat(this.element.getStyle("border-right-width"))||0);this.height.num=this.height.num+(parseFloat(this.element.getStyle("padding-top"))||0)+(parseFloat(this.element.getStyle("padding-bottom"))||0)+(parseFloat(this.element.getStyle("border-top-width"))||0)+(parseFloat(this.element.getStyle("border-bottom-width"))||0);this.restoreAfterFinish=a.restoreAfterFinish||false;this.start(a)},createStubElement:function(a){this.stubElement=a.cloneNode(true);this.stubElement.id="";Element.setStyle(this.stubElement,{visibility:"hidden"})},insertStubElement:function(a){a.parentNode.insertBefore(this.stubElement,a)},releaseStubElement:function(){if(this.stubElement){this.stubElement.parentNode.removeChild(this.stubElement);this.stubElement=null}},formatClipRect:function(e,c,b,d){var a="rect("+getCssLengthStr(e)+" "+getCssLengthStr(c)+" "+getCssLengthStr(b)+" "+getCssLengthStr(d)+")";return a},setElementClip:function(e,g,j,a,c){var h={num:g*this.height.num,unit:this.height.unit};var k={num:a*this.height.num,unit:this.height.unit};var f={num:c*this.width.num,unit:this.width.unit};var d={num:j*this.width.num,unit:this.width.unit};var b=this.formatClipRect(h,d,k,f);Element.setStyle(e,{clip:b})},start:function($super,a){$super(a);this.setElementClip(this.element,a.begin[0],a.begin[1],a.begin[2],a.begin[3])},update:function(a){var d=[0,0,0,0];for(var c=0,b=d.length;c<b;++c){d[c]=this.options.begin[c]+(this.options.end[c]-this.options.begin[c])*a}this.setElementClip(this.element,d[0],d[1],d[2],d[3])},finish:function(a){this.releaseStubElement();if(this.restoreAfterFinish){this.element.hide();this.element.setStyle({clip:this.oldClip});this.element.setStyle({position:this.oldPosition});this.element.show()}}});Effect.ClipBase={LEFT:"left",TOP:"top",RIGHT:"right",BOTTOM:"bottom",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center",CENTER_HORIZONTAL:"center-horizontal",CENTER_VERTICAL:"center-vertical"};Effect.ClipPredefined=function(b){b=$(b);var a=Object.extend({duration:1,base:Effect.ClipBase.CENTER},arguments[1]||{});if(a.base){switch(a.base){case Effect.ClipBase.LEFT:a.begin=[0,0,1,0];break;case Effect.ClipBase.TOP:a.begin=[0,1,0,0];break;case Effect.ClipBase.RIGHT:a.begin=[0,1,1,1];break;case Effect.ClipBase.BOTTOM:a.begin=[1,1,1,0];break;case Effect.ClipBase.TOP_LEFT:a.begin=[0,0,0,0];break;case Effect.ClipBase.TOP_RIGHT:a.begin=[0,1,0,1];break;case Effect.ClipBase.BOTTOM_LEFT:a.begin=[1,0,1,0];break;case Effect.ClipBase.BOTTOM_RIGHT:a.begin=[1,1,1,1];break;case Effect.ClipBase.CENTER:a.begin=[0.5,0.5,0.5,0.5];break;case Effect.ClipBase.CENTER_HORIZONTAL:a.begin=[0.5,1,0.5,0];break;case Effect.ClipBase.CENTER_VERTICAL:a.begin=[0,0.5,1,0.5];break;default:a.begin=[0.5,0.5,0.5,0.5];break}}return new Effect.Clip(b,a)};Effect.ZoomTraditional=Class.create(Effect.Base,{initialize:function(b){this.element=$(b);if(!this.element){throw (Effect._elementDoesNotExistError)}var a=Object.extend({scaleX:true,scaleY:true,scaleContent:true,scaleFromCenter:false,scaleMode:"box",scaleFrom:0,scaleTo:100},arguments[1]||{});this.start(a)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||false;this.elementPositioning=this.element.getStyle("position");this.originalStyle={};["top","left","width","height","fontSize"].each(function(b){this.originalStyle[b]=this.element.style[b]}.bind(this));this.originalTop=this.element.offsetTop;this.originalLeft=this.element.offsetLeft;this.originalOverflow=this.element.style.overflow||"visible";this.element.style.overflow="hidden";var a=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(b){if(a.indexOf(b)>0){this.fontSize=parseFloat(a);this.fontSizeType=b}}.bind(this));this.factor=(this.options.scaleTo-this.options.scaleFrom)/100;this.dims=null;if(this.options.scaleMode=="box"){this.dims=[this.element.offsetHeight,this.element.offsetWidth]}if(/^content/.test(this.options.scaleMode)){this.dims=[this.element.scrollHeight,this.element.scrollWidth]}if(!this.dims){this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth]}},update:function(a){var b=(this.options.scaleFrom/100)+(this.factor*a);if(this.options.scaleContent&&this.fontSize){this.element.setStyle({fontSize:this.fontSize*b+this.fontSizeType})}this.setDimensions(this.dims[0]*b,this.dims[1]*b)},finish:function(a){if(this.restoreAfterFinish){this.element.setStyle(this.originalStyle)}this.element.style.overflow=this.originalOverflow},setDimensions:function(a,e){var f={};if(this.options.scaleX){f.width=e.round()+"px"}if(this.options.scaleY){f.height=a.round()+"px"}if(this.options.scaleFromCenter){var c=(a-this.dims[0])/2;var b=(e-this.dims[1])/2;if(this.elementPositioning=="absolute"){if(this.options.scaleY){f.top=this.originalTop-c+"px"}if(this.options.scaleX){f.left=this.originalLeft-b+"px"}}else{if(this.options.scaleY){f.top=-c+"px"}if(this.options.scaleX){f.left=-b+"px"}}}this.element.setStyle(f)}});Effect.ZoomTransform=Class.create(Effect.Base,{initialize:function(b){this.element=$(b);if(!this.element){throw (Effect._elementDoesNotExistError)}var a=Object.extend({scaleX:true,scaleY:true,transformOrigin:"0 0",scaleFrom:0,scaleTo:100},arguments[1]||{});this.start(a)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||false;this.factor=(this.options.scaleTo-this.options.scaleFrom)/100;this.oldTransformOrigin=WebShow.CssTransformUtils.getTransformOriginStyle(this.element);this.oldTransform=WebShow.CssTransformUtils.getTransformStyle(this.element);this.transformOrigin=this.options.transformOrigin;WebShow.CssTransformUtils.setTransformOriginStyle(this.element,this.transformOrigin)},update:function(a){var c=(this.options.scaleFrom/100)+(this.factor*a);var b;if(this.options.scaleX&&this.options.scaleY){b="scale("+c+")"}else{if(this.options.scaleY){b="scaleY("+c+")"}else{if(this.options.scaleX){b="scaleX("+c+")"}}}WebShow.CssTransformUtils.setTransformStyle(this.element,b,this.transformOrigin)},finish:function(a){if(this.restoreAfterFinish){WebShow.CssTransformUtils.setTransformOriginStyle(this.element,this.oldTransformOrigin);WebShow.CssTransformUtils.setTransformStyle(this.element,this.oldTransform)}}});Effect.Zoom=function(d){d=$(d);var b=Object.extend({duration:1,scaleX:true,scaleY:true,scaleContent:true,scaleFromCenter:false,scaleMode:"box",scaleFrom:0,scaleTo:100},arguments[1]||{});var c=WebShow.CssTransformUtils.isTransformSupported();var a;if(c){if(b.scaleFromCenter&&(!b.transformOrigin)){b.transformOrigin="center center"}else{b.tranformOrigin="0 0"}a=new Effect.ZoomTransform(d,b)}else{a=new Effect.ZoomTraditional(d,b)}return a};Effect.FlashOnce=function(d){d=$(d);var c=Object.extend({duration:1,visible:true},arguments[1]||{});var b=c.afterFinish;var e=c.visible?c.duration:c.duration/5;var a=new Effect.SimpleShow(d,Object.extend({afterFinishInternal:function(f){new Effect.DelayHide(f.element,Object.extend({duration:e,afterFinishInternal:function(g){if(c.afterFinish){c.afterFinish(a)}if(c.afterFinishInternal){c.afterFinishInternal(a)}}},{}))}}));return a};Effect.FadedZoom=function(c){c=$(c);var b=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full,from:0,to:1},arguments[1]||{});this.options=b;var a={top:c.style.top,left:c.style.left,height:c.style.height,width:c.style.width,opacity:c.getInlineOpacity()};var g=c.getDimensions();var h,f;var e,d;switch(b.direction){case"top-left":h=f=e=d=0;break;case"top-right":h=g.width;f=d=0;e=-g.width;break;case"bottom-left":h=e=0;f=g.height;d=-g.height;break;case"bottom-right":h=g.width;f=g.height;e=-g.width;d=-g.height;break;case"center":h=g.width/2;f=g.height/2;e=-g.width/2;d=-g.height/2;break}return new Effect.ParallelEx([new Effect.Move(c,{x:h,y:f,duration:0.01,beforeSetup:function(j){j.element.hide().makeClipping().makePositioned()}}),new Effect.ParallelEx([new Effect.Opacity(c,{sync:true,to:1,from:0,transition:b.opacityTransition}),new Effect.Move(c,{x:e,y:d,sync:true,transition:b.moveTransition}),new Effect.Scale(c,100,{scaleMode:{originalHeight:g.height,originalWidth:g.width},sync:true,scaleFrom:window.opera?1:0,transition:b.scaleTransition,restoreAfterFinish:true})],Object.extend({beforeSetup:function(j){j.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(j){if(b.to==1){j.effects[0].element.undoClipping().undoPositioned().setStyle(a)}else{if(b.to==0){j.effects[0].element.undoClipping().undoPositioned().setStyle(a);j.effects[0].element.hide()}}}},b))],arguments[1]||{});return new Effect.Move(c,{x:h,y:f,duration:0.01,beforeSetup:function(j){j.element.hide().makeClipping().makePositioned()},afterFinishInternal:function(j){new Effect.Parallel([new Effect.Opacity(j.element,{sync:true,to:1,from:0,transition:b.opacityTransition,duration:b.duration}),new Effect.Move(j.element,{x:e,y:d,sync:true,transition:b.moveTransition,duration:b.duration}),new Effect.Scale(j.element,100,{scaleMode:{originalHeight:g.height,originalWidth:g.width},sync:true,scaleFrom:window.opera?1:0,transition:b.scaleTransition,restoreAfterFinish:true,duration:b.duration})],Object.extend({beforeSetup:function(k){k.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(k){if(b.to==1){k.effects[0].element.undoClipping().undoPositioned().setStyle(a)}else{if(b.to==0){k.effects[0].element.undoClipping().undoPositioned().setStyle(a);k.effects[0].element.hide()}}}},b))}})};Effect.ParallelEx=Class.create(Effect.Base,{initialize:function(a){this.effects=a||[];this.options=arguments[1]||{};this.start(arguments[1])},update:function(a){this.effects.invoke("render",a)},finish:function(a){this.effects.each((function(b){if(this.options.to!=null){b.render(this.options.to)}else{b.render(1)}b.cancel();b.event("beforeFinish");if(b.finish){b.finish(a)}b.event("afterFinish")}).bind(this))}});Effect.ZoomFade=function(b){b=$(b);options=arguments[1]||{};var a={};a=Object.extend(a,options);a.from=0;a.to=1;return new Effect.ParallelEx([new Effect.Zoom(b,Object.extend({sync:true},a)),new Effect.Opacity(b,{sync:true,from:0,to:1})],arguments[1]||{})};Effect.PreClipFade=function(b){b=$(b);options=arguments[1]||{};var a={};a=Object.extend(a,options);a.from=0;a.to=1;a.sync=true;return new Effect.ParallelEx([new Effect.ClipPredefined(b,a),new Effect.Opacity(b,{sync:true,from:0,to:1})],arguments[1]||{})};Effect.StyleChange=Class.create(Effect.Base,{initialize:function(a){this.element=$(a);if(!this.element){throw (Effect._elementDoesNotExistError)}this.options=Object.extend({style:{},delayed:false,restoreAfterFinish:false},arguments[1]||{});this.restoreAfterFinish=this.options.restoreAfterFinish;if((!this.options.delayed)&&(!this.restoreAfterFinish)){this.options=Object.extend(this.options,{duration:0})}this.start(this.options)},isDelayed:function(){return(this.options.delayed)&&(!this.restoreAfterFinish)},changeCssStyle:function(a,b){Element.setStyle(a,b)},start:function($super,a){$super(a);if(this.restoreAfterFinish){this.oldStyleText=this.element.style.cssText}if(!this.isDelayed()){this.changeCssStyle(this.element,a.style)}},finish:function(a){if(this.isDelayed()){this.changeCssStyle(this.element,this.options.style)}if(this.restoreAfterFinish){this.element.style.cssText=this.oldStyleText}},update:function(a){}});Effect.XAction=Class.create(Effect.Base,{initialize:function(b){this.element=$(b);if(!this.element){throw (Effect._elementDoesNotExistError)}var a=arguments[1];var a=Object.extend(a,{duration:0});this.start(a)},getApp:function(){return this.options.app},start:function($super,b){$super(b);if(!this.element){return}var a=b.action;var c=b.param;if(this.getApp()){this.getApp().getFacade().execAction(a,c)}},update:function(a){}});Effect.PageSwitchAction=Class.create(Effect.Base,{initialize:function(b){var a=arguments[1];var a=Object.extend(a,{duration:0});this.start(a)},getApp:function(){return this.options.app},getPageIndex:function(a){if(typeof(a)=="string"){if(this.getApp()){return this.getApp().getPageIndexByName(a)}else{return -1}}else{return a}},getFromPageIndex:function(){return this.getPageIndex(this.options.from)},getToPageIndex:function(){return this.getPageIndex(this.options.to)},start:function($super,a){$super(a);if(this.getApp()){this.getApp().navToPageAt(this.getToPageIndex())}},reverse:function(){if(this.getApp()){this.getApp().navToPageAt(this.getFromPageIndex())}},update:function(a){}})}var WebShow={Version:"0.7.0",NAMESPACE:"WebShow",PREFIX:"WebShow",CLASS_PREFIX:"WebShow.",EMBEDDED_ELEMENT_PREFIX:"webshow_",EMBEDDED_ATTRIB_PREFIX:"webshow_",XML_ISLAND_TAG:"xml",WS_PAGE_DOM_LOADED:"webshow:pageDomLoaded"};var WS_PAGE_DOM_LOADED=WebShow.WS_PAGE_DOM_LOADED;WebShow.init=function(){if(!WebShow.init._inited){WebShow.ClassMetas.fillDetails();WebShow.init._inited=true}};WebShow.init._inited=false;document.observe("dom:loaded",function(){WebShow.init()});WebShow.Error=Error;WebShow.createClass=function(){var a=Class.create.apply(this,arguments);a.prototype.fProps=null;WebShow.ClassMetas.add(a);return a};WebShow.createLightClass=function(){var a=Class.create.apply(this,arguments);a.prototype.fProps=null;return a};WebShow.ClassMeta=Class.create({classFunc:null,classPrototype:null,className:"",shortName:"",loadDetail:function(){this.classPrototype=this.classFunc.prototype;if(this.classPrototype){if(this.classPrototype.getClassName){this.className=this.classPrototype.getClassName()}if(this.classPrototype.getShortName){this.shortName=this.classPrototype.getShortName()}}}});WebShow.ClassMetas=new Array();WebShow.ClassMetas.add=function(b){var a=new WebShow.ClassMeta();a.classFunc=b;WebShow.ClassMetas.push(a);return a};WebShow.ClassMetas.fillDetails=function(){for(var b=0,a=WebShow.ClassMetas.length;b<a;++b){var c=WebShow.ClassMetas[b];c.loadDetail()}};WebShow.ClassMetas.update=WebShow.ClassMetas.fillDetails;WebShow.ClassMetas.findClassMeta=function(e){for(var c=0,b=WebShow.ClassMetas.length;c<b;++c){var a=WebShow.ClassMetas[c].className;if(a==e){return WebShow.ClassMetas[c]}}for(var c=0,b=WebShow.ClassMetas.length;c<b;++c){var d=WebShow.ClassMetas[c].shortName;if(d==e){return WebShow.ClassMetas[c]}}return null};WebShow.ClassMetas.findClassMetaByXmlTag=function(f){for(var c=0,a=WebShow.ClassMetas.length;c<a;++c){try{var b=WebShow.ClassMetas[c].classPrototype.getXmlStoreTag()}catch(d){throw (f+" : "+WebShow.ClassMetas[c].classPrototype.getClassName())}if(b.toLowerCase()==f.toLowerCase()){return WebShow.ClassMetas[c]}}return null};WebShow.ClassMetas.findClassPrototype=function(b){var a=WebShow.ClassMetas.findClassMeta(b);if(a){return a.classPrototype}else{return null}};WebShow.ClassMetas.findClassFunc=function(b){var a=WebShow.ClassMetas.findClassMeta(b);if(a){return a.classFunc}else{return null}};WebShow.ObjFactory={createObj:function(){var name=arguments[0];var params=$A(arguments);params.shift();var classMeta=WebShow.ClassMetas.findClassMeta(name);if(!classMeta){classMeta=WebShow.ClassMetas.findClassMeta(WebShow.CLASS_PREFIX+name)}if(classMeta){return WebShow.ObjFactory.createObjByMeta(classMeta,params)}else{try{if(eval(name)){return eval("new "+name+"()")}else{return eval("new "+WebShow.CLASS_PREFIX+name+"()")}}catch(e){WebShow.reportError(e);return null}}},createObjByTag:function(){var a=arguments[0];var b=$A(arguments);b.shift();var c;var c=WebShow.ClassMetas.findClassMetaByXmlTag(a.toXmlCase());if(!c){c=WebShow.ClassMetas.findClassMetaByXmlTag(a.toLowerCase())}return WebShow.ObjFactory.createObjByMeta(c,b)},createObjByMeta:function(classMeta,params){if(classMeta){if(params.length<=0){var classFunc=classMeta.classFunc;return new classFunc()}else{var strs=[];for(var i=0,l=params.length;i<l;++i){strs[i]="params["+i+"]"}var argStr=strs.join(",");var className=classMeta.className;var expresstion="new "+className+"("+argStr+")";return eval(expresstion)}}else{return null}}};WebShow.ObjFactory.createObjByName=WebShow.ObjFactory.createObj;WebShow.ObjFactory.createObjByTagName=WebShow.ObjFactory.createObjByTag;WebShow.mixObjs=function(a,c,d){var b=Object.clone(a);return WebShow.mergeObj(b,c,d)};WebShow.mergeObj=function(a,b,c){for(var d in b){if(b[d]&&(!a[d])){if((!c)&&(Object.isFunction(b[d]))){continue}a[d]=b[d]}}return a};WebShow.STRUE="true";WebShow.SFALSE="false";function strToBool(a){return WebShow.strToBool(a)}function boolToStr(a){return WebShow.boolToStr(a)}WebShow.boolToStr=function(a){if(a){return WebShow.STRUE}else{return WebShow.SFALSE}};WebShow.strToBool=function(b){if(typeof(b)=="string"){var a=b.toLowerCase();return !((a==WebShow.SFALSE)||(a=="")||(a=="0"))}else{return !(!b)}};WebShow.isBoolStr=function(a){return(a==WebShow.SFALSE)||(a==WebShow.STRUE)};function $E(e,b){if(arguments.length>2){for(var a=1,d=[],c=arguments.length;a<c;a++){d.push($E(e,arguments[a]))}return d}if(Object.isString(b)){b=e.getElementById(b)}return Element.extend(b)}function $$E(){var b=$A(arguments);var a=b.shift();return $(Selector.findChildElements($(a),b))}Object.isObject=function(a){return(typeof(a)=="object")};Object.extend(String.prototype,{lowerFirstLetter:function(){if(!this){return this}var a=this.substring(0,1).toLowerCase();return a+this.substr(1,this.length)},upperFirstLetter:function(){if(!this){return this}var a=this.substring(0,1).toUpperCase();return a+this.substr(1,this.length)},toXmlCase:function(){return this}});Selector.handlers.id=function(b,a,j,f){var g;if(a.getElementById){g=a.getElementById(j)}else{if(a.ownerDocument){g=a.ownerDocument.getElementById(j)}else{g=$(j)}}var d=Selector.handlers;if(!g){return[]}if(!b&&a==document){return[g]}if(b){if(f){if(f=="child"){for(var c=0,e;e=b[c];c++){if(g.parentNode==e){return[g]}}}else{if(f=="descendant"){for(var c=0,e;e=b[c];c++){if(Element.descendantOf(g,e)){return[g]}}}else{if(f=="adjacent"){for(var c=0,e;e=b[c];c++){if(Selector.handlers.previousElementSibling(g)==e){return[g]}}}else{b=d[f](b)}}}}for(var c=0,e;e=b[c];c++){if(e==g){return[g]}}return[]}return(g&&Element.descendantOf(g,a))?[g]:[]};WebShow.LogType={LOG:0,INFO:10,WARNING:20,ERROR:30};WebShow.Logger={element:null,logItemTagName:"p",logTypeClassNames:[],onLog:null,onInfo:null,onWarning:null,onError:null,getLogTypeName:function(b){var a;switch(b){case WebShow.LogType.LOG:a=WebShow.LogTypeStr.LOG;break;case WebShow.LogType.INFO:a=WebShow.LogTypeStr.INFO;break;case WebShow.LogType.WARNING:a=WebShow.LogTypeStr.WARNING;break;case WebShow.LogType.ERROR:a=WebShow.LogTypeStr.ERROR;break;default:a=WebShow.LogTypeStr.LOG;break}return a},_initLogTypeClassNames:function(){WebShow.Logger.logTypeClassNames[WebShow.LogType.LOG]="";WebShow.Logger.logTypeClassNames[WebShow.LogType.INFO]="Info";WebShow.Logger.logTypeClassNames[WebShow.LogType.WARNING]="Warning";WebShow.Logger.logTypeClassNames[WebShow.LogType.ERROR]="Error"},getLogTypeClassName:function(a){return WebShow.Logger.logTypeClassNames[a]},doLog:function(d,a){if(!d){return}try{WebShow.Logger.evokeLogEvents(d,a);var c=WebShow.Logger.getLogTypeName(a)+d;element=WebShow.Logger.element;if(element){var g=element.ownerDocument;var h=g.createTextNode(c);var j=g.createElement(WebShow.Logger.logItemTagName);var b=WebShow.Logger.getLogTypeClassName(a);if(b){j.className=b}j.appendChild(h);element.appendChild(j)}else{try{if(console){console.log(c)}else{if(a==WebShow.LogType.ERROR){throw c}}}catch(f){if(a==WebShow.LogType.ERROR){throw c}}}}catch(f){throw f}},evokeLogEvents:function(c,a){if(WebShow.Logger.onLog){WebShow.Logger.onLog(c,a)}var b=null;switch(a){case WebShow.LogType.INFO:b=WebShow.Logger.onInfo;break;case WebShow.LogType.WARNING:b=WebShow.Logger.onWarning;break;case WebShow.LogType.ERROR:b=WebShow.Logger.onError;break}if(b){b(c)}},log:function(a){WebShow.Logger.doLog(a,WebShow.LogType.LOG)},reportInfo:function(a){WebShow.Logger.doLog(a,WebShow.LogType.INFO)},reportWarning:function(a){WebShow.Logger.doLog(a,WebShow.LogType.WARNING)},reportError:function(a){if(!a){return}if(typeof(a)=="string"){WebShow.Logger.doLog(a,WebShow.LogType.ERROR)}else{if(a.message){WebShow.Logger.doLog(a.message,WebShow.LogType.ERROR)}}throw a}};WebShow.Logger._initLogTypeClassNames();WebShow.log=WebShow.Logger.log;WebShow.reportInfo=WebShow.Logger.reportInfo;WebShow.reportWarning=WebShow.Logger.reportWarning;WebShow.reportError=WebShow.Logger.reportError;WebShow.ConstStr={rootOperationCategoryName:"root",rootOperationCategoryDescription:"root of all operation categories",operationCategoryLevelSplitter:":"};WebShow.LogTypeStr={LOG:"",INFO:"[Info] ",WARNING:"[Warning] ",ERROR:"[Error] "};WebShow.AppStateText={_inited:false,texts:[],initTexts:function(){if(!this._inited){this._inited=true;var a=this.texts;a[WebShow.AppState.INITAL]="WebShow application inited";a[WebShow.AppState.LOADING]="Loading WebShow application config";a[WebShow.AppState.LOADED]="WebShow application config loaded";a[WebShow.AppState.SLIDE_CREATING]="Creating slide";a[WebShow.AppState.SLIDE_CREATED]="Slide created";a[WebShow.AppState.SLIDE_ADDING]="Adding slide to application";a[WebShow.AppState.SLIDE_ADDED]="Slide added to application";a[WebShow.AppState.SLIDE_REMOVING]="Removing slide from application";a[WebShow.AppState.SLIDE_REMOVED]="Slide removed from application";a[WebShow.AppState.SLIDE_SHOWING]="Showing slide";a[WebShow.AppState.SLIDE_SHOWN]="Slide shown";a[WebShow.AppState.SLIDE_HIDING]="Hidding slide";a[WebShow.AppState.SLIDE_HIDDEN]="Slide hidden";a[WebShow.AppState.SLIDE_SWITCHING]="Switching slide";a[WebShow.AppState.OPER_EXECUTING]="Executing operation";a[WebShow.AppState.OPER_FINISHED]="Operation finished";a[WebShow.AppState.OPER_REVERSED]="Operation reversed"}},getText:function(a){if(!this._inited){this.initTexts()}return this.texts[a]}};WebShow.AutoNavigatorText={PREV_SLIDE_TEXT:"<<",PREV_SLIDE_HINT:"Goto last slide",NEXT_SLIDE_TEXT:">>",NEXT_SLIDE_HINT:"Goto next slide",PREV_STEP_TEXT:"<",PREV_STEP_HINT:"Step backward",NEXT_STEP_TEXT:">",NEXT_STEP_HINT:"Step forward"};WebShow.CommandText={labelAppFirstSlide:"First Slide",hintAppFirstSlide:"Goto first slide",labelAppLastSlide:"Last Slide",hintAppLastSlide:"Goto last slide",labelAppPrevSlide:"Previous Slide",hintAppPrevSlide:"Goto previous slide",labelAppNextSlide:"Next Slide",hintAppNextSlide:"Goto next slide",labelAppPrevStep:"Backward",hintAppPrevStep:"Step backward",labelAppNextStep:"Forward",hintAppNextStep:"Step forward",labelAppAutoPlay:"Auto Play",hintAppAutoPlay:"Toggle auto play",labelAppClose:"Close",hintAppClose:"Close current presentation"};WebShow.ErrorStr={errLoadFileFailed:"Can not load file",errItemNotCertainClass:"Can not add item to list, item is not an instance of class: ",errParentElementNotSet:"Can not load page, parentElement is not set.",errNamedObjectNotOperationDef:"Object with the name is not an instance of OperationDef: ",errCanNotExecute:"This operation can not be executed.",errCanNotReverse:"This operation can not be undone.",errCanNotSetDurationOnOperationGroup:"Can not set duration on OperationGroup.",errCanNotSetDelayOnOperationGroup:"Can not set delay on OperationGroup.",errPredefinedCommandNotFound:"Predefined Command Name not found: ",errCanNotAddNoNameObjToRepository:"Can not add object without name into repository.",errCanNotAddNonObjectToRepository:"Only object can be added to repository.",errRequestDifferentPageInSimpleAppMode:"Can not load HTML content: App is in simple mode, but request a different HTML page",errLoadingHtmlContentWhenAppIsNull:"Can not load HTML content, App is null",errLoadingSlideOfUrlFailed:"Fail to load slide of url: ",errUnableToSortSlideElemInFrameMode:"Can not sort slide elements in frame mode",errXhrNotSupported:"XMLHttpRequest not supported",errExternalPlayerParentElemNotFound:"Can not find parent element for external player",errExternalPlayerCanNotLoad:"Can not load external player"};WebShow.PropertyMode={READ:4,WRITE:8,READWRITE:12,FIELD_ONLY:2,EVENT:2+1,UNPERSISTENT:1,propReadable:function(a){return((a.mode&WebShow.PropertyMode.READ)!=0)},propWritable:function(a){return((a.mode&WebShow.PropertyMode.WRITE)!=0)},propUnpersistent:function(a){return((a.mode&WebShow.PropertyMode.UNPERSISTENT)!=0)}};WebShow.PropertyScope={PRIVATE:1,PUBLIC:2,PUBLISHED:3};WebShow.PropertyType={Number:"Number",Boolean:"Boolean",String:"String",Object:"Object",Function:"Function",Event:"Function",Class:"Function",isNonObjectProp:function(a){return((a.type==WebShow.PropertyType.Number)||(a.type==WebShow.PropertyType.Boolean)||(a.type==WebShow.PropertyType.String))}};WebShow.PropertyRole={DEFAULT:0,PROPERTY:0,ALIAS:2,isAlias:function(a){return(a.role==WebShow.PropertyRole.ALIAS)}};WebShow.Property=Class.create({name:null,storedField:null,getter:null,setter:null,mode:WebShow.PropertyMode.READWRITE,scope:WebShow.PropertyScope.PUBLIC,role:WebShow.PropertyRole.PROPERTY,type:WebShow.PropertyType.String,defValue:null});WebShow.PropertyHelper={STORE_FIELD_PREFIX:"f",GETTERPREFIX:"get",SETTERPREFIX:"set",defaultStoreFieldName:function(a){return WebShow.PropertyHelper.STORE_FIELD_PREFIX+a},defaultGetterName:function(a){return WebShow.PropertyHelper.GETTERPREFIX+WebShow.PropertyHelper.camelToPascal(a)},defaultSetterName:function(a){return WebShow.PropertyHelper.SETTERPREFIX+WebShow.PropertyHelper.camelToPascal(a)},camelToPascal:function(a){return a.upperFirstLetter()},pascalToCamel:function(a){return a.lowerFirstLetter()}};WebShow.PropertyList=Class.create({initialize:function(){this.properties=new Array()},indexOf:function(d,a){for(var c=0,b=this.properties.length;c<b;++c){if((this.properties[c].name==d)||(a&&this.properties[c].name.toLowerCase()==d.toLowerCase())){return c}}return -1},propExists:function(b,a){return this.indexOfPropName(b,a)>=0},findProp:function(c,a){var b=this.indexOf(c,a);if(b>=0){return this.getProperties()[b]}else{return null}},getPropAt:function(a){return this.getProperties()[a]},sortByName:function(){this.properties.sort(function(d,c){if(d.propName>c.propName){return 1}else{if(d.propName=c.PropName){return -1}else{return 0}}})},add:function(e,g,d,b,c,a,f){var h=new WebShow.Property();h.name=e;if(b){h.mode=b}if(d){h.scope=d}if(g){h.type=g}h.role=WebShow.PropertyRole.PROPERTY;if(c){h.getter=c}else{if(WebShow.PropertyMode.propReadable(h)){h.getter=WebShow.PropertyHelper.defaultGetterName(e)}}if(a){h.setter=a}else{if(WebShow.PropertyMode.propWritable(h)){h.setter=WebShow.PropertyHelper.defaultSetterName(e)}}if(f){h.storedField=f}else{h.storedField=WebShow.PropertyHelper.defaultStoreFieldName(e)}this.addProp(h);return h},addProp:function(a){this.getProperties().push(a)},remove:function(c,a){var b=this.indexOfPropName(c,a);if(b>=0){this.removeAt(b)}},removeAt:function(a){if((a>=0)&&(a<this.properties.length)){for(l=this.properties.length,i=a;i<l-1;++i){this.properties[i]=this.properties[i+1]}this.properties.pop()}},getPropertiesByScope:function(d){var a=new WebShow.PropertyList();for(var c=0,b=this.properties.length;c<b;++c){var e=this.properties[c];if(e.scope==d){a.addProp(e)}}return a},getPropertiesAboveScope:function(d,e){var a=new WebShow.PropertyList();for(var c=0,b=this.properties.length;c<b;++c){var f=this.properties[c];if(f.scope>=d){if(WebShow.PropertyRole.isAlias(f)&&(!e)){continue}else{a.addProp(f)}}}return a},getLength:function(){return this.properties.length},getProperties:function(){return this.properties}});WebShow.Object=WebShow.createClass({CLASS_NAME:"WebShow.Object",initialize:function(a){if(!this.hasPropertiesInited()){this.createPropertyList();this._propIniting=true;this.initProperties();this._propIniting=false}this.initPropertyValues();this.initPropertyDefValues();this.setName(a)},createPropertyList:function(){this.constructor.prototype.fProps=new WebShow.PropertyList()},initProperties:function(){this.initPublicProp("xmlStoreTag",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("name",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null)},initPropertyDefValues:function(){for(var b=0,a=this.getProperties().getLength();b<a;++b){var c=this.getProperties().getPropAt(b);if(c.defValue!==null){if(c.setter){this[c.setter](c.defValue)}else{if(c.storedField){this[c.storedField]=c.defValue}}}}},initPropertyValues:function(){},hasPropertiesInited:function(){return(this.constructor.prototype.fProps)},getIsInitializingProps:function(){return this._propIniting},isInheritedFrom:function(a){return this.constructor instanceof a.constructor},getClassName:function(){return this.CLASS_NAME},getShortName:function(){var a=this.getClassName();a=a.replace("WebShow.","");return a},getDefInstanceName:function(){return(this.getShortName().lowerFirstLetter())},getDefXmlStoreTag:function(){return(this.getShortName().lowerFirstLetter().toXmlCase())},toString:function(){return this.getClassName()},inspect:function(){return this.toString()},inspectAsXml:function(){return WebShow.ObjUtils.inspectObjXml(this)},clone:function(a){return WebShow.cloneObject(this,a)},assignTo:function(b,a){return WebShow.copyObject(this,b,a)},assign:function(b,a){return WebShow.copyObject(b,this,a)},copyFrom:function(b,a){return this.assign(b,a)},free:function(){this.fProps=null},getProperty:function(c,a){var b=this.getProperties().indexOf(c,a);if(b>=0){return this.getProperties().getPropAt(b)}else{return null}},isPropDefined:function(b,a){return(this.hasProperty(b,a))},hasProperty:function(b,a){return(this.getProperties().indexOf(b,a)>=0)},defProp:function(e,g,d,b,c,a,f){if(!this.isPropDefined(e)){return(this.getProperties().add(e,g,d,b,c,a,f))}else{return this.getProperty(e)}},defEvent:function(a,b){if(!b){b=a}if(!this.isPropDefined(a)){return(this.getProperties().add(a,WebShow.PropertyType.Event,WebShow.PropertyScope.PUBLIC,WebShow.PropertyMode.EVENT,null,null,b))}else{return this.getProperty(a)}},changePropScope:function(b,a){var c=this.getProperty(b);if(c){c.scope=a}},initProp:function(d,e,c,a,b){var f=this.defProp(d,e,c,a);if(b!==null){f.defValue=b}if((f.getter)&&(!this[f.getter])){this.constructor.prototype[f.getter]=new Function('return this["'+f.storedField+'"]')}if(f.setter){if(!this[f.setter]){this.constructor.prototype[f.setter]=new Function("value",'this["'+f.storedField+'"] = value')}}},initPrivateProp:function(c,d,a,b){this.initProp(c,d,WebShow.PropertyScope.PRIVATE,a,b)},initEvent:function(a,b){var c=this.defEvent(a);this[c.storedField]=b},initPublicProp:function(c,d,a,b){this.initProp(c,d,WebShow.PropertyScope.PUBLIC,a,b)},initPublicEvent:function(a,b){this.initEvent(a,b)},initState:function(b,c,a){if(a==null){a=WebShow.PropertyMode.READ}var d=this.initPublicProp(b,WebShow.PropertyType.Number,a,c);return d},defPublishedProp:function(d,f,b,c,a,e){return this.defProp(d,f,WebShow.PropertyScope.PUBLISHED,b,c,a,e)},initPublishedProp:function(c,d,a,b){this.initProp(c,d,WebShow.PropertyScope.PUBLISHED,a,b)},initAlias:function(b,e){var g=this.getProperty(e);var f=g.type;var d=g.scope;var a=g.mode;var c=this.defProp(b,f,d,a);c.role=WebShow.PropertyRole.ALIAS;this.constructor.prototype[c.getter]=this.constructor.prototype[g.getter];this.constructor.prototype[c.setter]=this.constructor.prototype[g.setter]},getPropValueDef:function(a){return this.getPropValueDefFunc.bind(this,a)},getPropValueDefFunc:function(a){var b=this.getProperties().findProp(a);if(b){return this[b.storedField]}else{return null}},getPropValue:function(b,a){var c=this.getProperties().findProp(b,a);if(c){if(c.getter){return this[c.getter]()}else{return this[c.storedField]}}else{return null}},getPropValueByIndex:function(a){var b=this.getProperties().getPropAt(a);if(b){return this.getPropValue(b.name)}else{return null}},getStateValue:function(a){return this.getPropValue(a)},setPropValueDef:function(a,b){this.setPropValueDefFunc.bind(this,a,b)},setPropValueDefFunc:function(a,b){var c=this.getProperties().findProp(a);if(c){this[c.storedField]=b}},setPropValue:function(b,c,a){var d=this.getProperties().findProp(b,a);if(d){if(d.setter){this[d.setter](c)}else{this[d.storedField]=c}}},setPropValueByIndex:function(a,b){var c=this.getProperties().getPropAt(a);if(c){this.setPropValue(c.name,b)}},setStateValue:function(a,b){this.setPropValue(a,b)},evokeEventHandler:function(){var b=$A(arguments);var a=b.shift();if(a){a.apply(this,b)}},saveToXml:function(c,a,g){var f=c.ownerDocument;var b;if(!a){a=this.getXmlStoreTag()}if(a){try{b=f.createElement(a)}catch(d){throw ("error create tag: "+this.CLASS_NAME+" : "+a)}}c.appendChild(b);b=this.saveToXmlElement(b,g);return b},saveToXmlElement:function(d,f){if(f==null){f=WebShow.PropertyScope.PUBLISHED}var c=this.getPropertiesAboveScope(f,false);for(var b=0,a=c.getLength();b<a;++b){var h=c.getPropAt(b);if(WebShow.PropertyMode.propUnpersistent(h)){continue}var e=h.name;var g=this.getPropValue(e);if((g===null)||(g===undefined)||(g==h.defValue)){continue}if(g instanceof WebShow.Object){g.saveToXml(d,e.toXmlCase(),f)}else{if(g.saveToXml){g.saveToXml(d,e.toXmlCase(),f)}else{if(typeof(g)=="object"){WebShow.saveObjFieldsToXml(g,d,e)}else{if(h.type==WebShow.PropertyType.Boolean){d.setAttribute(e.toXmlCase(),boolToStr(g))}else{d.setAttribute(e.toXmlCase(),g)}}}}}return d},loadFromXmlElement:function(a,b){return this.loadFromXml(a,b)},loadFromXml:function(xmlElement,scopeLevel){if(scopeLevel==null){scopeLevel=WebShow.PropertyScope.PUBLISHED}var newPropValue;var props=this.getPropertiesAboveScope(scopeLevel,true);var directChildElems=WebShow.DomUtils.getChildElems(xmlElement);for(var i=0,l=props.getLength();i<l;++i){var prop=props.getPropAt(i);if(!WebShow.PropertyMode.propWritable(prop)){continue}if(WebShow.PropertyMode.propUnpersistent(prop)){continue}var propName=prop.name;var oldPropObj=this.getPropValue(propName);var propType=prop.type;newPropValue=xmlElement.getAttribute(propName.toXmlCase());if(!newPropValue){newPropValue=xmlElement.getAttribute(propName.toLowerCase())}if(!newPropValue){newPropValue=xmlElement.getAttribute(propName.toUpperCase())}if((newPropValue!==null)&&(newPropValue!==undefined)){if(propType){if(propType==WebShow.PropertyType.Number){this.setPropValue(propName,parseFloat(newPropValue))}else{if(propType==WebShow.PropertyType.Boolean){this.setPropValue(propName,strToBool(newPropValue))}else{this.setPropValue(propName,newPropValue)}}}else{this.setPropValue(propName,newPropValue)}}else{if(directChildElems.length>0){elems=WebShow.DomUtils.findElemsByTagName(directChildElems,propName,{caseSensitive:false,extractLastOnly:true})}else{elems=null}if(elems&&(elems.length>0)){var elem=elems[elems.length-1];if(!oldPropObj){oldPropObj=eval("new "+propType+"()")}if(oldPropObj){if(oldPropObj instanceof WebShow.Object){oldPropObj.loadFromXml(elem,scopeLevel)}else{if(oldPropObj.loadFromXml){oldPropObj.loadFromXml(elem,scopeLevel)}else{if(propType==WebShow.PropertyType.Object){WebShow.loadObjFieldsFromXml(oldPropObj,elem)}}}}this.setPropValue(propName,oldPropObj)}}}},loadFromXmlFile:function(a,c,d){var b=WebShow.Xml.load(a,function(g,e){if(e&&g){app.loadFromXml(g.documentElement,c);if(d){d(true)}}else{if(d){d(false)}var f=WebShow.ErrorStr.errLoadFileFailed+": "+configUrl;if(WebShow&&WebShow.reportError){WebShow.reportError(f)}throw f}})},getProperties:function(){return this.fProps},getPropertiesAboveScope:function(a,b){return this.getProperties().getPropertiesAboveScope(a,b)},getPropertiesByScope:function(a){return this.getProperties().getPropertiesByScope(a)},getPublicProperties:function(){return this.getPropertiesByScope(WebShow.PropertyScope.PUBLIC)},getPublishedProperties:function(){return this.getPropertiesByScope(WebShow.PropertyScope.PUBLISHED)},getXmlStoreTag:function(){if(this.fxmlStoreTag){return this.fxmlStoreTag}else{return this.getDefXmlStoreTag()}}});WebShow.copyObject=function(e,c,b,a,d){b=false;var f=$H();f.set(e,c);return WebShow.copyObjectSeed(e,c,b,a,d,f)};WebShow.copyObjectSeed=function(b,j,e,f,h,d){d.set(b,j);for(var k in b){if(b.prototype&&b.prototype.fieldName){continue}var g=b[k];if((typeof(g)!="function")||h){if((j[k]!==undefined)||f){if(g===null){j[k]=g}else{if(e&&(typeof(g)=="object")){var a=d.get(g);if(a){j[k]=a}else{if(j[k]&&(typeof(j[k])=="object")){WebShow.copyObjectSeed(g,j[k],e,f,h,d)}else{var c;if(g.prototype){c=new g.prototype()}else{c={}}j[k]=c;WebShow.copyObjectSeed(g,j[k],e,f,h,d)}d.set(g,j[k])}}else{j[k]=g}}}}}return j};WebShow.cloneObject=function(c,b){var a;if(c.constructor){a=new c.constructor()}else{a={}}WebShow.copyObject(c,a,b,true,true);return a};WebShow.StorageObject=Class.create({initialize:function(a){if(a){for(var b in a){this[b]=a[b]}}},saveToXml:function(b,a){return WebShow.saveObjFieldsToXml(this,b,a)},loadFromXml:function(a){WebShow.loadObjFieldsFromXml(this,a)}});WebShow.saveObjFieldsToXml=function(f,c,a){if(f instanceof Array){return null}var e=c.ownerDocument;var b;if(a){b=e.createElement(a)}else{b=e.createElement(f.getXmlStoreTag())}c.appendChild(b);for(var g in f){var d=f[g];if((d===null)||(d===undefined)){continue}if(typeof(d)==WebShow.PropertyType.Object.toLowerCase()){WebShow.saveObjFieldsToXml(d,b,g)}else{if(typeof(d)==WebShow.PropertyType.Boolean.toLowerCase()){b.setAttribute(g,WebShow.boolToStr(d))}else{if(typeof(d)==WebShow.PropertyType.Function.toLowerCase()){}else{b.setAttribute(g,d)}}}}return b};WebShow.loadObjFieldsFromXml=function(g,e){if(e.attributes){for(var d=0,c=e.attributes.length;d<c;++d){var b=e.attributes.item(d);var h=b.name;var f=b.value;if(WebShow.isBoolStr(f)){g[h]=WebShow.strToBool(f)}else{g[h]=f}}}var a=e.firstChild;while(a){if(a.nodeType==Node.ELEMENT_NODE){var h=a.tagName;g[h]={};WebShow.loadObjFieldsFromXml(g[h],a)}if(a==e.lastChild){break}else{a=a.nextSibling}}};WebShow.Container=WebShow.createClass(WebShow.Object,{CLASS_NAME:"WebShow.Container",initialize:function($super){$super()},initProperties:function($super){$super();this.initPublicProp("ownChildren",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true)},length:function(){return 0},getLength:function(){return this.length()}});WebShow.List=WebShow.createClass(WebShow.Container,{CLASS_NAME:"WebShow.List",initialize:function($super,a,b){$super();if(a){this.items=a}else{this.items=[]}if(b!==null){this.allowDuplicate=b}else{this.allowDuplicate=true}},initProperties:function($super){$super();this.initPublicProp("addExtraFields",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true);this.initPublicEvent("onAdd",null);this.initPublicEvent("onRemove",null)},initPropertyValues:function($super){$super();this.items=[]},toString:function($super){return $super()+": "+this.items.toString()},inspect:function($super){var a=$super();a+="{";for(var d=0,c=this.getLength();d<c;++d){var e=this.getItem(d);var b;if(e.inspect){b=e.inspect()}else{b=e.toString()}a=a+"\n["+d+"] "+b}a+="}\n";return a},getItems:function(){return this.items},each:function(a){if(this.getItems()){this.getItems().each(a)}},reIndexItems:function(b,d){var f=b||0;var e=d||this.getLength()-1;for(var a=f;a<=e;++a){var c=this.getItem(a);if(this.getAddExtraFields()){c._index=a;c._container=this}}},add:function(b,a){if((!this.allowDuplicate)&&(this.indexOf(b)>=0)){return this.indexOf(b)}var c;if((a==null)||(a>=this.items.length)||(a<0)){this.items.push(b);c=this.getLength()-1;if(this.getAddExtraFields()){b._index=c}}else{for(l=this.items.length,i=l;i>a;--i){this.items[i]=this.items[i-1]}this.items[a]=b;c=a;if(this.getAddExtraFields()){this.reIndexItems(c,null)}}if(this.getAddExtraFields()){b._container=this}this.added(b,c);this.evokeEventHandler(this.onAdd,b,b._index);return c},added:function(b,a){},append:function(a){return this.add(a)},remove:function(b){var d=false;var a=this;this.items=this.items.reject(function(f){if(f==b){d=true;a.evokeEventHandler(a.onRemove,f,f._index);return true}});if(d){if(this.getAddExtraFields()){try{delete b._container;delete b._index}catch(c){}}this.reIndexItems(null,null);this.removed(b);return b}else{return null}},removed:function(a){},removeAt:function(a){var b=null;if((a>=0)&&(a<this.items.length)){b=this.getItem(a);for(l=this.items.length,i=a;i<l-1;++i){this.items[i]=this.items[i+1]}this.items.pop();this.reIndexItems(a,null);if(this.getAddExtraFields()){delete b._container;delete b._index}this.removed(b);this.evokeEventHandler(this.onRemove,b,b._index);return b}return null},removeRange:function(c,b){for(var a=c;a<=b;++a){this.removeAt(a)}this.reIndexItems(c,null)},clear:function(){if(this.getOwnChildren){for(var a=this.getLength()-1;a>=0;--a){this.removeAt(a)}}this.items=[]},indexOf:function(a){return this.getItems().indexOf(a)},itemAt:function(a){if((a<0)||(a>this.length()-1)||(!this.items)){return null}else{return this.items[a]}},getItem:function(a){return this.itemAt(a)},first:function(){if(this.getLength()>0){return this.getItem(0)}else{return null}},last:function(){if(this.getLength()>0){return this.getItem(this.getLength()-1)}else{return null}},findItemByProp:function(d,e){var c;for(var b=0,a=this.getLength();b<a;++b){c=this.getItem(b);if(c[d]==e){return c}if(c.getPropValue){if(c.getPropValue(d)==e){return c}}}},findItemByName:function(d){var c;for(var b=0,a=this.getLength();b<a;++b){c=this.getItem(b);if(c.getName&&(c.getName()==d)){return c}}},length:function(){return this.items.length},getLength:function(){return this.length()},saveToXmlElement:function($super,a,d){var b=$super(a,d);if(this.getOwnChildren()&&(this.getLength()>0)){var c=b.ownerDocument;this.each((function(e){if(e.saveToXml){celem=e.saveToXml(b,null,d)}if(celem){b.appendChild(celem)}}).bind(this))}return b},loadFromXml:function($super,a,b){$super(a,b)}});WebShow.ObjectList=WebShow.createClass(WebShow.List,{CLASS_NAME:"WebShow.ObjectList",initialize:function($super,c,b){var a;$super(null,b||false);if(c){a=c}else{a=WebShow.Object}this.setItemClass(a);this.setOwnChildren(true)},initProperties:function($super){$super();this.initPublicProp("itemClass",WebShow.PropertyType.Function,WebShow.PropertyMode.READWRITE,null)},addObject:function(){var b=this.getItemClass();var a=new b();this.add(a);return a},loadFromXml:function($super,d,f){var a=$super(d,f);this.clear();for(var c=0,b=d.childNodes.length;c<b;++c){var g=d.childNodes[c];if(g.nodeType==Node.ELEMENT_NODE){var e=this.addObject();if(e.loadFromXml){e.loadFromXml(g,f)}}}return a}});WebShow.FlexObjectList=WebShow.createClass(WebShow.List,{CLASS_NAME:"WebShow.FlexObjectList",initialize:function($super,a){$super(null,a||false)},createObj:function(a){return WebShow.ObjFactory.createObjByTag(a)},loadFromXml:function($super,d,f){var b=$super(d,f);this.clear();var a=d.firstChild;while(a){if(a.nodeType==Node.ELEMENT_NODE){var c=a.tagName;var e=this.createObj(c);if(e&&e.loadFromXml){e.loadFromXml(a,f);this.add(e)}}if(a==d.lastChild){break}else{a=a.nextSibling}}return b}});WebShow.FlexObjectListEx=WebShow.createClass(WebShow.FlexObjectList,{CLASS_NAME:"WebShow.FlexObjectListEx",initialize:function($super,a,b){$super(b||false);this.setOwnChildren(true);this.setBaseItemClass(a)},initProperties:function($super){$super();this.initPublicProp("baseItemClass",WebShow.PropertyType.Class,WebShow.PropertyMode.READWRITE,null)},add:function($super,c,a){if(c.isInheritedFrom(this.getBaseItemClass())){return $super(c,a)}else{var b="Unknown";if(this.getBaseItemClass().prototype.getClassName){b=this.getBaseItemClass().prototype.getClassName()}throw new Error(WebShow.ErrorStr.errItemNotCertainClass+b);return null}}});WebShow.Map=WebShow.createClass(WebShow.Container,{CLASS_NAME:"WebShow.Map",XmlItemTagName:"item",XmlKeyAttribName:"key",XmlValueAttribName:"value",initialize:function($super){$super()},initProperties:function($super){$super();this.initPublicProp("data",WebShow.PropertyType.Object,WebShow.PropertyMode.READ,null)},initPropertyValues:function($super){$super();this.fdata=new Hash()},toString:function(){return this.getData().toString()},inspect:function($super){return this.getData().inspect()},clone:function(a){this.getData().clone(a.getData())},getValueOfKey:function(a){return this.getData().get(a)},get:function(a){return this.getData().get(a)},getKeys:function(){return this.getData().keys()},getValues:function(){return this.getData().values()},getKeyAt:function(a){return this.getData().keys()[a]},getValueAt:function(a){return this.getData().values()[a]},set:function(a,b){this.getData().set(a,b)},add:function(a,b){this.getData().set(a,b)},remove:function(a){this.getData().unset(a)},clear:function(){this.each(function(a){this.remove(a.key)})},length:function(){return this.getData().keys().length},getLength:function(){return this.getData().keys().length},each:function(a){this.getData().each(a)},saveToXmlElement:function($super,a,d){var b=$super(a,d);if(this.getOwnChildren()&&(this.getLength()>0)){var c=b.ownerDocument;this.each((function(f){var e=c.createElement(this.XmlItemTagName);e.setAttribute(this.XmlKeyAttribName,f.key);e.setAttribute(this.XmlValueAttribName,f.value);b.appendChild(e)}).bind(this))}return b},loadFromXml:function(d,f){this.clear();for(var c=0,a=d.childNodes.length;c<a;++c){var g=d.childNodes[c];if(g.nodeType==Node.ELEMENT_NODE){var b=g.getAttribute(this.XmlKeyAttribName);var e=g.getAttribute(this.XmlValueAttribName);if(b){this.add(b,e)}}}},getData:function(){return this.fdata}});Selector.handlers.id=function(b,a,j,f){var g;if(a.getElementById){g=a.getElementById(j)}else{if(a.ownerDocument){g=a.ownerDocument.getElementById(j)}else{g=$(j)}}var d=Selector.handlers;if(!g){return[]}if(!b&&a==document){return[g]}if(b){if(f){if(f=="child"){for(var c=0,e;e=b[c];c++){if(g.parentNode==e){return[g]}}}else{if(f=="descendant"){for(var c=0,e;e=b[c];c++){if(Element.descendantOf(g,e)){return[g]}}}else{if(f=="adjacent"){for(var c=0,e;e=b[c];c++){if(Selector.handlers.previousElementSibling(g)==e){return[g]}}}else{b=d[f](b)}}}}for(var c=0,e;e=b[c];c++){if(e==g){return[g]}}return[]}return(g&&Element.descendantOf(g,a))?[g]:[]};if(Prototype.BrowserFeatures.XPath){document._getElementsByXPath=function(g,a){var c=[];if(a){var f=a.ownerDocument}if(!f){f=document}if(f){var e=f.evaluate(g,$(a)||document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(var b=0,d=e.snapshotLength;b<d;b++){c.push(Element.extend(e.snapshotItem(b)))}return c}}}Event.element=function(b){var a=Event.extend(b).target;if(a){return Element.extend(a.nodeType==Node.TEXT_NODE?a.parentNode:a)}else{return null}},WebShow.freeAndNil=function(a){if(a.free){a.free()}a=null};function parseUri(e){var d=parseUri.options,a=d.parser[d.strictMode?"strict":"loose"].exec(e),c={},b=14;while(b--){c[d.key[b]]=a[b]||""}c[d.q.name]={};c[d.key[12]].replace(d.q.parser,function(g,f,h){if(f){c[d.q.name][f]=h}});return c}parseUri.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};WebShow.URL={Delimiter:"/",Delimiter2:"\\",getProtocal:function(b){if(!b){return""}var c=parseUri(b);var a=(c.protocol);return a},isHttpProtocal:function(b){var a=WebShow.URL.getProtocal(b.toString());if(!a){return false}else{a=a.toLowerCase();return(a=="http")||(a=="https")}},getBasePath:function(b){if(!b){return""}b=b.toString();var d;var c=b.lastIndexOf("/");if(WebShow.URL.isAbsPath(b)){var a=b.lastIndexOf("://");if(c-3<=a){c=-1}}if(c<0){c=b.lastIndexOf("\\")}if(c<0){d=""}else{if(c>=0){d=b.substring(0,c+1)}else{d=b}}return d},getFileName:function(c){var e=parseUri(c);var a=(e.file);var d=a.lastIndexOf("/");var b=a.lastIndexOf("\\");var f=Math.max(d,b);if(f>=0){a=a.substring(f+1,a.length)}return a},getFileExt:function(b){if(b){var a=b.lastIndexOf(".");if(a>=0){return b.substring(a,b.length)}}return null},getFileNameWithoutExt:function(b){if(b){var a=b.lastIndexOf(".");if(a>=0){return b.substring(0,a)}}return b},replaceFileExt:function(c,b){if(c){var a=c.lastIndexOf(".");if(a>=0){result=c.substring(0,a)}result=result+b}return result},getQueryValue:function(e,c){query=e.substring(1);var b=query.split("&");for(var a=0;a<b.length;a++){var d=b[a].split("=");if(d[0]==c){return d[1]}}return null},getAnchor:function(b){var c=parseUri(b);var a=(c.anchor);return a},getUrlWithoutAnchor:function(c){var b=WebShow.URL.getAnchor(c);var d=c.lastIndexOf("#"+b);var a=c.slice(0,d);return a},isAbsPath:function(a){var b=parseUri(a);return(b.protocol!="")},relPathToAbs:function(c,b){if(WebShow.URL.isAbsPath(c)){return c}var d=WebShow.URL.getBasePath(b);d=WebShow.URL.includeTrailingDelimiter(d);var a=WebShow.URL.excludeHeadingDelimiter(c);a=d+a;return a},mergePath:function(a,b){if(WebShow.URL.isAbsPath(a)){return a}else{if(a){return WebShow.URL.getBasePath(b)+a}else{return b}}},removeUrlTrash:function(b){var c=/([^\.])\.\//g;var a=b.replace(c,"$1");var c=/^\.\//;return a.replace(c,"")},isSameUrl:function(e,d,c){var b=WebShow.URL.removeUrlTrash(WebShow.URL.relPathToAbs(e,c));var a=WebShow.URL.removeUrlTrash(WebShow.URL.relPathToAbs(d,c));return(b==a)},hasTrailingDelimiter:function(b){var a=b.lastIndexOf(WebShow.URL.Delimiter)||b.lastIndexOf(WebShow.URL.Delimiter2);return(a=b.length-1)},includeTrailingDelimiter:function(a){if(!a){return""}if(!WebShow.URL.hasTrailingDelimiter(a)){a=a+WebShow.URL.Delimiter}return a},excludeTrailingDelimiter:function(a){if(!a){return""}if(WebShow.URL.hasTrailingDelimiter(a)){a=a.substr(0,a.length-1)}return a},includeHeadingDelimiter:function(b){if(!b){return""}var a=b.indexOf(WebShow.URL.Delimiter);if(a!=0){b=WebShow.URL.Delimiter+b}return b},excludeHeadingDelimiter:function(b){if(!b){return""}var a=b.indexOf(WebShow.URL.Delimiter);if(a=0){b=b.substr(1,b.length-1)}return b},getDocUrl:function(a){if(!a){return null}else{return a.url||a.documentURI||a.URL||a.location}}};WebShow.ArrayUtils={pushArray:function(b,d){for(var c=0,a=d.length;c<a;++c){b.push(d[c])}return b}};WebShow.HtmlLinkAttribUtil={linkAttribs:["href","src","lowsrc","background","action","pluginurl"],linkAttribRegExps:[],linkAttribRegExpsPrefix:"<\\s*[^\\>\\s]+s+([^\\>\\s]+\\s+)*",linkAttribRegExpsSuffix:"\\s*=([\\'\\\"]?)([^\\'\\\"])+\\2[^\\>]*>",cssAttribs:["backgroundImage","listStyleImage"],_fillLinkAttribRegExps:function(){for(var f=0,c=WebShow.HtmlLinkAttribUtil.linkAttribs.length;f<c;++f){var a=WebShow.HtmlLinkAttribUtil.linkAttribs[f];var o=a.toUpperCase();var g=a.toLowerCase();var m="";var h="";var n="";for(var e=0,d=a.length;e<d;++e){h=g.charAt(e);n=o.charAt(e);m=m+"["+h+n+"]"}var b=WebShow.HtmlLinkAttribUtil.linkAttribRegExpsPrefix+m+WebShow.HtmlLinkAttribUtil.linkAttribRegExpsSuffix;WebShow.HtmlLinkAttribUtil.linkAttribRegExps[f]=b}},iterate:function(b,r){if(!r){return -1}var q=Element.descendants(b);q.push(b);var o=0;for(var n=0,g=q.length;n<g;++n){var d=q[n];for(var m=0,h=WebShow.HtmlLinkAttribUtil.linkAttribs.length;m<h;++m){var f=WebShow.HtmlLinkAttribUtil.linkAttribs[m];var a=d.getAttribute(f,2);if((a!=null)&&(!a.toString().blank())){var c=r(a);try{d.setAttribute(f,c)}catch(p){if(f="src"){d.src=c}else{d[f]=c}}o++}}for(var m=0,h=WebShow.HtmlLinkAttribUtil.cssAttribs.length;m<h;++m){var f=WebShow.HtmlLinkAttribUtil.cssAttribs[m];var a=Element.getStyle(d,f);if((a!=null)&&(!a.toString().blank())&&(a.toLowerCase()!="none")){a=WebShow.CssUtils.getLocationOfUrlValue(a);if(a==""){continue}var c=r(a);c=WebShow.CssUtils.generateUrlValue(c);d.style[f]=c}}}return o},changeAllLinkAttribsToAbsElem:function(a,c){if(!c){doc=a.ownerDocument;c=doc.location}if(Prototype.Browser.IE){var d=a.innerHTML;a.innerHTML=d}else{var b=function(f){var e=WebShow.URL.relPathToAbs(f,c);return e};WebShow.HtmlLinkAttribUtil.iterate(a,b);b=null}},changeAllLinkAttribsToAbsText:function(h,e){var g=h;var a=function(n,k,j,p,m,o){return WebShow.URL.relPathToAbs(p,e)};for(var c=0,b=WebShow.HtmlLinkAttribUtil.linkAttribRegExps.length;c<b;++c){var f=WebShow.HtmlLinkAttribUtil.linkAttribRegExps[c];var d=new RegExp(f,"gm");g=g.replace(d,a)}return g},changeAllLinkAttribsToAbs:function(a,b){if(typeof(a)=="string"){return WebShow.HtmlLinkAttribUtil.changeAllLinkAttribsToAbsText(a,b)}else{return WebShow.HtmlLinkAttribUtil.changeAllLinkAttribsToAbsElem(a,b)}}};WebShow.HtmlLinkAttribUtil._fillLinkAttribRegExps();WebShow.ElementUtils={getOwnerDocument:function(a){if(a){return a.ownerDocument}else{return null}},getOwnerWindow:function(a){if(a){return a.ownerDocument.window}else{return null}},getRootDocElement:function(a){return a.ownerDocument.documentElement},getRootBody:function(a){return a.ownerDocument.body},getTextContent:function(c){var b="";if(c.nodeType==Node.TEXT_NODE){return a.nodeValue}var a=c.firstChild;while(a){if(a.nodeType==Node.TEXT_NODE){b+=a.nodeValue}else{if(a.nodeType==Node.ELEMENT_NODE){b+=WebShow.ElementUtils.getTextContent(a)}}a=a.nextSibling}return b},getCommonAncestor:function(c,b){var d=c.ownerDocument;if(d!=b.ownerDocument){return null}var a=c;while((!Element.descendantOf(a,b))&&(a!=d.documentElement)){a=a.parentNode}return a},isSibling:function(b,a){return(b.parentNode==a.parentNode)},isChildOrSelf:function(a,b){return Element.descendantOf(b,a)||(a==b)},getLevelDistance:function(b,d){var a=0;var c=d;while((c!=b)&&(c!=null)){a++;c=c.parentNode}if(c==null){return -1}else{return a}},getNeareastElement:function(d,c){var h=d.ownerDocument;var b=Element.descendants(h.documentElement);var g=b.indexOf(d);var a;var j;var k=b.length;var m=null;for(var f=0,e=c.length;f<e;++f){a=b.indexOf(c[f]);if(a>=0){j=Math.abs(g-a);if(j<k){k=j;m=c[f]}}}return m},getAncestorWithTagName:function(c,a){var b=c.parent;while(b&&(b.tagName.toLowerCase()!=a.toLowerCase())){b=b.parentNode;if(b=c.ownerDocument.documentElement){return null}}return b},isInsideTagName:function(b,a){if(b.tagName.toLowerCase()==a.toLowerCase()){return true}else{return(!!WebShow.ElementUtils.getAncestorWithTagName(b,a))}},isHrefElement:function(a){if(a){return(a.tagName.toLowerCase()=="a")&&a.href}else{return false}},isInsideOrIsHrefElement:function(b){var a=b;while(a&&(!WebShow.ElementUtils.isHrefElement(a))){a=a.parentNode;if(a==b.ownerDocument.body){return null}}return !!a},isFormControl:function(b){var a=!!b.form;if(!a){a=WebShow.ControlElementUtils.isControl(b)}return a},isClickableElement:function(a){return WebShow.ElementUtils.isFormControl(a)||WebShow.ElementUtils.isInsideOrIsHrefElement(a)},isKeyPressableElement:function(a){return WebShow.ElementUtils.isFormControl(a)},getElementRelatedValue:function(d,f){if((!d)||(f==null)){return null}var b=/^\@(.*)$/;var e=/^\{(.*)\}$/;var c=f.replace(b,"$1");if(c!=f){return d.getAttribute(c)}var a=f.replace(e,"$1");if(a!=f){var g=Element.select(d,a).first();if(g){return WebShow.ElementUtils.getTextContent(g)}else{return""}}return f},clearChilds:function(a){if(a){a.innerHTML=""}},removeSelf:function(a){if(a.parentNode){a.parentNode.removeChild(a)}},show:function(b,a){var d=Element.getStyle(b,"visibility");if(d&&(d.toLowerCase()=="hidden")){b.style.visibility="inherit"}var c=Element.getStyle(b,"display");if(c&&(c.toLowerCase()=="none")){if(b.style.display){Element.setStyle(b,{display:""})}else{try{Element.setStyle(b,{display:"inherit"})}catch(f){Element.setStyle(b,{display:"block"})}}}if(!a){if(Element.getOpacity(b)=="0"){Element.setOpacity(b,1)}}},showWithAncestors:function(d,b){var e=Element.ancestors(d);for(var c=0,a=e.length;c<a;++c){var f=e[c];if((f.tagName.toLowerCase()!="body")&&(f.tagName.toLowerCase()!="html")){WebShow.ElementUtils.show(f,b)}}},hide:function(a,b){if(b=="visibility"){$(a).setStyle({visibility:"hidden"})}else{$(a).setStyle({display:"none"})}},hideVisibility:function(a){WebShow.ElementUtils.hide(a,"visibility")},setVisible:function(a,b){if(b){WebShow.ElementUtils.show(a)}else{WebShow.ElementUtils.hide(a)}},getZIndexOfElement:function(a){if(a){return($(a).getStyle("z-index"))}else{return null}},setZIndexOfElement:function(a,b){if(a){a.style.zIndex=(b)?b:""}},compareZLevelOfElement:function(d,c){if(d.parentNode!=c.parentNode){return null}else{var a=WebShow.ElementUtils.getZIndexOfElement(d)-WebShow.ElementUtils.getZIndexOfElement(c);if(a==0){var b=d.parentNode;a=WebShow.ElementUtils.compareOrderOfChild(b,d,c)}return a}},parseZIndex:function(a){if(!a){return 0}else{return parseInt(a)}},indexOfChild:function(d,e){var b=d.childNodes;for(var c=0,a=b.length;c<a;++c){if(b[c]==e){return c}}return -1},compareOrderOfChild:function(d,f,e){if(f==e){return 0}var b=d.childNodes;for(var c=0,a=b.length;c<a;++c){if(b[c]==f){return -1}if(b[c]==e){return 1}}return 0}};WebShow.ControlElementUtils={isControl:function(b){var a=b.tagName.toLowerCase();return(a=="input")||(a=="option")||(a=="select")||(a=="textarea")},setValue:function(a,b){a.value=b},getDisabled:function(a){return a.disabled},setDisabled:function(a,b){a.disabled=b}};WebShow.PositionUtils={isAbsolute:function(a){return(Element.getStyle(a,"position").toLowerCase()=="absolute")},isRelative:function(a){return(Element.getStyle(a,"position").toLowerCase()=="relative")},getBoxWidth:function(a){return Element.getWidth(a)},getBoxHeight:function(a){return Element.getHeight(a)},getWidthWithMargin:function(a){var b=WebShow.PositionUtils.getBoxWidth(a);var d=parseFloat(Element.getStyle(a,"margin-left"));var c=parseFloat(Element.getStyle(a,"margin-right"));return b+d+c},getHeightWithMargin:function(b){var a=WebShow.PositionUtils.getBoxHeight(b);var c=parseFloat(Element.getStyle(b,"margin-top"));var d=parseFloat(Element.getStyle(b,"margin-bottom"));return a+c+d}};WebShow.FrameUtils={getFrameWindowFromElement:function(a){if(a.contentWindow){return a.contentWindow}else{if(a.contentDocument){return a.contentDocument.defaultView}else{return null}}},getFrameElementFromWindow:function(a){if(a.frameElement){return a.frameElement}else{return null}},getFrameDocumentFromElement:function(b){try{if(b.contentDocument){return b.contentDocument}else{if(b.contentWindow){return b.contentWindow.document}else{return null}}}catch(a){WebShow.reportError(a)}},getFrameWindowOfInsideElement:function(a){if(!a){return null}if(a.ownerDocument){return a.ownerDocument.defaultView||a.ownerDocument.parentWindow}else{return null}},getFrameOfInsideElement:function(a){var b=WebShow.FrameUtils.getFrameWindowOfInsideElement(a);if(b&&b.frameElement){return b.frameElement}else{return null}}};WebShow.DomUtils={getChildElems:function(c){var b=[];var a=c.firstChild;while(a){if(a.nodeType==Node.ELEMENT_NODE){b.push(a)}a=a.nextSibling}return b},getDirectChildrenOfTagName:function(c,d){var b=[];var a=c.firstChild;while(a){if(a.nodeType==Node.ELEMENT_NODE){if(a.tagName&&(a.tagName.toLowerCase()==d.toLowerCase())){b.push(a)}}a=a.nextSibling}return b},filterElemsByTagName:function(d,f,c){var a=[];for(var e=0,b=d.length;e<b;++e){var g=d[e].tagName;if((c&&(g==f))||((!c)&&(g.toLowerCase()==f.toLowerCase))){a.push(d[e])}}return a},findElemsByTagName:function(a,b,k){var m=[];k=Object.extend({},k);var d=0;var f=a.length;var e=1;if(k.extractLastOnly){var g=d;d=f-1;f=g-1;e=-1}var j=k.extractLastOnly||k.extractFirstOnly;for(var c=d;c!=f;c+=e){var h=a[c].tagName;if((k.caseSensitive&&(h==b))||((!k.caseSensitive)&&(h.toLowerCase()==b.toLowerCase()))){m.push(a[c]);if(j){break}}}return m},iterateDescendants:function(d,c,e){var b=0;var a=c.firstChild;while(a){if(a.nodeType==Node.ELEMENT_NODE){if(e&&((a==e)||(e.indexOf&&(e.indexOf(a)>=0)))){}else{d(a);b++;b+=WebShow.DomUtils.iterateDescendants(d,a,e)}}a=a.nextSibling}return b}};WebShow.XmlIslandUtils={XML_ISLAND_TAG:"xml",getXmlIslandElement:function(a){return $A(a.getElementsByTagName(WebShow.XmlIslandUtils.XML_ISLAND_TAG))},getElementsByTagName:function(c,f){var a=$A(c.getElementsByTagName(f));if(Prototype.Browser.IE){var g=WebShow.XmlIslandUtils.getXmlIslandElement(c);for(var e=0,b=g.length;e<b;++e){var d=$A(g[e].getElementsByTagName(f));WebShow.ArrayUtils.pushArray(a,d)}}return a}};WebShow.CssUtils={getDetailOfSize:function(c){var b={};b.value=parseFloat(c);var a=b.value.toString();b.unit=c.replace(a,"");return b},splitSizeStr:function(a){return WebShow.CssUtils.getDetailOfSize(a)},getValueOfSize:function(a){return WebShow.CssUtils.getDetailOfSize(a).value},getUnitOfSize:function(a){return WebShow.CssUtils.getDetailOfSize(a).unit},concatSizeStr:function(b,a){return b.toString()+a.toString()},URL_VALUE_PATTERN:/^url\((.*)\)$/i,isUrlValue:function(a){return a.match(WebShow.CssUtils.URL_VALUE_PATTERN)},getLocationOfUrlValue:function(b){var a=WebShow.CssUtils.URL_VALUE_PATTERN.exec(b);if(a!=null){return a[1]}else{return""}},generateUrlValue:function(a){return"url("+a+")"}};WebShow.CssTransformUtils={_isTransformSupported:null,_transformPropName:null,_checkTransformSupport:function(){var b=document.body;var a=["transform","WebkitTransform","MozTransform","OTransform"];var c;while(c=a.shift()){if(typeof b.style[c]!="undefined"){WebShow.CssTransformUtils._isTransformSupported=true;WebShow.CssTransformUtils._transformPropName=c;return}}WebShow.CssTransformUtils._isTransformSupported=false;WebShow.CssTransformUtils._transformPropName=""},isTransformSupported:function(){if(WebShow.CssTransformUtils._isTransformSupported===null){WebShow.CssTransformUtils._checkTransformSupport()}return WebShow.CssTransformUtils._isTransformSupported},getTransformPropName:function(){if(WebShow.CssTransformUtils._transformPropName===null){WebShow.CssTransformUtils._checkTransformSupport()}return WebShow.CssTransformUtils._transformPropName},getTransformOriginStyle:function(b){var a=b.style;return(a.transformOrigin||a.MozTransformOrigin||a.WebkitTransformOrigin||a.OTransformOrigin)},setTransformOriginStyle:function(b,a){if(a){Element.setStyle(b,{"transform-origin":a,"-moz-transform-origin":a,"-webkit-transform-origin":a,"-o-transform-origin":a})}},getTransformStyle:function(b){var a=b.style;return(a.transform||a.MozTransform||a.WebkitTransform||a.OTransform)},setTransformStyle:function(c,b,a){if(a){WebShow.CssTransformUtils.setTransformOriginStyle(c,a)}if(b){Element.setStyle(c,{transform:b,"-moz-transform":b,"-webkit-transform":b,"-o-transform":b})}try{c.style.MozTransformOrigin=a;c.style.MozTransform=b}catch(d){}try{targetElem.style.OTransformOrigin=a;targetElem.style.OTransform=b}catch(d){}}};WebShow.DocUtils={getCharset:function(a){if(a.charset){return a.charset}else{if(a.characterSet){return a.characterSet}else{return""}}},getWindow:function(a){return a.defaultView}};WebShow.EventUtils={DEF_NAMESPACE:"webshow:",element:function(b){var a=Event.element(b);if(!a){a=b.currentTarget}return a},getDefCustomEventNamespace:function(){return WebShow.EventUtils.DEF_NAMESPACE},getCustomEventName:function(a){return WebShow.EventUtils.getDefCustomEventNamespace()+a},fireEvent:function(c,b,a){Element.fire(c,event,a)}};WebShow.KeyModifiers={SHIFT:"shift",CTRL:"ctrl",ALT:"alt"};WebShow.KeyUtils={keyCodeToFunctionKey:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"printscreen",45:"insert",46:"delete",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock"},keyCodeToPrintableChar:{48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",188:",",190:".",191:"/",192:"'",219:"[",220:"\\",221:"]",222:'"'},getKeyCode:function(b){var d=b.toLowerCase();var a;if(d.length==1){a=WebShow.KeyUtils.keyCodeToPrintableChar}else{a=WebShow.KeyUtils.keyCodeToFunctionKey}var c;for(c in a){if(a[c]==d){return parseInt(c)}}},getKeyName:function(b){var a=WebShow.KeyUtils.keyCodeToFunctionKey[b];if(!a){a=WebShow.KeyUtils.keyCodeToPrintableChar[b]}return a},isShiftInModifierStr:function(a){return(a.indexOf(WebShow.KeyModifiers.SHIFT)>=0)},isCtrlInModifierStr:function(a){return(a.indexOf(WebShow.KeyModifiers.CTRL)>=0)},isAltInModifierStr:function(a){return(a.indexOf(WebShow.KeyModifiers.ALT)>=0)},createKeyModifierObj:function(d,c,b){var a={shift:c,ctrl:d,alt:b};return a},getKeyModifierObj:function(a){if(!a){return{}}return{shift:WebShow.KeyUtils.isShiftInModifierStr(a),ctrl:WebShow.KeyUtils.isCtrlInModifierStr(a),alt:WebShow.KeyUtils.isAltInModifierStr(a)}},getKeyModifierStr:function(c,b){var a="";if(!b){b=" "}if(!c){c={}}if(c.ctrl){a+=(a==""?"":b)+WebShow.KeyModifiers.CTRL}if(c.shift){a+=(a==""?"":b)+WebShow.KeyModifiers.SHIFT}if(c.alt){a+=(a==""?"":b)+WebShow.KeyModifiers.ALT}return a},getEventKeyModifierStr:function(a){var b=WebShow.KeyUtils.createKeyModifierObj(a.ctrlKey,a.shiftKey,a.altKey);return WebShow.KeyUtils.getKeyModifierStr(b)},isKeyEventMatch:function(c,b,e){var f;if(typeof(b)=="string"){f=WebShow.KeyUtils.getKeyCode(b)}else{f=b}var d;if(typeof(e)=="string"){d=WebShow.KeyUtils.getKeyModifierObj(e)}else{d=e}var a;a=(f==c.keyCode)&&(!(c.shiftKey^d.shift))&&(!(c.ctrlKey^d.ctrl))&&(!(c.altKey^d.alt));return a}};WebShow.EvalUtils={tryEval:function(expr){try{return eval(expr)}catch(e){return expr}}};WebShow.ObjUtils={inspectObjXml:function(e,a,d){var c=WebShow.Xml.newDocument("root");var b=e.saveToXml(c.documentElement,a,d);return WebShow.Xml.serializeNodePretty(b)}};if(this.WebShow===undefined){WebShow={}}WebShow.IePngFixer={PNG_BG_PATTERN:/\.png/i,PNG_IMG_PATTERN:/\.png$/i,fix:function(b,c){var e=c.transparentImgSrc;if(!e){return}var a=c.applyPositioning;if(!b){b=document.documentElement}if(!(b.currentStyle&&b.all)){return}if(window.opera){return}if(window.XMLHttpRequest){return}if(b.currentStyle.backgroundImage.match(WebShow.IePngFixer.PNG_BG_PATTERN)!==null){WebShow.IePngFixer.fixBackground(b,c)}if(b.tagName.toLowerCase()=="img"&&b.src.match(WebShow.IePngFixer.PNG_IMG_PATTERN)!==null){WebShow.IePngFixer.fixImg(b,c)}if(a&&(b.tagName.toLowerCase()=="a"||b.tagName.toLowerCase()=="input")&&b.style.position===""){b.style.position="relative"}var d=b.firstChild;while(d){if(d.nodeType==1){WebShow.IePngFixer.fix(d,c)}d=d.nextSibling}},fixBackground:function(c,a){var e="scale";var b=c.currentStyle.backgroundImage;var d=b.substring(5,b.length-2);if(c.currentStyle.backgroundRepeat=="no-repeat"){e="crop"}c.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+d+"', sizingMethod='"+e+"')";c.style.backgroundImage="url("+a.transparentImgSrc+")"},fixImg:function(b,a){var c=b.src;if(a.fixSize){b.style.width=b.width?b.width+"px":b.currentStyle.width;b.style.height=b.height?b.height+"px":b.currentStyle.height}b.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c+"', sizingMethod='scale')";b.src=a.transparentImgSrc}};WebShow.ScriptLoader={load:function(f,g){var e=document.getElementsByTagName("head")[0];var c=document.createElement("script");var d=false;var b=function(){if(d){return}d=true;if(g){g(f,true)}};var a=function(){if(d){return}try{if((this.readyState=="complete")||(this.readyState=="loaded")){if(g){g(f,true)}d=true}}catch(h){}};c.onload=b;c.onreadystatechange=a;c.setAttribute("src",f);c.setAttribute("type","text/javascript");e.appendChild(c)}};WebShow.FileLoaderType={AUTO:"auto",XHR:"XHR",FRAME:"frame"};WebShow.FileLoader=Class.create({CLASS_NAME:"WebShow.FileLoader",initialize:function(a,b){this._index=WebShow.FileLoader.CurrIndex;WebShow.FileLoader.CurrIndex++;this.rootElement=a;this.ownerDocument=b;if((!b)&&(a)){this.ownerDocument=a.ownerDocument}else{if((!a)&&b){this.rootElement=b.body}}},load:function(b,c,a){},handleLoadOptions:function(a){result=Object.extend({},a);result.resultType=result.resultType||WebShow.FileLoader.ResultType.ELEMENT;result.document=a.document||this.ownerDocument;result.rootElement=a.rootElement||this.rootElement;result.timeout=a.timeOut||this.loadTimeOut;result.extractBody=(a.extractBody!=null)?a.extractBody:true;result.linkAttribToAbs=(a.linkAttribToAbs!=null)?a.linkAttribToAbs:false;return result}});WebShow.FileLoader.CurrIndex=0;WebShow.FileLoader.ResultType={TEXT:1,DOCUMENT:2,ELEMENT:3};WebShow.HtmlExtractor={};WebShow.HtmlExtractor.BodyExtractor={BODY_CONTENT:new RegExp(".*<body(s+[^>]*>|>)((.|\n|\t|\r)*)</body>","gim"),extractBodyText:function(b){var a=WebShow.HtmlExtractor.BodyExtractor.BODY_CONTENT.exec(b);if(a){return a[2]}else{a=WebShow.HtmlExtractor.BodyExtractor.BODY_CONTENT.exec(b);if(a){return a[2]}else{return b}}},extractBodyElem:function(c,a,d){if(!a){doc=c.ownerDocument}else{doc=a}var b=c.getElementsByTagName("body");if(b.length>0){var e=doc.createElement("div");e.innerHTML=b[0].innerHTML;return e}else{return c}}};WebShow.HtmlTextParser={parse:function(c,a,b){if((!a)&&(b)){a=b.ownerDocument}else{if((!a)&&(!b)){a=document}}if(!b){b=a.createElement("div")}var d=WebShow.HtmlExtractor.BodyExtractor.extractBodyText(c);b.innerHTML=d;return b}};WebShow.XHRLoader=Class.create(WebShow.FileLoader,{CLASS_NAME:"WebShow.XHRLoader ",initialize:function($super,a,b){$super(a,b);this.request=null;this.options=null;this.url=null;this.callback=null},load:function($super,d,h,c){var a=this.handleLoadOptions(c);var b=a.rootElement;var g=a.document;request=this.createRequest();if(a.mimeType){if(request.overrideMimeType){request.overrideMimeType(a.mimeType)}}this.request=request;this.url=d;this.callback=h;this.options=a;request.onreadystatechange=this.reactReadyStateChange.bind(this);try{request.open("GET",d,true);request.send(null)}catch(f){if(c.callbackOnException){h(null,false,d)}if(WebShow.reportError){WebShow.reportError(f)}else{throw f}}},createRequest:function(){if(WebShow.XHRLoader.fRequestCreator){return WebShow.XHRLoader.fRequestCreator()}else{for(var c=0,b=WebShow.XHRLoader.fRequestCreators.length;c<b;++c){try{var a=WebShow.XHRLoader.fRequestCreators[c]();if(a!=null){WebShow.XHRLoader.fRequestCreator=WebShow.XHRLoader.fRequestCreators[c];return a}else{continue}}catch(d){continue}}WebShow.XHRLoader.fRequestCreator=WebShow.XHRLoader.fRequestCreatorFailed;return WebShow.XHRLoader.fRequestCreator()}},reactReadyStateChange:function(){var e=this.request;var c=this.url;var h=this.callback;var a=this.options;var b=a.rootElement;var f=a.document;if(e.readyState==4){if((e.status==200)||(e.status==0)||(e.status==304)){if(a.resultType==WebShow.FileLoader.ResultType.TEXT){var g=e.responseText;if(a.extractBody){g=WebShow.HtmlExtractor.BodyExtractor.extractBodyText(g)}if(a.linkAttribToAbs){g=WebShow.HtmlLinkAttribUtil.changeAllLinkAttribsToAbs(g,c)}h(g,true,c)}else{if(a.resultType==WebShow.FileLoader.ResultType.DOCUMENT){if(e.responseXML&&e.responseXML.documentElement){h(e.responseXML,true,c)}else{h(null,false,c)}}else{if(e.responseXML&&e.responseXML.documentElement&&(e.responseXML.documentElement.tagName!="parsererror")){var d;if(a.linkAttribToAbs){WebShow.HtmlLinkAttribUtil.changeAllLinkAttribsToAbs(e.responseXML.documentElement,c)}if(a.extractBody){d=WebShow.HtmlExtractor.BodyExtractor.extractBodyElem(e.responseXML.documentElement,b?b.ownerDocument:null,this.url)}else{d=e.responseXML.documentElement}h(d,true,c)}else{if(e.responseText!=""){var d=WebShow.HtmlTextParser.parse(e.responseText,f,b);if(a.linkAttribToAbs){WebShow.HtmlLinkAttribUtil.changeAllLinkAttribsToAbs(d,c)}h(d,true,c)}else{h(null,false,c)}}}}}else{h(null,false,c)}}}});WebShow.XHRLoader.fRequestCreators=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];WebShow.XHRLoader.fRequestCreatorFailed=function(){throw new Error(WebShow.ErrorStr.errXhrNotSupported)};WebShow.XHRLoader.fRequestCreator=null;WebShow.FrameLoader=Class.create(WebShow.FileLoader,{CLASS_NAME:"WebShow.FrameLoader ",initialize:function($super,a,c,b){$super(a,c);this.frameElem=null;this.loadTimeOut=b||10000},load:function(c,d,b){var a=this.handleLoadOptions(b);this.createIFrame(a);this.loadFrameSrc(c,d,a)},createIFrame:function(b){var a=b.rootElement||this.rootElement;var c=b.document||this.ownerDocument;this.frameElem=c.createElement("iframe");this.frameElem.style.display="none";a.appendChild(this.frameElem)},loadFrameSrc:function(a,m,o){var g=this.frameElem;var n=null;var b=o.rootElement;var h=false;var d=function(p,e){if(h){return}if(n){clearTimeout(n)}h=true;if(e){var r=WebShow.FrameUtils.getFrameDocumentFromElement(p);if(o.linkAttribToAbs){WebShow.HtmlLinkAttribUtil.changeAllLinkAttribsToAbs(r.body?r.body:q,a)}if(o.resultType==WebShow.FileLoader.ResultType.TEXT){if(o.extractBody){m(r.body.innerHTML,true,a)}else{m(r.documentElement.innerHTML,true,a)}}else{if(o.resultType==WebShow.FileLoader.ResultType.DOCUMENT){m(r,true,a)}else{var q=r.documentElement;if(o.extractBody){q=WebShow.HtmlExtractor.BodyExtractor.extractBodyElem(q,b?b.ownerDocument:null)}m(q,true,a)}}}else{m(null,false,a)}k=null;j=null;if(p.parentNode){p.parentNode.removeChild(p)}p=null};var k=function(p){var e=WebShow.EventUtils.element(p);if(e==g){d(e,true)}};var j=function(p){var e=WebShow.EventUtils.element(p);if(e==g){d(e,true)}};var c=function(){d(null,false)};if(this.loadTimeOut){n=setTimeout(c,this.loadTimeOut,null)}else{n=null}Event.observe(this.frameElem,"load",k);if(WS_PAGE_DOM_LOADED){$(this.frameElem).observe(WS_PAGE_DOM_LOADED,j)}try{this.frameElem.src=a}catch(f){WebShow.reportError(f);d(null,false)}}});WebShow.AjaxLoader={floaders:[WebShow.XHRLoader,WebShow.FrameLoader],loaderClass:null,load:function(f,j,d){var c;if((d.method)&&(d.method!=WebShow.FileLoaderType.AUTO)){if(d.method==WebShow.FileLoaderType.XHR){c=WebShow.AjaxLoader.floaders[0]}else{c=WebShow.AjaxLoader.floaders[1]}}else{c=WebShow.AjaxLoader.getLoaderClass(f)}var b=new c();var a=null;try{a=b.load(f,j,d)}catch(g){if((d.method=WebShow.FileLoaderType.AUTO)&&(c==WebShow.AjaxLoader.floaders[0])){var h=Object.extend(d,{method:WebShow.FileLoaderType.FRAME});a=WebShow.AjaxLoader.load(f,j,h)}}return a},getLoaderClass:function(b){if(WebShow.AjaxLoader.loaderClass){return WebShow.AjaxLoader.loaderClass}else{var a;if(WebShow.AjaxLoader._isIE()&&(!WebShow.AjaxLoader._isHttpProtocal(b))){a=WebShow.AjaxLoader.floaders[1]}else{a=WebShow.AjaxLoader.floaders[0]}WebShow.AjaxLoader.loaderClass=a;return a}},_isHttpProtocal:function(a){if(WebShow.URL.isAbsPath(a)){return WebShow.URL.isHttpProtocal(a)}else{var b=document.location;return WebShow.URL.isHttpProtocal(b)}},_isIE:function(){return Prototype.Browser.IE}};WebShow.NameService={existedNames:new WebShow.List(false),addName:function(a){if(!a){return}if(WebShow.NameService.isNameExisted(a)){}else{WebShow.NameService.existedNames.append(a)}},removeName:function(a){if(!a){return}WebShow.NameService.existedNames.remove(a)},isNameExisted:function(a){if(!a){return false}return(WebShow.NameService.existedNames.indexOf(a)>=0)}};WebShow.UniqueName={defPrefix:"Name",nameMaxNumList:$H(),getCurrMax:function(a){var b=this.nameMaxNumList.get(a);if(b){return b}else{return 0}},setCurrMax:function(a,b){this.nameMaxNumList.set(a,b)},getUniqueName:function(b){if((!b)||(b=="")){b=this.defPrefix}var c=this.getCurrMax(b);c++;var a=b+c;while(WebShow.NameService.isNameExisted(a)){c++;var a=b+c}this.setCurrMax(b,c);return a}};WebShow.MetaData=WebShow.createClass(WebShow.Map,{CLASS_NAME:"WebShow.MetaData",initialize:function($super){$super()}});WebShow.Component=WebShow.createClass(WebShow.Object,{CLASS_NAME:"WebShow.Component",initialize:function($super,a,b){$super(b);this.setName(b||WebShow.UniqueName.getUniqueName(this.getDefInstanceName()));this.setOwner(a||null);this.updateVisibility()},initProperties:function($super){$super();this.initPublicProp("owner","WebShow.Component",WebShow.PropertyMode.READWRITE,null);this.initPublicProp("childComponents","WebShow.FlexObjectList",WebShow.PropertyMode.READ,null);this.initPublishedProp("metaData","WebShow.MetaData",WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("visible",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,false)},initPropertyValues:function($super){$super();this.fchildComponents=this.createChildComponents();this.fmetaData=new WebShow.MetaData()},free:function($super){if(this.getChildComponents()){this.getChildComponents().free()}$super()},inspect:function($super){var a=$super();a=a+this.getName()+": {\nChildComponents: [ \n"+this.getChildComponents().inspect()+" ]}";return a},createChildComponents:function(){return(new WebShow.FlexObjectList())},addChild:function(b,a){return this.getChildComponents().add(b,a);if(b.getOwner()!=this){b.setOwner(this)}},appendChild:function(a){return this.addChild(a)},removeChild:function(a){return this.getChildComponents().remove(a);a.setOwner(null)},indexOfChild:function(a){return this.getChildComponents().indexOf(a)},hasChild:function(a){return(this.indexOfChild(a)>=0)},getChildAt:function(a){return this.getChildComponents().itemAt(a)},show:function(){},hide:function(){},updateVisibility:function(){if(this.getVisible()){this.show()}else{this.hide()}},addMeta:function(a,b){return this.getMetaData().add(a,b)},removeMeta:function(a){return this.getMetaData().remove(a)},clearMeta:function(){this.getMetaData().clear()},setOwner:function(b){var a=this.getOwner();if(a&&(a!==b)){a.removeChild(this)}if(b){b.appendChild(this)}this.fowner=b},setName:function(a){if(a!=this.getName()){WebShow.NameService.addName(a);WebShow.NameService.removeName(this.getName());this.fname=a}},getMetaData:function(){return this.fmetaData},setMetaData:function(a){this.fmetaData=a},getVisible:function(){return this.fvisible},setVisible:function(a){if(a){this.show()}else{this.hide()}this.fvisible=a}});WebShow.HtmlPageLoaderMethod={FRAME:"frame",XHR:"XHR"};WebShow.HtmlPageLoader=WebShow.createClass(WebShow.Component,{CLASS_NAME:"WebShow.HtmlPageLoader",initialize:function($super,a,d,b,c){$super();this.initBindMethods();this.setPageUrl(d);this.setParentElement(a);this.setFrameId(b);this.setFrameClassName(c);this._failedRep=null;this._pageRootElement=null;if(d){this.loadPageAsyn(d)}},initProperties:function($super){$super();this.initPublicProp("pageUrl",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("parentElement",WebShow.PropertyType.Object,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("loadMethod",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,WebShow.HtmlPageLoaderMethod.FRAME);this.initPublicProp("frame",WebShow.PropertyType.Object,WebShow.PropertyMode.READ,null);this.initPublicProp("frameId",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("frameClassName",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("checkDomLoadEvent",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true);this.initPublicProp("loadTimeout",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("loadCallback",WebShow.PropertyType.Function,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("isLoaded",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,false);this.initPublicProp("linkAttribToAbs",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true);this.initPublicEvent("onLoad",null);this.initPublicEvent("onDomLoad",null)},initBindMethods:function(){this.reportLoadFailedBinding=this.reportLoadFailed.bind(this)},free:function($super){this.destroyIFrame();this._pageRootElement=null;$super()},loadPageAsyn:function(a,k,c){if(!k){k=this.getLoadTimeout()}if(c){this.setLoadCallback(c)}else{c=this.getLoadCallback()}if(this.getLoadMethod()==WebShow.HtmlPageLoaderMethod.FRAME){this._failedRep=null;if(a){this.fframe=this.createIFrame();if(k){this._failedRep=setTimeout(this.reportLoadFailedBinding,k,null)}else{this._failedRep=true}try{this.fframe.src=a}catch(h){this.reportLoadFailed();WebShow.reportError(h)}return this.getFrame()}else{return this.unloadPage()}}else{if(a){var g=(function(o,n,p){if(n&&o){this._pageRootElement=o;if(this.getParentElement()&&(this.getParentElement()!=o)){if(this.getParentElement().ownerDocument.importNode){this.getParentElement().ownerDocument.importNode(o,true)}try{this.getParentElement().appendChild(o)}catch(q){WebShow.reportError(q)}}c(true)}else{c(false)}}).bind(this);var m=(function(o,e,n){if(e&&o){this._pageRootElement=this.getParentElement();if(this.getParentElement()){this.getParentElement().innerHTML=o}c(true)}else{c(false)}}).bind(this);var j=Prototype.Browser.IE?m:g;var b=Prototype.Browser.IE?WebShow.FileLoader.ResultType.TEXT:WebShow.FileLoader.ResultType.ELEMENT;var f={resultType:b,extractBody:true,document:this.getParentDoc(),rootElement:this.getParentElement(),timeOut:k};f.mimeType="text/xml";var d=WebShow.DocUtils.getCharset(this.getParentDoc());if(d!=""){f.mimeType=f.mimeType+"; charset="+d}f.linkAttribToAbs=Prototype.Browser.IE?this.getLinkAttribToAbs():false;f.method=Prototype.Browser.IE?WebShow.FileLoaderType.FRAME:WebShow.FileLoaderType.AUTO;WebShow.AjaxLoader.load(a,j,f)}else{if(this._pageRootElement){if(this._pageRootElement.parentNode){this._pageRootElement.parentNode.removeChild(this._pageRootElement)}else{this._pageRootElement=null}}}}},reportLoadFailed:function(){var a=this.getLoadCallback();if(this._failedRep){if(a){a(false)}this.evokeEventHandler(this.onLoad,this,false);this._failedRep=null}},unloadPage:function(){this.destroyIFrame();return null},reactIFrameDomLoaded:function(b){var a=WebShow.EventUtils.element(b);if(a==this.getFrame()){if(this._failedRep){clearTimeout(this._failedRep);this.loadPageAsyn.failedRep=null}if(this.getLoadCallback()&&this.getCheckDomLoadEvent()&&(!this.getIsLoaded())){this.setIsLoaded(true);this.getLoadCallback()(true)}this.evokeEventHandler(this.onDomLoad,this,true)}},reactIFrameLoaded:function(b){var a=WebShow.EventUtils.element(b);if(a==this.getFrame()){if(this._failedRep){clearTimeout(this._failedRep);this.loadPageAsyn.failedRep=null}if(this.getLoadCallback()&&(!this.getIsLoaded())){this.setIsLoaded(true);this.getLoadCallback()(true)}this.evokeEventHandler(this.onLoad,this,true)}},createIFrame:function(){var e=null;var d=this.getParentDoc();if(d){if(Prototype.Browser.IE){var b=this.getFrameId()?('id="'+this.getFrameId()+'" name="'+this.getFrameId()+'" '):"";var a=this.getFrameClassName()?('class="'+this.getFrameClassName()+'" '):"";var c="<iframe "+b+a+' allowTransparency="true" frameborder="0">';e=$(d.createElement(c))}else{e=$(d.createElement("iframe"));if(this.getFrameId()){e.setAttribute("id",this.getFrameId());e.setAttribute("name",this.getFrameId())}if(this.getFrameClassName()){e.setAttribute("class",this.getFrameClassName())}e.setAttribute("allowTransparency","true")}}this.fframe=e;if(!this.getVisible()){this.hide()}this.getParentElement().appendChild(this.fframe);$(this.fframe).observe("load",this.reactIFrameLoaded.bindAsEventListener(this));if(WS_PAGE_DOM_LOADED){$(this.fframe).observe(WS_PAGE_DOM_LOADED,this.reactIFrameDomLoaded.bindAsEventListener(this))}return e},destroyIFrame:function(){if(this.getFrame()){var a=this.getFrame().parentNode;if(a){a.removeChild(this.getFrame())}this.fframe=null}},show:function(){if(this.getFrame()){WebShow.ElementUtils.show(this.getFrame())}},hide:function(){if(this.getFrame()){WebShow.ElementUtils.hide(this.getFrame())}},setPageUrl:function(a){if(a!=this.getPageUrl()){this.fpageUrl=a;this.loadPageAsyn(a,this.getLoadTimeout(),this.getLoadCallback())}},setFrameId:function(a){this.fframeId=a;if(this.getFrame()){if(!a){a=""}this.getFrame().setAttribute("id",a);this.getFrame().setAttribute("name",this.getFrameId())}},setFrameClassName:function(a){this.fframeClassName=a;if(this.getFrame()){if(a){this.getFrame().className=a}else{this.getFrame().className=""}}},getLoaded:function(){return(this.getFrame()!=null)},getParentDoc:function(){if(this.getParentElement()){return this.getParentElement().ownerDocument}else{return null}},getFrameDoc:function(){if(this.getFrame()){return WebShow.FrameUtils.getFrameDocumentFromElement(this.getFrame())}else{return null}},getHtmlDoc:function(){if(this.getLoadMethod()==WebShow.HtmlPageLoaderMethod.FRAME){return this.getFrameDoc()}else{var a=this.getHtmlRootElement();return a?a.ownerDocument:null}},getHtmlRootElement:function(){if(this.getLoadMethod()==WebShow.HtmlPageLoaderMethod.FRAME){var a=this.getFrameDoc();return a?a.documentElement:null}else{return this._pageRootElement}}});WebShow.HtmlPageManager=WebShow.createClass(WebShow.Object,{CLASS_NAME:"WebShow.HtmlPageManager",initialize:function($super,a){$super();this.setDefParentElement(a)},initProperties:function($super){$super();this.initPublicProp("defLoadMethod",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,WebShow.HtmlPageLoaderMethod.FRAME);this.initPublicProp("defParentElement",WebShow.PropertyType.Object,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("defFrameClassName",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"");this.initPublicProp("defLoadTimeout",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,100000);this.initPublicProp("checkDomLoadEvent",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true);this.initPublicProp("pageLoaders","WebShow.ObjectList",WebShow.PropertyMode.READ,null);this.initPublicProp("linkAttribToAbs",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true);this.initPublicEvent("onPageLoad",null);this.initPublicEvent("onUrlLoad",null)},initPropertyValues:function($super){$super();this.fpageLoaders=new WebShow.ObjectList(WebShow.HtmlPageLoader,false);this.getPageLoaders().setOwnChildren(true)},free:function($super){this.clearLoaders();$super()},loadFromXml:function($super,a,b){this.clearLoaders();return $super(a,b)},createLoader:function(d,b,e,c){var a=this.getPageLoaders().addObject();a.setLoadTimeout(this.getDefLoadTimeout());a.setCheckDomLoadEvent(this.getCheckDomLoadEvent());a.setLoadMethod(this.getDefLoadMethod());a.setLinkAttribToAbs(this.getLinkAttribToAbs());a.setLoadCallback((function(g,f){this.loadCallback(f,g);if(c){c(f)}}).bind(this,a));a.setParentElement(b);a.setVisible(e);a.setPageUrl(d);return a},clearLoaders:function(){for(var a=this.getPageLoaders().getLength()-1;a>=0;--a){this.getPageLoaders().getItem(a).free()}this.getPageLoaders().clear()},loadCallback:function(b,a){this.evokeEventHandler(this.onPageLoad,a,b);this.evokeEventHandler(this.onUrlLoad,a.getPageUrl(),b)},loadPageAsyn:function(e,d,g,c,f,b){if(!b){b=this.getDefParentElement()}if(!b){throw new Error(WebShow.ErrorStr.errParentElementNotSet);return null}if(!c){c=this.getDefFrameClassName()}if(!e){return null}var a=this.findLoader(e);if(a){if(a.getLoaded()){d(a,true)}else{}}else{a=this.createLoader(e,b,f,d)}if(a){if(g!=null){a.setFrameId(g)}if(c!=null){a.setFrameClassName(c)}return a}else{return null}},loadPage:function(c,e,b,d,a){return this.loadPageAsyn(c,null,e,b,d,a)},unloadPage:function(b){var a=this.findLoader(b);if(a){a.unloadPage();this.getPageLoaders().remove(a)}},setPageVisible:function(b,c){var a=this.findLoader(b);if(a){a.setVisible(c)}},showPage:function(a){this.setPageVisible(a,true)},hidePage:function(a){this.setPageVisible(a,false)},findLoader:function(d){if(!d){return null}for(var c=0,b=this.getPageLoaders().getLength();c<b;++c){var a=this.getPageLoaders().getItem(c);if(a.getPageUrl()==d){return a}}return null},findHtmlDoc:function(b){var a=this.findLoader(b);if(a){return a.getHtmlDoc()}else{return null}},findHtmlRootElement:function(b){var a=this.findLoader(b);if(a){return a.getHtmlRootElement()}else{return null}}});WebShow.SlideDefState={INITIAL:0,CREATING_SLIDES:2,SLIDES_CREATED:3,SLIDES_CREATE_FAILED:6};WebShow.SlideDefConfigType={DEFAULT:"app",APP:"app",EMBEDED:"embeded"};WebShow.SlideDef=WebShow.createClass(WebShow.Object,{CLASS_NAME:"WebShow.SlideDef",initialize:function($super){$super(null);this._isWaitingCreateSlide=false;this._needRecalcLinkAttribs=false},initProperties:function($super){$super();this.initPublishedProp("title",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"");this.initPublishedProp("url",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("configType",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("selector",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("id",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("noteSelector",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("isHidden",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("template",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"");this.initPublishedProp("operationDefs","WebShow.OperationDefCollection",WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("autoLaunchFirstOperation",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("appearOperationDefs","WebShow.OperationDefGroup",WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("disappearOperationDefs","WebShow.OperationDefGroup",WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("prevSlideDisappearOperationDefs","WebShow.OperationDefGroup",WebShow.PropertyMode.READWRITE,null);this.initPublicProp("delayCreateOperations",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true);this.initState("state",WebShow.SlideDefState.INITIAL);this.initPublicEvent("onStateChanged",null)},changeState:function(b){var a=this.getStateValue("state");this.setStateValue("state",b);this.evokeEventHandler(this.onStateChanged,this,a,b)},appendAppearOperationDef:function(a){if(!this.getAppearOperationDefs()){this.setAppearOperationDefs(new WebShow.OperationDefGroup())}this.getAppearOperationDefs().append(a)},appendDisappearOperationDef:function(a){if(!this.getDisappearOperationDefs()){this.setDisappearOperationDefs(new WebShow.OperationDefGroup())}this.getDisappearOperationDefs().append(a)},appendPrevSlideDisappearOperationDef:function(a){if(!this.getPrevSlideDisappearOperationDefs()){this.setPrevSlideDisappearOperationDefs(new WebShow.OperationDefGroup())}this.getPrevSlideDisappearOperationDefs().append(a)},hasPrevSlideDisappearOperationDefs:function(){return(this.fprevSlideDisappearOperationDefs&&this.fprevSlideDisappearOperationDefs.getLength()>0)},createOperationDefCollection:function(a){if(!this.getOperationDefs()){this.setOperationDefs(new WebShow.OperationDefCollection(a))}return this.getOperationDefs()},appendOperationDef:function(a){if(!this.getOperationDefs()){this.createOperationDefCollection()}this.getOperationDefs().append(a)},getOperationDefCount:function(){if(this.getOperationDefs()){return this.getOperationDefs().getLength()}else{return 0}},matchElement:function(a){if(a){if(this.getId()&&(a.id==this.getId())){return true}else{if(this.getSelector()&&Element.match(a,this.getSelector())){return true}else{return false}}}else{return false}},createSlides:function(d){var a;this.changeState(WebShow.SlideDefState.CREATING_SLIDES);this._needRecalcLinkAttribs=false;if(this.getApp().isInEmbedMode()&&(this.getActualUrl()!="")){this._needRecalcLinkAttribs=(this.getActualUrl()!=document.location)}var c;if(this.getApp().isInSimplePageMode()){a=document.body}else{a=this.getHtmlPageManager().findHtmlRootElement(this.getActualUrl())}if(a){try{if(this.getId()){this.createSlideFromId(this.getApp(),a,this.getId(),d)}else{this.createSlidesFromSelector(this.getApp(),a,this.getSelector(),d)}this._isWaitingCreateSlide=false;this.changeState(WebShow.SlideDefState.SLIDES_CREATED)}catch(b){alert(b);WebShow.reportError(b);this.changeState(WebShow.SlideDefState.SLIDES_CREATE_FAILED)}}},createSlideFromId:function(d,a,e,c){var b=a.ownerDocument.getElementById(e);if(b){this.createSlideOnElement(b,d,this.getName()||e,c)}},createSlidesFromSelector:function(d,c,f,j){var a;if(!f){a=[c]}else{a=Element.select(c,f)}for(var g=0,e=a.length;g<e;++g){var h=a[g];var b=h.id;if(h){this.createSlideOnElement(h,d,b||WebShow.UniqueName.getUniqueName(this.getName()),j)}}},createSlideOnElement:function(e,b,h,k,g){var d=this;if(this.getConfigType()==WebShow.SlideDefConfigType.EMBEDED){d=new WebShow.SlideDef();this.initPublishedProp("operationDefs","WebShow.OperationDefCollection",WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("appearOperationDefs","WebShow.OperationDefGroup",WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("disappearOperationDefs","WebShow.OperationDefGroup",WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("prevSlideDisappearOperationDefs","WebShow.OperationDefGroup",WebShow.PropertyMode.READWRITE,null);this.assignTo(d,true);var a=this.findEmbededSlideDefElement(e);if(a){d.loadFromXml(a)}d.setConfigType(WebShow.SlideDefConfigType.DEFAULT);d._container=this._container;d._index=this._index}if(!h){h=e.id||WebShow.UniqueName.getUniqueName(this.getName())}if((g===null)||(g===undefined)){g=d._index}var f=b.createSlide(e,h,d.getTitle(),g,d);f.setSrcUrl(this.getActualUrl());f.setNeedRecalcLinkAttribs(this._needRecalcLinkAttribs);f.setAutoLaunchFirstOperation(this.getAutoLaunchFirstOperation());if(this.getNoteSelector()){var c=Element.select(e,this.getNoteSelector());var j=(c.length>0)?c[0]:null;if(j){f.setNoteElement(j)}}if(this.getIsHidden()){f.setIsHidden(this.getIsHidden())}if(!this.getDelayCreateOperations()){d.createSlideOperations(f);f.installCommands()}if(k){k(f)}},findEmbededSlideDefElement:function(d){var b=$A(d.getElementsByTagName(WebShow.SlideDef.EMBEDED_ELEMENT_TAG)).last();if(!b){var a=$A(d.getElementsByTagName(WebShow.XML_ISLAND_TAG));for(var c=a.length-1;c>=0;--c){b=this.findEmbededSlideDefElement(a[c]);if(b){return b}}}return b},createSlideShowHideOperations:function(a){var c=a.getElement();var b=this.getAppearOperationDefs();if(!b){b=(this.getApp()?this.getApp().getSlideDefTemplateAppearOperationDefs(this.getTemplate()):null)}if(c&&b){b.createOperations(c,a.getAppearOperations(),this.getObjRepository())}var b=this.getDisappearOperationDefs();if(!b){b=(this.getApp()?this.getApp().getSlideDefTemplateDisappearOperationDefs(this.getTemplate()):null)}if(c&&b){b.createOperations(c,a.getDisappearOperations(),this.getObjRepository())}var b=this.getPrevSlideDisappearOperationDefs();if(!b){b=(this.getApp()?this.getApp().getSlideDefTemplatePrevSlideDisappearOperationDefs(this.getTemplate()):null)}if(b){a.setPrevSlideDisappearOperationDefs(b)}},createSlidePredefinedOperations:function(a){var c=a.getElement();var b=this.getOperationDefs();if(!b){b=(this.getApp()?this.getApp().getSlideDefTemplateOperationDefs(this.getTemplate()):null)}if(c&&b){b.createOperations(c,a.getOperations(),this.getObjRepository())}},createSlideOperations:function(a){if(a){this.createSlidePredefinedOperations(a);this.createSlideShowHideOperations(a);a.setIsOperationCreated(true);a.prepare()}},setSelector:function(a){if(this.getSelector()!=a){this.fselector=a;if(a){this.setId(null)}}},setId:function(a){if(this.getId()!=a){this.fid=a;if(a){this.setSelector(null)}}},getContainer:function(){return this._container},getApp:function(){if(this.getContainer()){return this.getContainer().getApp()}else{return null}},getObjRepository:function(){if(this.getApp()){return this.getApp().getRepository()}else{return null}},getHtmlPageManager:function(){if(this.getContainer()){return this.getContainer().getHtmlPageManager()}else{return null}},getActualUrl:function(){var a=this.getUrl();var b=null;if(this.getContainer()){if(this.getContainer().getActualBaseUri){b=this.getContainer().getActualBaseUri()}}return WebShow.URL.mergePath(a,b)},getSlideClass:function(){if(this.getContainer()&&(this.getContainer().getFrameClass)){return this.getContainer().getFrameClass()}else{return null}},getSlideFrameClass:function(){if(this.getContainer()&&(this.getContainer().getDefSlideClass)){return this.getContainer().getDefSlideClass()}else{return null}}});WebShow.SlideDef.EMBEDED_ELEMENT_TAG=WebShow.EMBEDDED_ELEMENT_PREFIX+"slideDef";WebShow.SlideDefImplementType={SELECT:"select",ITERATE:"iterate",DEFAULT:"select"};WebShow.SlideDefList=WebShow.createClass(WebShow.ObjectList,{CLASS_NAME:"WebShow.SlideDefList",initialize:function($super,a){$super(WebShow.SlideDef,false);this.setApp(a)},initProperties:function($super){$super();this.initPublicProp("implicitBaseUri",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"");this.initPublishedProp("baseUri",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"");this.initPublishedProp("loadTimeout",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,10000);this.initPublishedProp("frameClass",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("defSlideClass",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("cncrSlideHtmlLoadCount",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,2);this.initPublishedProp("autoHandleEmbededSlideLinks",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true);this.initPublishedProp("ensureSlideReadyRange",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("implementType",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("stubElemClass",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"WebShow_LoadStubs");this.initPublicProp("app","WebShow.App",WebShow.PropertyMode.READWRITE,null)},free:function($super){$super()},createSlideDef:function(c,e,b,a,f){var d=new WebShow.SlideDef(this.getApp());d.setUrl(b);d.setName(c);d.setTitle(e);d.setSelector(a);d.setId(f);this.append(d);return d},setAllSlideDefState:function(d){for(var b=0,a=this.getLength();b<a;++b){var c=this.getSlideDef(b);if(c){c.changeState(d)}}},loadHtmlContentAsyn:function(b,c,a){if(this.getApp()){var e=document.URL;if(!b){b=e}if(this.getApp().isInSimplePageMode()){if(c){c(true,e)}}else{var d=this.getHtmlPageManager();d.loadPageAsyn(b,(function(g,f){if(c){c(f,g)}}).bind(this,b),null,this.getFrameClass(),false,a)}}else{throw new Error(WebShow.ErrorStr.errLoadingHtmlContentWhenAppIsNull)}},implementSlideDefsAsyn:function(h,f){this.setAllSlideDefState(WebShow.SlideDefState.INITIAL);this.getHtmlPageManager().setDefLoadTimeout(this.getLoadTimeout());this.getHtmlPageManager().setLinkAttribToAbs(this.getAutoHandleEmbededSlideLinks());var e=[];var c=this.loadHtmlContentAsyn.bind(this);var a=0;var m=this.getLength();var k=function(o,p,n){this.implementSlideDefsOfUri(o,h,f,n,p);a++;if(a<m){g(a)}};var j=function(q){var r=this.getSlideDef(q);var p=r.getActualUrl();if(e.indexOf(p)<0){var t=e.length;e.push(p);var n=this.getHtmlPageManager().getDefParentElement();var s=n.ownerDocument;var o=s.createElement("span");o.className=this.getStubElemClass();n.appendChild(o);c(p,k.bind(this,p,t),o)}else{a++;if(a<m){g(a)}}};var g=j.bind(this);if(m>0){var b=this.getCncrSlideHtmlLoadCount();if(b<=0){b=this.getLength()}for(var d=0;(d<b)&&(d<m);++d){g(d)}}},implementSlideDefsOfUri:function(d,m,k,j,f){var g=[];for(var h=0,e=this.getLength();h<e;++h){var b=this.getSlideDef(h);var a=b.getActualUrl();if(a==d){g.push(b)}}if(!j){for(var h=0,e=g.length;h<e;++h){g[h].changeState(WebShow.SlideDefState.SLIDES_CREATE_FAILED);WebShow.reportError(new Error(WebShow.ErrorStr.errLoadingSlideOfUrlFailed+d))}}else{if(this.getImplementType()==WebShow.SlideDefImplementType.ITERATE){var c=this.getApp().isInSimplePageMode()?document.body:this.getHtmlPageManager().findHtmlRootElement(d);this.iterateSlideDefOnElem(c,g,m,f);for(var h=0,e=g.length;h<e;++h){g[h].changeState(WebShow.SlideDefState.SLIDES_CREATED)}}else{for(var h=0,e=g.length;h<e;++h){var b=g[h];if(b.getState()<WebShow.SlideDefState.CREATING_SLIDES){b.createSlides(m)}}}}if(this.isAllSlideDefImplemented()){k(this.getDefImplementRatio())}},iterateSlideDefOnElem:function(d,q,p,n){if(!d){return}var a=[];var f=d.firstChild;while(f){if(f.nodeType==Node.ELEMENT_NODE){a.push(f)}f=f.nextSibling}for(var o=0,g=a.length;o<g;o++){var e=a[o];var c=false;for(var m=0,h=q.length;(m<h)&&(!c);++m){c=false;var b=q[m];if(b.matchElement(e)){b.createSlideOnElement(e,b.getApp(),null,p,n);c=true}}if(!c){this.iterateSlideDefOnElem(e,q,p,n)}}},isAllSlideDefImplemented:function(){for(var b=0,a=this.getLength();b<a;++b){var c=this.getSlideDef(b);if(c.getState()<WebShow.SlideDefState.SLIDES_CREATED){return false}}return true},getDefImplementRatio:function(){var d=0;var a=0;for(var c=0,b=this.getLength();c<b;++c){var e=this.getSlideDef(c);if(e.getState()==WebShow.SlideDefState.SLIDES_CREATED){++d}else{++a}}return d/(d+a)},getHtmlPageManager:function(){if(this.getApp()){return this.getApp().getHtmlPageManager()}},getActualBaseUri:function(){if(!this.getBaseUri()){return this.getImplicitBaseUri()}else{return WebShow.URL.relPathToAbs(this.getBaseUri(),this.getImplicitBaseUri())}},getSlideDef:function(a){return this.getItem(a)}});WebShow.SlideDefTemplate=WebShow.createClass(WebShow.SlideDef,{CLASS_NAME:"WebShow.Slide",initialize:function($super){$super()}});WebShow.SlideDefTemplateList=WebShow.createClass(WebShow.ObjectList,{CLASS_NAME:"WebShow.SlideDefTemplateList",initialize:function($super,a){$super(WebShow.SlideDefTemplate,false);this.setApp(a)},initProperties:function($super){$super();this.initPublicProp("app","WebShow.App",WebShow.PropertyMode.READWRITE,null)},getSlideDefTemplateByName:function(b){var d=null;for(var c=0,a=this.getLength();c<a;++c){d=this.getItem(c);if(d.getName()==b){return d}}return null},createSlideDefTemplate:function(a){var b=new WebShow.SlideDef();b.setName(a);this.append(b);return b}});WebShow.SlideState={CREATED:1,SHOWING:2,ACTIVE:3,HIDING:4,HIDDEN:5,OPERATION_EXECUTING:10,OPERATION_REVERSED:11,OPERATION_FINISH:12};WebShow.Slide=WebShow.createClass(WebShow.Component,{CLASS_NAME:"WebShow.Slide",initialize:function($super,b,d,c,f,a,e){$super(b,c);this.initBindMethods();this.setTitle(f||"");this.setElement(d||null);this.setDefinerOrder(0||a);this.setDefiner(e);this._beforeShowHideCounter=0;this._afterShowHideCounter=0;this._isExecutingSlideOperation=false},initProperties:function($super){$super();this.initPublicProp("title",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("element",WebShow.PropertyType.Object,WebShow.PropertyMode.READWRITE|WebShow.PropertyMode.UNPERSISTENTABLE,null);this.initPublicProp("isHidden",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("noteElement",WebShow.PropertyType.Object,WebShow.PropertyMode.READWRITE|WebShow.PropertyMode.UNPERSISTENTABLE,null);this.initPublicProp("definerOrder",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,0);this.initPublicProp("definer","WebShow.PropertyType.SlideDef",WebShow.PropertyMode.READWRITE,null);this.initPublicProp("srcUrl",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"");this.initPublicProp("needRecalcLinkAttribs",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,false);this.initPublicProp("isOperationCreated",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("isPrepared",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("operations","WebShow.OperationSequence",WebShow.PropertyMode.READ,null);this.initPublicProp("currOperation","WebShow.Operation",WebShow.PropertyMode.READ,null);this.initPublicProp("currCustomOperation","WebShow.Operation",WebShow.PropertyMode.READ,null);this.initPublicProp("autoLaunchFirstOperation",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,false);this.initPublicProp("appearOperations","WebShow.OperationGroup",WebShow.PropertyMode.READ,null);this.initPublicProp("disappearOperations","WebShow.OperationGroup",WebShow.PropertyMode.READ,null);this.initPublicProp("prevSlideDisappearOperationDefs","WebShow.OperationGroup",WebShow.PropertyMode.READWRITE,null);this.initPublicProp("ensureShowHide",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true);this.initState("state",WebShow.SlideState.CREATED);this.initPublicEvent("onStateChanged",null);this.initPublicEvent("onShowing",null);this.initPublicEvent("onShown",null);this.initPublicEvent("onHiding",null);this.initPublicEvent("onHidden",null);this.initPublicEvent("onInternalShowing",null);this.initPublicEvent("onInternalShown",null);this.initPublicEvent("onInternalHiding",null);this.initPublicEvent("onInternalHidden",null);this.initPublicEvent("onOperationExecuting",null);this.initPublicEvent("onOperationFinish",null);this.initPublicEvent("onOperationReversed",null);this.initPublicEvent("onInternalOperationExecuting",null);this.initPublicEvent("onInternalOperationFinish",null);this.initPublicEvent("onInternalOperationReversed",null)},initPropertyValues:function($super){$super()},initBindMethods:function(){this.reactCustomOperationExecutingBinding=this.reactCustomOperationExecuting.bind(this);this.reactCustomOperationFinishBinding=this.reactCustomOperationFinish.bind(this);this.reactCustomOperationReversedBinding=this.reactCustomOperationReversed.bind(this);this.reactOnShowFinishBinding=this.reactOnShowFinish.bind(this);this.reactOnHideFinishBinding=this.reactOnHideFinish.bind(this)},inspect:function($super){var a=this.getName()+": {\n  title: "+this.getTitle()+"\n  element: "+this.getElement()+"}\n";return a},changeState:function(b){var a=this.getStateValue("state");this.setStateValue("state",b);this.evokeEventHandler(this.onStateChanged,this,a,b)},isExecutingOperation:function(){return(this.getState()==WebShow.SlideState.OPERATION_EXECUTING)||this._isExecutingSlideOperation},ensureSlideReady:function(){if(this.getAutoHandleEmbededSlideLinks()){this.recalcSlideContentLinks()}this.ensureOperationCreated();this.ensureOperationPrepared();this.fixIePng()},ensureOperationCreated:function(){if(!this.getIsOperationCreated()){if(this.getDefiner()){this.getDefiner().createSlideOperations(this)}}},ensureOperationPrepared:function(){if(!this.getIsPrepared()){this.prepare()}},recalcSlideContentLinks:function(){if(this.getNeedRecalcLinkAttribs()){var c=this.getElement().ownerDocument.location;var b=WebShow.URL.relPathToAbs(this.getSrcUrl(),c);var a=function(e){var d=WebShow.URL.relPathToAbs(e,b);return d};WebShow.HtmlLinkAttribUtil.iterate(this.getElement(),a);a=null}this.setNeedRecalcLinkAttribs(false)},getAutoHandleEmbededSlideLinks:function(){if(this.getApp()){return this.getApp().getAutoHandleEmbededSlideLinks()}else{return false}},fixIePng:function(){if(this.getIePngFix()){var a={transparentImgSrc:this.getIePngFixTransImgAbsSrc()};WebShow.IePngFixer.fix(this.getElement(),a)}},quietShow:function(){if(this.getElement()){this.beforeShow();this.ensureSlideReady();WebShow.ElementUtils.show(this.getElement());this.changeState(WebShow.SlideState.ACTIVE)}},quietHide:function(){if(this.getElement()){this.beforeHide();WebShow.ElementUtils.hide(this.getElement(),"visibility");this.changeState(WebShow.SlideState.HIDDEN)}},simpleShow:function(){if(this.getElement()){this.quietShow();this.afterShow()}},simpleHide:function(){if(this.getElement()){this.quietHide();this.afterHide()}},show:function(){if(this.getApp()){this.getApp().setCurrSlide(this)}else{if(this.getElement()){this.ensureSlideReady();if(this.getAppearOperations()){this.beforeShow();this.getAppearOperations().setElement(this.getElement());this.getAppearOperations().forceExecute()}else{this.simpleShow()}}}},hide:function(){if(this.getApp()){if(this.getApp().getCurrSlide()==this){this.getApp().setCurrSlide(null)}}else{if(this.getElement()){if(this.getDisappearOperations()){this.beforeHide();this.getDisappearOperations().setElement(this.getElement());this.getDisappearOperations().forceExecute()}else{this.beforeHide();this.simpleHide();this.afterHide()}}}},beforeShow:function(){if(this._beforeShowHideCounter>0){return}this._beforeShowHideCounter++;this.fvisible=true;this.changeState(WebShow.SlideState.SHOWING);this.evokeEventHandler(this.onInternalShowing,this);this.evokeEventHandler(this.onShowing,this)},afterShow:function(){if(this._afterShowHideCounter>0){return}this._afterShowHideCounter++;this.fvisible=true;this.changeState(WebShow.SlideState.ACTIVE);this.evokeEventHandler(this.onInternalShown,this);this.evokeEventHandler(this.onShown,this);if(this.getAutoLaunchFirstOperation()){if(this.getApp()&&(!this.getApp().isAutoPlaying())){if(this.getOperations().first()&&(!this.getOperations().first().isFinished())){this.nextStep(this.getOperationInstantly())}}}},beforeHide:function(){if(this._beforeShowHideCounter<=0){return}this._beforeShowHideCounter--;this.fvisible=false;this.changeState(WebShow.SlideState.HIDING);this.evokeEventHandler(this.onInternalHiding,this);this.evokeEventHandler(this.onHiding,this)},afterHide:function(){if(this._afterShowHideCounter<=0){return}this._afterShowHideCounter--;this.fvisible=false;this.changeState(WebShow.SlideState.HIDDEN);this.evokeEventHandler(this.onInternalHidden,this);this.evokeEventHandler(this.onHidden,this)},isShowing:function(){return this.getState()==WebShow.SlideState.SHOWING},isHiding:function(){return this.getState()==WebShow.SlideState.HIDING},isActive:function(){return this.getState()==WebShow.SlideState.ACTIVE},reactOnShowFinish:function(a){if(this.getEnsureShowHide()){this.simpleShow()}this.afterShow()},reactOnHideFinish:function(a){if(this.getEnsureShowHide()){this.simpleHide()}this.afterHide()},reactChildOperationExecuting:function(b,a){this.changeState(WebShow.SlideState.OPERATION_EXECUTING);this._isExecutingSlideOperation=true;this.evokeEventHandler(this.onInternalOperationExecuting,this,a);this.evokeEventHandler(this.onOperationExecuting,this,a)},reactChildOperationFinish:function(b,a){this._isExecutingSlideOperation=false;this.changeState(WebShow.SlideState.OPERATION_FINISH);this.evokeEventHandler(this.onInternalOperationFinish,this,a);this.evokeEventHandler(this.onOperationFinish,this,a)},reactChildOperationReversed:function(b,a){this._isExecutingSlideOperation=false;this.changeState(WebShow.SlideState.OPERATION_REVERSED);this.evokeEventHandler(this.onInternalOperationReversed,this,a);this.evokeEventHandler(this.onOperationReversed,this,a)},reactCustomOperationExecuting:function(a){this.fcurrCustomOperation=a;this.reactChildOperationExecuting(this,a)},reactCustomOperationFinish:function(a){this.fcurrCustomOperation=null;this.reactChildOperationFinish(this,a);this.uninstallCustomOperationEventHandler(a)},reactCustomOperationReversed:function(a){this.fcurrCustomOperation=null;this.reactChildOperationReversed(this,a);this.uninstallCustomOperationEventHandler(a)},prepare:function(a){if(a&&this.getDisappearOperations()){this.getDisappearOperations().prepare()}if(this.getOperations()){this.getOperations().forcePrepare()}if(a&&this.getAppearOperations()){this.getAppearOperations().prepare()}if(this.getApp()){this.installCommands()}this.setIsPrepared(true)},resetPrepareState:function(){this.setIsPrepared(false)},installCommands:function(){if(this.getApp()){var a=this.getApp().getCommands();if(a){var b=this.getElement();a.implementEmbededCommandAttribs(b);if(b.ownerDocument!=this.getApp().getAppDoc()){a.installShortCutsOnElement(b.ownerDocument.documentElement)}}}},getCurrOperation:function(){if(this.getOperations()){return this.getOperations().getCurrOperation()}else{return null}},setCurrOperation:function(a){if(this.getOperations()){this.getOperations().setCurrOperation(a)}},execNextOperation:function(){if(this.getOperations()){this.getOperations().executeNext()}},reverseCurrOperation:function(){if(this.getOperations()){this.getOperations().reverseCurr()}},setCurrOperationToPrev:function(){if(this.getOperations()){this.getOperations().setCurrOperationToPrev()}},instantExecuteNextOperation:function(){if(this.getOperations()){this.getOperations().instantExecuteNext()}},stopCurrOperation:function(){if(this.getOperations()){this.getOperations().stopCurr()}},cancelCurrOperation:function(){if(this.getOperations()){this.getOperations().cancelCurr()}},nextStep:function(a){if(this.getOperations()){this.getOperations().nextStep(a)}},prevStep:function(a){if(this.getOperations()){this.getOperations().prevStep(a)}},hasNextStep:function(){if(this.getOperations()){return this.getOperations().hasNextStep()}},hasPrevStep:function(){if(this.getOperations()){return this.getOperations().hasPrevStep()}},getOperationInstantly:function(){if(this.getApp()){return this.getApp().getOperationInstantly()}else{return null}},execCustomOperation:function(a,b){this.fcurrCustomOperation=a;this.installCustomOperationEventHandler(a);if(!b){a.execute()}else{a.executeInstantly()}},installCustomOperationEventHandler:function(a){a.onInternalExecuting=this.reactCustomOperationExecutingBinding;a.onInternalFinish=this.reactCustomOperationFinishBinding;a.onInternalReversed=this.reactCustomOperationReversedBinding},uninstallCustomOperationEventHandler:function(a){a.onInternalExecuting=null;a.onInternalFinish=null;a.onInternalReversed=null},containAppearTransition:function(){return(this.getAppearOperations()&&this.getAppearOperations().containTransition())},containDisappearTransition:function(){return(this.getDisappearOperations()&&this.getDisappearOperations().containTransition())},getElementRelatedValue:function(a,b){return WebShow.ElementUtils.getElementRelatedValue(a,b)},getApp:function(){return this.getOwner()},getName:function(){return this.getElementRelatedValue(this.felement,this.fname)},getTitle:function(){return this.getElementRelatedValue(this.felement,this.ftitle)},getZIndex:function(){if(this.getElement()){return $(this.getElement()).getStyle("z-index")}else{return null}},setZIndex:function(a){if(this.getElement()){return $(this.getElement()).setStyle({zIndex:a})}},getDocument:function(){if(this.getElement()){return this.getElement().ownerDocument}else{return null}},getOperations:function(){if(!this.foperations){this.foperations=new WebShow.OperationSequence();this.foperations._owner=this;this.foperations.onInternalChildOperationExecuting=this.reactChildOperationExecuting.bind(this);this.foperations.onInternalChildOperationFinish=this.reactChildOperationFinish.bind(this);this.foperations.onInternalChildOperationReversed=this.reactChildOperationReversed.bind(this)}return this.foperations},getAppearOperations:function(){if(!this.fappearOperations){this.fappearOperations=new WebShow.OperationGroup(null,WebShow.OperationGroupMode.PARALLEL);this.fappearOperations.onInternalFinish=this.reactOnShowFinishBinding}return this.fappearOperations},getDisappearOperations:function(){if(!this.fdisappearOperations){this.fdisappearOperations=new WebShow.OperationGroup(null,WebShow.OperationGroupMode.PARALLEL);this.fdisappearOperations.onInternalFinish=this.reactOnHideFinishBinding}return this.fdisappearOperations},hasPrevSlideDisappearOperationDefs:function(){return(this.fprevSlideDisappearOperationDefs&&this.fprevSlideDisappearOperationDefs.getLength()>0)},getIePngFix:function(){var a=this.getApp();return a?a.getIePngFix():false},getIePngFixTransImgAbsSrc:function(){var a=this.getApp();return a?a.getIePngFixTransImgAbsSrc():""}});WebShow.SlideList=WebShow.createClass(WebShow.FlexObjectList,{CLASS_NAME:"WebShow.SlideList",initialize:function($super,a){$super(null,a||false)},findSlideByName:function(a){return this.findItemByProp("name",a)}});WebShow.Xml={DEF_INCLUDE_TAG_NAME:"include",DEF_INCLUDE_SRC_ATTRIB:"src",DEF_LOAD_TIMEOUT:10000,DEF_BYPASS_ROOT_ELEM:true,DEF_SERIALIZE_TO_JSCODE_VARNAME:"__webshow_xmlStr",FILE_EXT_XML:".xml",FILE_EXT_XML_JS_WRAPPER:".xmljs",newDocument:function(b,a){if(!b){b=""}if(!a){a=""}if(document.implementation&&document.implementation.createDocument){var f=document.implementation.createDocument(a,b,null);if(f.load){return f}else{f=new XMLHttpRequest();return f}}else{var f=new ActiveXObject("MSXML2.DOMDocument");if(b){var d="";var c=b;var e=b.indexOf(":");if(e!=-1){d=b.substring(0,e);c=b.substring(e+1)}if(a){if(!d){d="a0"}}else{d=""}var g="<"+(d?(d+":"):"")+c+(a?(" xmlns:"+d+'="'+a+'"'):"")+"/>";f.loadXML(g)}return f}},parse:function(d){if(typeof DOMParser!="undefined"){return(new DOMParser()).parseFromString(d,"application/xml")}else{if(typeof ActiveXObject!="undefined"){var c=WebShow.Xml.newDocument();c.loadXML(d);return c}else{var a="data:text/xml;charset=utf-8,"+encodeURIComponent(d);var b=new XMLHttpRequest();b.open("GET",a,false);b.send(null);return b.responseXML}}},load:function(b,d,a){var c=WebShow.URL.getFileExt(b);if(c.toLowerCase()==WebShow.Xml.FILE_EXT_XML_JS_WRAPPER){return WebShow.Xml.loadHelper.loadJsWrapper(b,d,a)}if(!a){a={disableInclude:false}}if(!a.disableInclude){return WebShow.Xml.loadHelper.loadAndHandleIncludeElement(b,d,a)}else{return WebShow.Xml.loadHelper.loadSimple(b,d,a.timeout)}},loadHelper:{loadSimple:function(a,h,f){var b=(h!=null);if((f===null)||(f===undefined)){f=WebShow.Xml.DEF_LOAD_TIMEOUT}if(!(document.implementation&&document.implementation.createDocument)){return WebShow.Xml.loadHelper.loadSimpleViaDoc(a,h)}else{var d=new XMLHttpRequest();var j=null;if(f){j=setTimeout(function(){k(null,false)},f)}var k=function(m,e){if(j){clearTimeout(j)}if(h){h(m,e)}};if(b){d.onreadystatechange=function(){if(d.readyState==4){var e=d.responseXML;if(e&&e.documentElement){k(e,true)}else{k(null,false)}}}}try{d.open("get",a,b);d.send(null)}catch(c){WebShow.reportError(c);k(null,false)}var g=d.responseXML;if(g&&g.documentElement){return g}else{return null}}},loadSimpleViaDoc:function(c,e){var b="dummy_dummy_dummy_dummy";var d=(e!=null);var a=WebShow.Xml.newDocument(b);a.async=d;if(d){a.onreadystatechange=function(){if(a.readyState==4){if((!a.documentElement)||(a.documentElement.tag==b)){e(a,false)}else{e(a,true)}}}}a.load(c);return a},loadAndHandleIncludeElement:function(c,f,b){var e;if(b){e=b.timeout}else{e=null}var d=(f==null);if(d){var a=WebShow.Xml.loadHelper.loadSimple(c,null,e);if(a&&a.documentElement){WebShow.Xml.loadHelper.handleIncludedXmlInElement(a.documentElement,null,b);return a}else{return null}}else{return WebShow.Xml.loadHelper.loadSimple(c,function(h,g){if(!g){f(h,false)}else{WebShow.Xml.loadHelper.handleIncludedXmlInElement(h.documentElement,function(j){f(h,true)},b)}},e)}},loadJsWrapper:function(url,callback,options){options=options||{};var wrapperVarName=options.wrapperVarName||WebShow.Xml.DEF_SERIALIZE_TO_JSCODE_VARNAME;var loadTimeout=options.timeout;if((loadTimeout===null)||(loadTimeout===undefined)){loadTimeout=WebShow.Xml.DEF_LOAD_TIMEOUT}var runCallBack=function(xmldoc,isSuccess){if(timeoutHandle){clearTimeout(timeoutHandle)}if(callback){callback(xmldoc,isSuccess)}};var wrapperCallback=function(src,isSuccess){if(timeoutHandle){clearTimeout(timeoutHandle)}if(isSuccess){var xmlContent=eval(wrapperVarName);var doc=WebShow.Xml.parse(xmlContent);runCallBack(doc,true)}else{runCallBack(null,false)}};var timeoutHandle=null;if(loadTimeout){timeoutHandle=setTimeout(function(){runCallBack(null,false)},loadTimeout)}WebShow.ScriptLoader.load(url,wrapperCallback)},getIncludeElements:function(b,c){var a=[];if(!c){c=WebShow.Xml.DEF_INCLUDE_TAG_NAME}return b.getElementsByTagName(c)},handleIncludedXmlInElement:function(b,o,q){if(!q){q={}}var j=q.includeTagName||WebShow.Xml.DEF_INCLUDE_TAG_NAME;var p=q.srcAttribName||WebShow.Xml.DEF_INCLUDE_SRC_ATTRIB;var a=(q.bypassRootElem!=null)?q.bypassRootElem:WebShow.Xml.DEF_BYPASS_ROOT_ELEM;var k=(o==null);var n=WebShow.Xml.getXmlDocUrl(b.ownerDocument);var h=WebShow.Xml.loadHelper.getIncludeElements(b,j);if(!p){var d=null}var e=null;var m=0;var c=h.length;if(c<=0){if(o){o(0)}return null}var f;for(var g=h.length-1;g>=0;--g){e=h[g];d=e.getAttribute(p);if(d){d=WebShow.URL.mergePath(d,n);if(k){f=WebShow.Xml.loadHelper.loadSimple(d);if(f){WebShow.Xml.loadHelper.insertIncludedSection(f,e,a)}}else{WebShow.Xml.loadHelper.loadSimple(d,(function(t,s,r){if(r&&s){f=s;WebShow.Xml.loadHelper.insertIncludedSection(f,t,a)}m++;if(m==c){o(m)}}).bind(this,e))}}}return b},insertIncludedSection:function(j,h,a){var c=[];if(a){var d=j.documentElement.firstChild;while(d){if(d.nodeType==Node.ELEMENT_NODE){c.push(d)}d=d.nextSibling}}else{c.push(j.documentElement)}var f;var b=h.ownerDocument;var e=b.documentElement;for(var k=0,g=c.length;k<g;++k){var f=c[k];if(b.importNode){f=b.importNode(f,true)}h.parentNode.insertBefore(f,h)}h.parentNode.removeChild(h);return b}},serializeNode:function(a){if(typeof XMLSerializer!="undefined"){return(new XMLSerializer()).serializeToString(a)}else{if(a.xml){return a.xml}else{throw"XML.serialize is not supported or can't serialize "+a}}},serializeNodePretty:function(a){try{return XML((new XMLSerializer()).serializeToString(a)).toXMLString()}catch(b){return WebShow.Xml.serializeNode(a)}},serializeNodeToJsCode:function(d,a,c){if(!c){c="'"}if(!a){a=WebShow.Xml.DEF_SERIALIZE_TO_JSCODE_VARNAME}var e=WebShow.Xml.serializeNode(d);var b=new RegExp(c,"g");e=e.replace(b,"\\"+c);return"var "+a+" = "+c+e+c+";"},getXmlDocUrl:function(a){return a.url||a.documentURI||a.URL||a.location}};WebShow.registerOperation=function(b,a){if(WebShow.OperationCategoryManager){return WebShow.OperationCategoryManager.registerOperation(b,a)}else{return null}};WebShow.OperationState={INITIAL:0,PREPARING:1,PREPARED:2,EXECUTING:3,FINISHED:4,REVERSING:5,FINALIZING:10,FINALIZED:0,INSTANT_EXECUTING:20,CANCELLING:21,STOPPING:22};WebShow.Operation=WebShow.createClass(WebShow.Object,{CLASS_NAME:"WebShow.Operation",initialize:function($super,a){$super(a);this._waitExecTimeout=null;this.executeCoreBinding=this.executeCore.bind(this)},initProperties:function($super){$super();this.initPublicProp("element",WebShow.PropertyType.Object,WebShow.PropertyMode.READWRITE|WebShow.PropertyMode.UNPERSISTENTABLE,null);this.initPublicProp("duration",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("wait",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("delay",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("loop",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPrivateProp("currLoop",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,0);this.initState("state",WebShow.OperationState.INITIAL);this.initPublicEvent("onStateChanged",null);this.initPublicEvent("onPreparing",null);this.initPublicEvent("onPrepared",null);this.initPublicEvent("onExecuting",null);this.initPublicEvent("onFinish",null);this.initPublicEvent("onReversing",null);this.initPublicEvent("onReversed",null);this.initPublicEvent("onFinalizing",null);this.initPublicEvent("onFinalized",null);this.initPublicEvent("onInstantExecuting",null);this.initPublicEvent("onCancelling",null);this.initPublicEvent("onCancelled",null);this.initPublicEvent("onStopping",null);this.initPublicEvent("onStopped",null);this.initPublicEvent("onInternalPreparing",null);this.initPublicEvent("onInternalPrepared",null);this.initPublicEvent("onInternalExecuting",null);this.initPublicEvent("onInternalFinish",null);this.initPublicEvent("onInternalReversing",null);this.initPublicEvent("onInternalReversed",null);this.initPublicEvent("onInternalFinalizing",null);this.initPublicEvent("onInternalFinalized",null);this.initPublicEvent("onInternalInstantExecuting",null);this.initPublicEvent("onInternalCancelling",null);this.initPublicEvent("onInternalCancelled",null);this.initPublicEvent("onInternalStopping",null);this.initPublicEvent("onInternalStopped",null)},getDefXmlStoreTag:function(){return"slideOperation"},getElement:function(){if(this.felement){return this.felement}else{if(this.getContainer()){return this.getContainer().getElement()}else{return null}}},setElement:function(a){this.felement=a},getContainer:function(){var a;if(this._container){a=this._container;if(a){return a._holder}else{return null}}else{return null}},getOwnerSlide:function(){if(this.getContainer()){return this.getContainer().getOwnerSlide()}},getOwnerApp:function(){if(this.getContainer()){return this.getContainer().getOwnerApp()}},inspect:function($super){var a=$super()+"name: "+this.getName+"\n";return a},changeState:function(b){var a=this.getStateValue("state");this.setStateValue("state",b);this.evokeEventHandler(this.onStateChanged,this,a,b)},isPreparing:function(){return((this.getState()>=WebShow.OperationState.PREPARING)&&(this.getState()<WebShow.OperationState.PREPARED))},isExecuting:function(){return((this.getState()>=WebShow.OperationState.EXECUTING)&&(this.getState()<WebShow.OperationState.FINISHED))},isFinished:function(){return(this.getState()>=WebShow.OperationState.FINISHED)},isReversing:function(){return(this.getState()==WebShow.OperationState.REVERSING)},prepare:function(){if((this.getState()<WebShow.OperationState.PREPARING)||(this.getState()>=WebShow.OperationState.FINISHED)){this.beforePrepare();if(this.doPrepare()){this.afterPrepare()}}},forcePrepare:function(){this.beforePrepare();if(this.doPrepare()){this.afterPrepare()}},execute:function(){if(!this.isExecutable()){throw new Error(WebShow.ErrorStr.errCanNotExecute)}if(this.getState()<WebShow.OperationState.PREPARING){this.prepare()}if((this.getState()>=WebShow.OperationState.PREPARED)&&(this.getState()<WebShow.OperationState.FINISHED)){this.beforeExecute();if(this.getWait()){if(this._waitExecTimeout){clearTimeout(this._waitExecTimeout)}this._waitExecTimeout=setTimeout(this.executeCoreBinding,this.getWait())}else{this.executeCore()}}},executeCore:function(){if(this._waitExecTimeout){clearTimeout(this._waitExecTimeout);this._waitExecTimeout=null}if(this.doExecute()){this.afterExecute()}},forceExecute:function(){if(this.getState()>=WebShow.OperationState.FINISHED){this.prepare()}this.execute()},reverse:function(){if(!this.isReversible()){throw new Error(WebShow.ErrorStr.errCanNotReverse)}if(this.getState()>=WebShow.OperationState.FINISHED){this.beforeReverse();if(this.doReverse()){this.afterReverse()}}},forceReverse:function(){if(!this.isReversible()){throw new Error(WebShow.ErrorStr.errCanNotReverse)}this.beforeReverse();if(this.doReverse()){this.afterReverse()}},finalize:function(){if(this.getState()>=WebShow.OperationState.FINISHED){this.beforeFinalize();if(this.doFinalize()){this.afterFinalize()}}},doPrepare:function(){return true},doExecute:function(){return true},doReverse:function(){return true},doFinalize:function(){return true},beforePrepare:function(){this.changeState(WebShow.OperationState.PREPARING);this.evokeEventHandler(this.onInternalPrepairing,this);this.evokeEventHandler(this.onPrepairing,this)},afterPrepare:function(){this.changeState(WebShow.OperationState.PREPARED);this.evokeEventHandler(this.onInternalPrepaired,this);this.evokeEventHandler(this.onPrepaired,this)},beforeExecute:function(){this.changeState(WebShow.OperationState.EXECUTING);this.evokeEventHandler(this.onInternalExecuting,this);this.evokeEventHandler(this.onExecuting,this)},afterExecute:function(){if((!this.isLastLoop())&&(this.getState()!=WebShow.OperationState.INSTANT_EXECUTING)&&(this.getState()!=WebShow.OperationState.STOPPING)&&(this.getState()!=WebShow.OperationState.FINISHED)){this.incCurrLoop();this.changeState(WebShow.OperationState.INITIAL);this.execute()}else{this.resetLoop();this.changeState(WebShow.OperationState.FINISHED);this.evokeEventHandler(this.onInternalFinish,this);this.evokeEventHandler(this.onFinish,this)}},beforeReverse:function(){this.changeState(WebShow.OperationState.REVERSING);this.evokeEventHandler(this.onInternalReversing,this);this.evokeEventHandler(this.onReversing,this)},afterReverse:function(){this.changeState(WebShow.OperationState.PREPARED);this.evokeEventHandler(this.onInternalReversed,this);this.evokeEventHandler(this.onReversed,this)},beforeFinalize:function(){this.changeState(WebShow.OperationState.FINALIZING);this.evokeEventHandler(this.onInternalFinalizing,this);this.evokeEventHandler(this.onFinalizing,this)},afterFinalize:function(){this.changeState(WebShow.OperationState.INITIAL);this.evokeEventHandler(this.onInternalFinalized,this);this.evokeEventHandler(this.onFinalized,this)},executeInstantly:function(){if(!this.isExecutable()){throw new Error(WebShow.ErrorStr.errCanNotExecute)}if(this.getState()<WebShow.OperationState.PREPARING){this.prepare()}if(((this.getState()>=WebShow.OperationState.PREPARED)&&(this.getState()<WebShow.OperationState.FINISHED))||(this.getState()==WebShow.OperationState.STOPPING)){this.beforeInstantExecute();if(this.doExecuteInstantly()){this.afterInstantlyExecute()}}},doExecuteInstantly:function(){this.doExecute();return true},beforeInstantExecute:function(){this.changeState(WebShow.OperationState.INSTANT_EXECUTING);this.evokeEventHandler(this.onInternalInstantExecute,this);this.evokeEventHandler(this.onInstantExecute,this)},afterInstantlyExecute:function(){this.changeState(WebShow.OperationState.FINISHED);this.evokeEventHandler(this.onInternalFinish,this);this.evokeEventHandler(this.onFinish,this);this.afterExecute()},cancelExecute:function(){if(this.getState()==WebShow.OperationState.EXECUTING){this.beforeCancelExecute();if(this._waitExecTimeout){clearTimeout(this._waitExecTimeout);this._waitExecTimeout=null;this.afterCancelExecute()}else{if(this.doCancelExecute()){this.afterCancelExecute()}}}},doCancelExecute:function(){return true},beforeCancelExecute:function(){this.changeState(WebShow.OperationState.CANCELLING);this.evokeEventHandler(this.onInternalCancelling,this);this.evokeEventHandler(this.onCancelling,this)},afterCancelExecute:function(){this.changeState(WebShow.OperationState.PREPARED);this.evokeEventHandler(this.onInternalCancelled,this);this.evokeEventHandler(this.onCancelled,this);this.afterReverse()},stopExecute:function(){if(this.getState()==WebShow.OperationState.EXECUTING){this.beforeStopExecute();if(this._waitExecTimeout){clearTimeout(this._waitExecTimeout);this._waitExecTimeout=null;this.executeInstantly();this.afterStopExecute()}else{if(this.doStopExecute()){this.afterStopExecute()}}}},doStopExecute:function(){this.executeInstantly();return true},beforeStopExecute:function(){this.changeState(WebShow.OperationState.STOPPING);this.evokeEventHandler(this.onInternalStopping,this);this.evokeEventHandler(this.onStopping,this)},afterStopExecute:function(){this.changeState(WebShow.OperationState.FINISHED);this.evokeEventHandler(this.onInternalStopped,this);this.evokeEventHandler(this.onStopped,this);this.afterExecute()},reverseInstantly:function(){return this.reverse()},isExecutable:function(){return true},isReversible:function(){return false},getTotalTime:function(){return this.getWait()+this.getDuration()+this.getDelay()},getLoopCount:function(){if(this.getLoop()){return this.getLoop()}else{return 1}},incCurrLoop:function(){this.setCurrLoop(this.getCurrLoop()+1)},resetLoop:function(){this.setCurrLoop(0)},isInLoop:function(){return((this.getLoopCount()>1)&&(this.getCurrLoop()>=0)&&(this.getCurrLoop()<this.getLoopCount()))},isFirstLoop:function(){return(this.getCurrLoop()==0)},isLastLoop:function(){return(this.getCurrLoop()==this.getLoopCount()-1)},isOverLooped:function(){return(this.getCurrLoop()>=this.getLoopCount())},containTransition:function(){return false},containAction:function(){return false},containOperation:function(){return true}});WebShow.OperationList=WebShow.createClass(WebShow.FlexObjectList,{CLASS_NAME:"WebShow.OperationList",initialize:function($super){$super(name,true)},getOperation:function(a){return this.getItem(a)},indexOfOperation:function(a){return this.indexOf(a)},add:function($super,b,a){if(b){return $super(b,a)}else{return -1}},addOperation:function(a,b){return this.add(a,b)},appendOperation:function(a){return this.append(a)},removeOperation:function(a){return this.remove(a)},removeOperationAt:function(a){return this.removeAt(a)}});WebShow.OperationGroupMode={PARALLEL:"parallel",SERIAL:"serial",RANDOM_SERIAL:"randomSerial"};WebShow.OperationGroup=WebShow.createClass(WebShow.Operation,{CLASS_NAME:"WebShow.OperationGroup",initialize:function($super,b,c,a){$super(b);this._owner=null;this.initBindingMethods();this.setMode(c||WebShow.OperationGroupMode.SERIAL);this.setInterval(a||0);this.getOperations().onAdd=this.reactAddOperation.bind(this);this.getOperations().onRemove=this.reactRemoveOperation.bind(this)},initProperties:function($super){$super();this.initPublicProp("mode",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,WebShow.OperationGroupMode.SERIAL);this.initPublicProp("interval",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,0);this.initPublicProp("operations","WebShow.OperationList",WebShow.PropertyMode.READWRITE,null);this.initPublicProp("installAddRemoveEventHandler",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true);this.initPublicEvent("onAddOperation",null);this.initPublicEvent("onRemoveOperation",null);this.initPublicEvent("onChildOperationExecuting",null);this.initPublicEvent("onChildOperationFinish",null);this.initPublicEvent("onChildOperationReversed",null);this.initPublicEvent("onInternalChildOperationExecuting",null);this.initPublicEvent("onInternalChildOperationFinish",null);this.initPublicEvent("onInternalChildOperationReversed",null)},initPropertyValues:function($super){$super();this.foperations=new WebShow.OperationList();this.foperations._holder=this},initBindingMethods:function(){this.reactOperationExecutingBinding=this.reactOperationExecuting.bind(this);this.reactOperationExecutingBinding=this.reactOperationExecuting.bind(this);this.reactOperationFinishBinding=this.reactOperationFinish.bind(this);this.reactOperationReversedBinding=this.reactOperationReversed.bind(this)},isReversible:function(){return true},getOwnerSlide:function(){if(this._owner&&(this._owner instanceof WebShow.Slide)){return this._owner}else{if(this.getContainer()){return this.getContainer().getOwnerSlide()}else{return null}}},getOwnerApp:function(){if(this.getOwnerSlide()){return this.getOwnerSlide().getApp()}else{return null}},getOperation:function(a){return this.getOperations().getOperation(a)},indexOfOperation:function(a){return this.getOperations().indexOfOperation(a)},hasOperation:function(a){return(this.indexOfOperation(a)>=0)},addOperation:function(b,c){var a=this.getOperations().addOperation(b,c);return a},appendOperation:function(a){return this.addOperation(a)},removeOperation:function(a){return this.getOperations().removeOperation(a)},removeOperationAt:function(a){return this.getOperations().removeOperationAt(a)},clearOperations:function(){return this.getOperations().clear()},each:function(a){return this.getOperations().each(a)},length:function(){return this.getOperations().length()},getLength:function(){return this.getOperations().getLength()},checkOperationIsChild:function(a){return(a&&(a._container==this.getOperations()))},getFirstOperation:function(){if(this.getOperations().getLength()>0){return this.getOperations().getItem(0)}else{return null}},getLastOperation:function(){if(this.getOperations().getLength()>0){return this.getOperations().getItem(this.getOperations().getLength()-1)}else{return null}},reactAddOperation:function(a,b){if(a&&this.getInstallAddRemoveEventHandler()){a.onInternalExecuting=this.reactOperationExecutingBinding;a.onInternalInstantExecuting=this.reactOperationExecutingBinding;a.onInternalFinish=this.reactOperationFinishBinding;a.onInternalReversed=this.reactOperationReversedBinding;this.evokeEventHandler(this.onAddOperation,this,a)}},reactRemoveOperation:function(a,b){if(a&&this.getInstallAddRemoveEventHandler()){a.onInternalExecuting=null;a.onInternalInstantExecuting=null;a.onInternalFinish=null;a.onInternalReversed=null;this.evokeEventHandler(this.onRemoveOperation,this,a)}},reactOperationExecuting:function(a){if(!this.checkOperationIsChild(a)){return}if(this.getState()==WebShow.OperationState.EXECUTING){if(this.getActualInterval(a)<0){var c=null;if(a.getDuration){c=a.getDuration()}if(c>0){var b=c+this.getActualInterval(a);a._execNextTimeOut=setTimeout(this.execNextOperation.bind(this,a),b)}}}this.evokeEventHandler(this.onInternalChildOperationExecuting,this,a);this.evokeEventHandler(this.onChildOperationExecuting,this,a)},reactOperationFinish:function(a){if(!this.checkOperationIsChild(a)){return}if(this.getState()==WebShow.OperationState.EXECUTING){if(this.isAllOperationFinished()){this.afterExecute()}else{if(!this.isAllOperationExecutingOrFinished()){if((this.getMode()==WebShow.OperationGroupMode.SERIAL)||(this.getMode()==WebShow.OperationGroupMode.RANDOM_SERIAL)){if(a._execNextTimeOut){}else{this.execNextOperation(a)}}}}}else{if(this.getState()==WebShow.OperationState.INSTANT_EXECUTING){if(this.isAllOperationFinished()){this.afterInstantlyExecute()}}}this.evokeEventHandler(this.onInternalChildOperationFinish,this,a);this.evokeEventHandler(this.onChildOperationFinish,this,a)},reactOperationReversed:function(a){if(!this.checkOperationIsChild(a)){return}if(this.getState()==WebShow.OperationState.REVERSING){if(this.isAllOperationReversed()){this.afterReverse()}else{if((this.getMode()==WebShow.OperationGroupMode.SERIAL)||(this.getMode()==WebShow.OperationGroupMode.RANDOM_SERIAL)){var b=a._index;--b;if(b>=0){this.getOperation(b).reverse()}}}}this.evokeEventHandler(this.onInternalChildOperationReversed,this,a);this.evokeEventHandler(this.onChildOperationReversed,this,a)},execNextOperation:function(b){if(this.isAllOperationExecutingOrFinished()){return}var a=null;if(this.getMode()==WebShow.OperationGroupMode.SERIAL){var d=b._index;++d;if(d<this.getOperations().getLength()){a=this.getOperation(d)}if(a.isExecuting()){a=null}}else{var c=this.randomSelectOperation();while(c&&(c.getState()>=WebShow.OperationState.EXECUTING)){c=this.randomSelectOperation();if(this.isAllOperationExecutingOrFinished()){c=null;break}}a=c}if(a&&(a!=b)){if((this.getActualInterval(b)>0)&&(b._execNextTimeOut)){clearTimeout(b._execNextTimeOut);b._execNextTimeOut=null}if(this.getActualInterval(b)>0){setTimeout(a.execute.bind(a),this.getActualInterval(b))}else{a.execute()}}},isAllOperationExecuting:function(){for(var b=0,a=this.getOperations().getLength();b<a;++b){var c=this.getOperation(b);if(c.isExecuting()){}else{return false}}return true},isAllOperationFinished:function(){for(var b=0,a=this.getOperations().getLength();b<a;++b){var c=this.getOperation(b);if(c.getState()>=WebShow.OperationState.FINISHED){}else{return false}}return true},isAllOperationExecutingOrFinished:function(){for(var b=0,a=this.getOperations().getLength();b<a;++b){var c=this.getOperation(b);if(c.getState()>=WebShow.OperationState.EXECUTING){}else{return false}}return true},isAllOperationReversed:function(){for(var b=0,a=this.getOperations().getLength();b<a;++b){var c=this.getOperation(b);if(c.getState()<=WebShow.OperationState.PREPARED){}else{return false}}return true},randomSelectOperation:function(){if(this.getOperations().getLength()<=0){return null}var a=this.getOperations().getLength()-1;var c=Math.random();var b=Math.round(a*c);return this.getOperation(b)},doPrepare:function(){var b;for(var a=this.getOperations().getLength()-1;a>=0;--a){b=this.getOperations().getOperation(a);b.prepare()}return true},doExecute:function(){if(this.getOperations().getLength()<=0){return true}if(this.getMode()==WebShow.OperationGroupMode.PARALLEL){this.each(function(a){if(a&&a.execute){a.execute()}})}else{if(this.getMode()==WebShow.OperationGroupMode.SERIAL){if(this.getFirstOperation()){this.getFirstOperation().execute()}}else{if(this.getMode()==WebShow.OperationGroupMode.RANDOM_SERIAL){this.randomSelectOperation().execute()}}}return false},doReverse:function(){if(this.getOperations().getLength()<=0){return true}if(this.getMode()==WebShow.OperationGroupMode.PARALLEL){this.each(function(a){a.reverse()})}else{if((this.getMode()==WebShow.OperationGroupMode.SERIAL)||(this.getMode()==WebShow.OperationGroupMode.RANDOM_SERIAL)){if(this.getLastOperation()){this.getLastOperation().reverse()}}}return false},doFinalize:function(){this.each(function(a){a.finalize()});return true},doExecuteInstantly:function(){this.each(function(a){a.executeInstantly()});return true},doCancelExecute:function(){this.each(function(a){if(a.getState()>=WebShow.OperationState.FINISHED){a.reverse()}else{if(a.getState()<=WebShow.OperationState.PREPARED){}else{a.cancelExecute();if(a._execNextTimeOut){clearTimeout(a._execNextTimeOut);a._execNextTimeOut=null}}}});return true},doStopExecute:function(){this.each(function(a){if(a.getState()>=WebShow.OperationState.FINISHED){}else{if(a.getState()<=WebShow.OperationState.PREPARED){a.executeInstantly()}else{a.stopExecute()}}});return true},getDuration:function(){var c=this.getLength();if(c<=0){return 0}var b=0;var a=this.getInterval();var g;for(var e=0;e<c;++e){var f=this.getOperation(e);if(e<c-1){if((this.getMode()==WebShow.OperationGroupMode.SERIAL)||(this.getMode()==WebShow.OperationGroupMode.RANDOM_SERIAL)){g=Math.max(f.getTotalTime()+a,0)}else{g=Math.max(f.getWait()+f.getDuration(),0)}}else{g=f.getWait()+f.getDuration()}if((this.getMode()==WebShow.OperationGroupMode.SERIAL)||(this.getMode()==WebShow.OperationGroupMode.RANDOM_SERIAL)){b+=g}else{b=Math.max(b,g)}}return b},setDuration:function(a){throw new Error(WebShow.ErrorStr.errCanNotSetDurationOnOperationGroup)},getActualInterval:function(a){if(a.getDelay()){return this.getInterval()+a.getDelay()}else{return this.getInterval()}},containOperation:function(){return(this.getLength()>0)},containTransition:function(){for(var b=0,a=this.getLength();b<a;++b){if(this.getOperation(b).containTransition()){return true}}return false},containAction:function(){for(var b=0,a=this.getLength();b<a;++b){if(this.getOperation(b).containAction()){return true}}return false}});WebShow.OperationSequence=WebShow.createClass(WebShow.OperationGroup,{CLASS_NAME:"WebShow.OperationSequence",initialize:function($super,a){$super(a)},initProperties:function($super){$super();this.initPublicProp("currOperation","WebShow.Operation",WebShow.PropertyMode.READ,null)},setExecutingState:function(){this.changeState(WebShow.OperationState.EXECUTING)},reactOperationExecuting:function($super,a){if(!this.checkOperationIsChild(a)){return}this.setExecutingState();$super(a)},reactOperationFinish:function($super,a){if(!this.checkOperationIsChild(a)){return}if((this.getState()==WebShow.OperationState.EXECUTING)||(this.getState()==WebShow.OperationState.INSTANT_EXECUTING)){if(this.isAllOperationFinished()){this.afterExecute()}}this.evokeEventHandler(this.onInternalChildOperationFinish,this,a);this.evokeEventHandler(this.onChildOperationFinish,this,a)},reactOperationReversed:function(a){if(!this.checkOperationIsChild(a)){return}if(this.getState()==WebShow.OperationState.REVERSING){if(this.isAllOperationReversed()){this.afterReverse()}}this.evokeEventHandler(this.onInternalChildOperationReversed,this,a);this.evokeEventHandler(this.onChildOperationReversed,this,a)},doPrepare:function($super){$super();this.setCurrOperation(null)},setCurrOperation:function(a){if((a==null)||this.hasOperation(a)){this.fcurrOperation=a}},getNextOperation:function(){if(this.getCurrOperation()){var a=this.getCurrOperation()._index+1;if(a<this.getOperations().getLength()){return this.getOperation(a)}else{return null}}else{return this.getFirstOperation()}},getPrevOperation:function(){if(this.getCurrOperation()){var a=this.getCurrOperation()._index-1;if(a>=0){return this.getOperation(a)}else{return null}}else{return null}},last:function(){return this.getOperations().last()},first:function(){return this.getOperations().first()},executeNext:function(){if(this.getNextOperation()){this.getNextOperation().execute();this.fcurrOperation=this.getNextOperation()}},reverseCurr:function(){if(this.getCurrOperation()&&(!this.getCurrOperation().isExecuting())){if(this.getCurrOperation().isReversible()){this.getCurrOperation().reverse()}else{this.getCurrOperation().forcePrepare()}this.setCurrOperationToPrev()}},setCurrOperationToPrev:function(){this.fcurrOperation=this.getPrevOperation()},instantExecuteNext:function(){if(this.getNextOperation()){this.getNextOperation().executeInstantly();this.fcurrOperation=this.getNextOperation()}},stopCurr:function(){if(this.getCurrOperation()&&this.getCurrOperation().isExecuting()){this.getCurrOperation().stopExecute()}},cancelCurr:function(){if(this.getCurrOperation()&&this.getCurrOperation().isExecuting()){this.getCurrOperation().cancelExecute();this.fcurrOperation=this.getPrevOperation()}},nextStep:function(a){if(this.getLength()<=0){return}if(this.getCurrOperation()&&this.getCurrOperation().isExecuting()){this.stopCurr()}else{if(!a){this.executeNext()}else{this.instantExecuteNext()}}},prevStep:function(a){if(this.getLength()<=0){return}if(this.getCurrOperation()&&this.getCurrOperation().isExecuting()){this.cancelCurr()}else{while(!this.getCurrOperation().isReversible()){this.reverseCurr()}this.reverseCurr()}},hasNextStep:function(){if(this.getLength()<=0){return false}if(this.getCurrOperation()&&this.getCurrOperation().isExecuting()){return true}else{if(this.getNextOperation()){return true}else{return false}}},hasPrevStep:function(){if(this.getLength()<=0){return false}if(this.getCurrOperation()&&this.getCurrOperation().isExecuting()){return true}else{if(this.getCurrOperation()){return true}else{return false}}}});WebShow.OperationHistory=WebShow.createClass(WebShow.OperationSequence,{CLASS_NAME:"WebShow.OperationHistory",initialize:function($super,a){$super(a);this.getOperations().setOwnChildren(false);this.getOperations().setAddExtraFields(false);this.setInstallAddRemoveEventHandler(false);this.getOperations().onAdd=null;this.appendOperation=this.addOperation},addOperation:function($super,a){return $super(a)},appendOperation:function(a){this.addOperation(a)},pushOperation:function(a){return this.appendOperation(a)},popOperation:function(){var a=this.getLastOperation();if(a){this.removeOperationAt(this.getLength()-1)}return a},reverseLastOperation:function(){var a=this.popOperation();if(a){if(a.isReversible()){a.forceReverse()}else{a.forcePrepare()}}return a},checkOperationIsChild:function($super,a){return true}});WebShow.OperationDefAutoType={MANUAL:"manual",AFTER_PREV:"after_prev",WITH_PREV:"with_prev"};WebShow.OperationDefApplyType={ITERATE:"iterate",SELECT:"select",DEFAULT:"select"};WebShow.OperationDef=WebShow.createClass(WebShow.Object,{CLASS_NAME:"WebShow.OperationDef",initialize:function($super,a){$super(a)},initProperties:function($super){$super();this.initPublishedProp("ref",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("selector",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("id",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initAlias("element","selector");this.initAlias("elementId","id");this.initPrivateProp("applyType","WebShow.OperationDefApplyType",WebShow.PropertyMode.READWRITE,null);this.initPublicProp("interpretElementRelatedValue",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null)},getContainer:function(){var a;if(this._container){a=this._container;if(a){return a._holder}else{return null}}else{return null}},getApplyType:function(){if(this.fapplyType){return this.fapplyType}else{if(this.getContainer()&&this.getContainer().getApplyType){return this.getContainer().getApplyType()}else{return WebShow.OperationDefApplyType.DEFAULT}}},getActualInterpretElementRelatedValue:function(){if(this.finterpretElementRelatedValue!=null){return this.interpretElementRelatedValue}else{if(this.getContainer()&&this.getContainer().getActualInterpretElementRelatedValue){return this.getContainer().getActualInterpretElementRelatedValue()}else{return true}}},canIterateChildElems:function(){return false},createOperations:function(b,c,g){var d=null;var f=null;var h=this.getRef();if(this.getActualInterpretElementRelatedValue()){h=WebShow.ElementUtils.getElementRelatedValue(b,h)}var e=this.getRefDefinition(g,h);if(e){f=e._container;if(this._container){e._container=this._container}d=e.clone();d=WebShow.mergeObj(d,this);d.setRef(null)}if(d){var a=d.createOperations(b,c,g);if(e){e._container=f}return a}else{if(this.getApplyType()==WebShow.OperationDefApplyType.ITERATE){return this.createOperationsByIterate(b,c,g)}else{if(!this.isElementSetted()){return this.createOperationOnElement(b,c,g)}else{return this.createOperationsBySelect(b,c,g)}}}},createOperationsBySelect:function(a,b,c){return this.doCreateOperationsBySelect(a,b,c)},doCreateOperationsBySelect:function(a,d,h){var g=null;if(a){g=a.ownerDocument}if(g){var c=this.matchedElements(a);if(c.length>0){for(var e=0,b=c.length;e<b;++e){var f=c[e];this.createOperationOnElement(f,d,h)}}else{}}},createOperationsByIterate:function(a,b,c){if(!a){return null}if(this.isMatchElement(a,a)){return this.doCreateOperationsByIterate(a,b,c)}else{return null}},doCreateOperationsByIterate:function(a,b,c){if(!a){return null}return this.createOperationOnElement(a,b,c)},createOperationOnElement:function(b,a,c){var d=this.doCreateOperationOnElement(b);if(d&&a){a.appendOperation(d)}return d},doCreateOperationOnElement:function(a){return null},getRefDefinition:function(a,b){if(a&&b){return a.findObject(b)}else{return null}},queryElements:function(h,e,k){var b=[];var a=[];if(!h){a.push(k)}else{if(typeof(h)=="string"){var j=h;a=this.queryElements(null,j,k)}else{a.push(h)}}if(a.length>0){if(!e){WebShow.ArrayUtils.pushArray(b,a)}else{for(var f=0,d=a.length;f<d;++f){var c=a[f];var g=$(c).select(e);WebShow.ArrayUtils.pushArray(b,g)}}}return b},matchedElements:function(c){var d=[];if(this.getId()){var g=this.getId();if(this.getActualInterpretElementRelatedValue()){g=WebShow.ElementUtils.getElementRelatedValue(c,g)}var f=c.ownerDocument;var e=f.getElementById(g);d.push(e)}else{if(this.getSelector()){var b=c;var a=this.getSelector();if(this.getActualInterpretElementRelatedValue()){a=WebShow.ElementUtils.getElementRelatedValue(c,a)}d=this.queryElements(b,a,c)}}return d},isMatchElement:function(c,b){var d=this.getId();if(d){if(this.getActualInterpretElementRelatedValue()){d=WebShow.ElementUtils.getElementRelatedValue(b,d)}return(c.id==d)}var a=this.getSelector();if(this.getActualInterpretElementRelatedValue()){a=WebShow.ElementUtils.getElementRelatedValue(b,a)}if(!a){a=""}result=$(c).match(a);return result},isElementSetted:function(){return(this.getSelector()||this.getId())}});WebShow.OperationDefItem=WebShow.createClass(WebShow.OperationDef,{CLASS_NAME:"WebShow.OperationDefItem",initialize:function($super,a){$super(a)},initProperties:function($super){$super();this.initPublishedProp("params",WebShow.PropertyType.Object,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("class",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null)},getDefXmlStoreTag:function(){return"operation"},getParams:function(){if(!this.fparams){this.fparams={}}return this.fparams},doCreateOperationsBySelect:function($super,a,b,c){$super(a,b,c)},doCreateOperationOnElement:function(b){var c=this.getClass();if(this.getActualInterpretElementRelatedValue()){c=WebShow.ElementUtils.getElementRelatedValue(b,c)}var a=this.doCreateOperationObject(c);if(a){a.setElement(b);var f=this.getParams();if(f){for(var d in f){if(a.hasProperty(d,true)){var e=f[d];if(Object.isString(e)&&this.getActualInterpretElementRelatedValue()){e=WebShow.ElementUtils.getElementRelatedValue(b,e)}a.setPropValue(d,e,true)}}}}return a},doCreateOperationObject:function(b){var a=WebShow.ObjFactory.createObj(b);if(a){a.setName(this.getName())}return a},getApplyType:function(){var a=this.getContainer();if(a&&a.getApplyType){return a.getApplyType()}else{return this.fapplyType}}});WebShow.OperationDefContainer=WebShow.createClass(WebShow.OperationDef,{CLASS_NAME:"WebShow.OperationDefContainer",initialize:function($super,a){$super(a)},initProperties:function($super){$super();this.initPublicProp("definitions","WebShow.FlexObjectList",WebShow.PropertyMode.READ,null)},initPropertyValues:function($super){$super();this.fdefinitions=new WebShow.FlexObjectList(false);this.fdefinitions._holder=this},add:function(b,a){return this.fdefinitions.add(b,a)},append:function(a){return this.fdefinitions.append(a)},remove:function(a){return this.fdefinitions.remove(a)},removeAt:function(a){return this.fdefinitions.removeAt(a)},removeLast:function(){return this.fdefinitions.removeAt(this.getLength()-1)},clear:function(){return this.fdefinitions.clear()},indexOf:function(a){return this.fdefinitions.indexOf(a)},itemAt:function(a){return this.fdefinitions.itemAt(a)},getItem:function(a){return this.fdefinitions.getItem(a)},first:function(){return this.fdefinitions.first()},last:function(){return this.fdefinitions.last()},length:function(){return this.fdefinitions.length()},getLength:function(){return this.fdefinitions.getLength()},findItemByProp:function(d,e){var a=this.fdefinitions.findItemByProp(d,e);if(a){return a}for(var c=0,b=this.fdefinitions.length;c<b;++c){if(this.fdefinitions.findItemByProp){a=this.fdefinitions.findItemByProp(d,e);if(a){return a}}}},findItemByName:function(d){var a=this.fdefinitions.findItemByName(d);if(a){return a}for(var c=0,b=this.fdefinitions.getLength();c<b;++c){if(this.fdefinitions.getItem(c).findItemByName){a=this.fdefinitions.getItem(c).findItemByName(d);if(a){return a}}}},getDefinition:function(a){return this.getItem(a)},canIterateChildElems:function(){return true},createOperationOnElement:function($super,d,g,f){var a;var h=$super(d,g,f);if(!h){a=g}else{a=h}if(this.getApplyType()==WebShow.OperationDefApplyType.SELECT){for(var e=0,c=this.getLength();e<c;++e){var b=this.getDefinition(e);if(b){b.createOperations(d,a,f)}}}return h},doCreateOperationsBySelect:function($super,a,b,c){return $super(a,b,c)},createOperationsByIterate:function(a,b,c){if(!a){return null}if(this.isMatchElement(a,a)){return this.doCreateOperationsByIterate(a,b,c)}else{return null}},doCreateOperationsByIterate:function($super,a,d,e){var c=null;var b=false;if(this.isMatchElement(a,a)){c=this.createOperationOnElement(a,d,e);b=(c==null)}if(!c){c=d}this.iterateChildHtmlElements(a,c,e,b);return c},iterateChildHtmlElements:function(q,p,o,g){if((!q)||(!p)){return null}if(g){var d=null;var b=q;var m=false;for(var f=0,e=this.getLength();f<e;++f){var a=this.getDefinition(f);var d=null;if((a.isMatchElement(b,q))){d=a.createOperations(b,p,o);m=m||a.canIterateChildElems()}}}if(m){return d}var n=$(q).childElements();for(var h=0,c=n.length;h<c;++h){var m=false;var b=n[h];for(var f=0,e=this.getLength();f<e;++f){var a=this.getDefinition(f);var d=null;if(a.isMatchElement(b,q)){d=a.createOperations(b,p,o);m=m||a.canIterateChildElems()}}if(!m){this.iterateChildHtmlElements(b,p,o)}}},canIterateChildElems:function(){return true},saveToXmlElement:function($super,a,c){var b=$super(a);this.getDefinitions().saveToXmlElement(a,c);return b},loadFromXml:function($super,b,c){this.getDefinitions().loadFromXml(b,c);var a=$super(b,c);return a}});WebShow.OperationDefGroup=WebShow.createClass(WebShow.OperationDefContainer,{CLASS_NAME:"WebShow.OperationDefGroup",initialize:function($super,b,c,a){$super(b);this.setMode(c||WebShow.OperationGroupMode.SERIAL);this.setInterval(a||0)},initProperties:function($super){$super();this.initPublishedProp("mode",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,WebShow.OperationGroupMode.SERIAL);this.initPublishedProp("interval",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,0)},getDefXmlStoreTag:function(){return"group"},doCreateOperationsBySelect:function($super,a,b,c){return $super(a,b,c)},doCreateOperationsByIterate:function($super,a,b,d){var c=$super(a,b,d)},createOperationOnElement:function($super,b,a,d){var c=$super(b,a,d);if((this.getApplyType()==WebShow.OperationDefApplyType.SELECT)&&(c.getLength()<=0)){a.removeOperation(c);return null}else{return c}},doCreateOperationOnElement:function($super,a){var b=new WebShow.OperationGroup(this.getName(),this.getMode(),this.getInterval());b.setElement(a);return b}});WebShow.OperationDefIterator=WebShow.createClass(WebShow.OperationDefContainer,{CLASS_NAME:"WebShow.OperationDefIterator",initialize:function($super,a){$super(a);this.initPublishedProp("element",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("root",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.setApplyType(WebShow.OperationDefApplyType.ITERATE)},getDefXmlStoreTag:function(){return"iterator"}});WebShow.OperationDefIteratorApplier=WebShow.createClass(WebShow.OperationDef,{CLASS_NAME:"WebShow.OperationDefIteratorApplier",initialize:function($super,a){$super(a)},initProperties:function($super){$super();this.initPublishedProp("iterator",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null)},getDefXmlStoreTag:function(){return"applyIterator"},canIterateChildElems:function(){return this.assignedIterator()},doCreateOperationsByIterate:function(a,b,e){if(!a){return null}var c=this.getIterator();var d=this.findIterator(c);if(!d){return null}else{return d.createOperations(a,b,e)}},findIterator:function(b){var a=this.getContainer();while(a){if(a instanceof WebShow.OperationDefIterator){if(!b){return a}else{if(a.getName()==b){return a}}}a=a.getContainer()}return null},assignedIterator:function(){return(this.findIterator(this.getIterator())!=null)}});WebShow.OperationDefSeq=WebShow.createClass(WebShow.OperationDefContainer,{CLASS_NAME:"WebShow.OperationDefSeq",initialize:function($super,a){$super(a);this.setApplyType(WebShow.OperationDefApplyType.SELECT)},getDefXmlStoreTag:function(){return"sequence"}});WebShow.OperationDefCollection=WebShow.createClass(WebShow.OperationDefContainer,{CLASS_NAME:"WebShow.OperationDefCollection",initialize:function($super,a){$super(a)},getDefXmlStoreTag:function(){return"operations"}});WebShow.OperationDefList=WebShow.OperationDefCollection;WebShow.InlineOperationDefCreator=WebShow.createClass(WebShow.OperationDef,{CLASS_NAME:"WebShow.InlineOperationDefCreator",initialize:function($super,a){$super(a)}});WebShow.FixedXmlOperationDefCreator=WebShow.createClass(WebShow.InlineOperationDefCreator,{CLASS_NAME:"WebShow.FixedXmlOperationDefCreator",initialize:function($super,a,b){$super(a);this.setXml(b)},initProperties:function($super){$super();this.initPublishedProp("xml",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null)},createOperDef:function(){if(this.getXml()){var b=WebShow.Xml.parse(this.getXml());if(b){var a=b.documentElement.tagName;var c=WebShow.ObjFactory.createObjByTag(a);c.loadFromXml(b.documentElement);return c}}return null},createOperations:function($super,a,b,c){var d=this.createOperDef();if(d){return d.createOperations(a,b,c)}else{return null}},createOperationOnElement:function($super,b,a,c){var d=this.applyXml();if(d){return d.createOperationOnElement(b,a,c)}else{return null}},setXml:function(a){if(a!=this.fxml){this.fxml=a}}});WebShow.InlineRefOperationDefCreator=WebShow.createClass(WebShow.FixedXmlOperationDefCreator,{CLASS_NAME:"WebShow.InlineRefOperationDefCreator",INLINE_OPER_ATTRIB_NAME:WebShow.EMBEDDED_ATTRIB_PREFIX+"oper",INLINE_GROUP_ATTRIB_NAME:WebShow.EMBEDDED_ATTRIB_PREFIX+"group",initialize:function($super,a){$super(a)},initProperties:function($super){$super();this.initPublishedProp("inlineOperAttribName",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("inlineGroupAttribName",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null)},getDefXmlStoreTag:function(){return"inlineOperationRef"},getActualInlineOperAttribName:function(){if(!this.getInlineOperAttribName()){return this.INLINE_OPER_ATTRIB_NAME}else{return this.getInlineOperAttribName()}},getActualInlineGroupAttribName:function(){if(!this.getInlineGroupAttribName()){return this.INLINE_GROUP_ATTRIB_NAME}else{return this.getInlineGroupAttribName()}},getXml:function(){return'<iterator><operation ref="@'+this.getActualInlineOperAttribName()+'" element="['+this.getActualInlineOperAttribName()+']" /><group ref="@'+this.getActualInlineGroupAttribName()+'" element="['+this.getActualInlineGroupAttribName()+']"></group></iterator>'}});WebShow.Action=WebShow.createClass(WebShow.Operation,{CLASS_NAME:"WebShow.Action",initialize:function($super,a){$super(a)},getDefXmlStoreTag:function(){return"actionItem"},containAction:function(){return true}});WebShow.ReversibleAction=WebShow.createClass(WebShow.Action,{CLASS_NAME:"WebShow.ReversibleAction",initialize:function($super,a){$super(a)},isReversible:function(){return true}});WebShow.CustomAction=WebShow.createClass(WebShow.Action,{CLASS_NAME:"WebShow.CustomAction",initialize:function($super,b,c,a){$super(b);this.setExecFunc(c);this.setUndoFunc(a)},initProperties:function($super){$super();this.initPublicProp("execFunc",WebShow.PropertyType.Function,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("undoFunc",WebShow.PropertyType.Function,WebShow.PropertyMode.READWRITE,null)},doExecute:function($super){if(this.getExecFunc()){this.getExecFunc().apply(this)}return $super()},doReverse:function($super){if(this.getUndoFunc()){this.getUndoFunc().apply(this)}return $super()},isExecutable:function(){return this.getExecFunc()!=null},isReversible:function(){return this.getUndoFunc()!=null}});WebShow.ActionOfApp=WebShow.createLightClass(WebShow.Action,{initialize:function($super,a,b){$super(a);this.setApp(b)},initProperties:function($super){$super();this.initPublicProp("app","WebShow.App",WebShow.PropertyMode.READWRITE,null)},getActualApp:function(){if(this.getApp()){return this.getApp()}else{return this.getOwnerApp()}}});WebShow.ActionGotoSlide=WebShow.createLightClass(WebShow.ActionOfApp,{CLASS_NAME:"WebShow.ActionGotoSlide",initialize:function($super,a){$super(a)},initProperties:function($super){$super();this.initPublicProp("slide","WebShow.Slide",WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("slideName",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("slideIndex",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null)},getActualSlide:function(){if(this.getSlide()){return this.getSlide()}else{var a=this.getActualApp();if(a){if(this.getSlideName()){return a.findSlideByName(this.getSlideName())}else{if(this.getSlideIndex()){return a.getSlideAt(this.getSlideIndex())}}}}return null},doExecute:function($super){var a=this.getActualSlide();if(a){var b=this.getActualApp();if(b){b.gotoSlide.bind(b).defer(a)}}return $super()},setSlideName:function(a){if(this.getSlideName()!=a){this.fslideName=a;if(a){this.setSlideIndex(null)}}},setSlideIndex:function(a){if(this.getSlideIndex()!=a){this.fslideIndex=a;if(a!=null){this.setSlideName(null)}}}});WebShow.ActionGotoSlideOffset=WebShow.createLightClass(WebShow.ActionOfApp,{CLASS_NAME:"WebShow.ActionGotoSlideOffset",initialize:function($super,a,b){$super(a);this.setOffset(b)},initProperties:function($super){$super();this.initPublishedProp("offset",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null)},setOffset:function(a){this.foffset=parseInt(a)},doExecute:function($super){var a=this.getActualApp();if(a&&this.getOffset()){a.gotoSlideOffset.bind(a).defer(this.getOffset())}return $super()}});WebShow.ActionGotoPrevSlide=WebShow.createLightClass(WebShow.ActionOfApp,{CLASS_NAME:"WebShow.ActionGotoPrevSlide",initialize:function($super,a){$super(a)},initProperties:function($super){$super()},doExecute:function($super){var a=this.getActualApp();a.gotoPrevSlide.bind(a).defer();return $super()}});WebShow.ActionGotoNextSlide=WebShow.createLightClass(WebShow.ActionOfApp,{CLASS_NAME:"WebShow.ActionGotoNextSlide",initialize:function($super,a,b){$super(a)},initProperties:function($super){$super()},doExecute:function($super){var a=this.getActualApp();a.gotoNextSlide.bind(a).defer();return $super()}});WebShow.ActionExecNamedOperationDef=WebShow.createLightClass(WebShow.ActionOfApp,{CLASS_NAME:"WebShow.ActionExecNamedOperationDef",initialize:function($super,a,c,b){$super(a);this.setOperDefName(c);this.setElement(b)},initProperties:function($super){$super();this.initPublishedProp("operDefName",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("bypassHistory",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("instantly",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null)},doExecute:function($super){var a=this.getActualApp();a.execNamedOperationDefOnElement(this.getOperDefName(),this.getElement(),this.getBypassHistory(),this.getInstantly());return $super()}});WebShow.ActionOpenNewWin=WebShow.createLightClass(WebShow.ReversibleAction,{CLASS_NAME:"WebShow.ActionOpenNewWin",initialize:function($super,a,c,d,b){$super(a);this.setNewWinUrl(c);this.setNewWinName(d);this.setNewWinFeatures(b)},initProperties:function($super){$super();this.initPublishedProp("newWinUrl",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("newWinName",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("newWinFeatures",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("winRef",WebShow.PropertyType.Object,WebShow.PropertyMode.READ,null)},doExecute:function($super){this.fwinRef=window.open(this.getNewWinUrl(),this.getNewWinName(),this.getNewWinFeatures());return $super()},doReverse:function($super){if(this.fwinRef){this.fwinRef.close();this.fwinRef=null}return $super()}});WebShow.ActionDef=WebShow.createClass(WebShow.OperationDefItem,{CLASS_NAME:"WebShow.ActionDef",initialize:function($super,a,b){$super(a);this.setClass(b)},getDefXmlStoreTag:function(){return"action"},doCreateOperationOnElement:function($super,a){if(!a){return null}var b=$super(a);if(b.setElement){b.setElement(a)}return b},doCreateOperationObject:function($super,a){if(!a){a="CustomAction"}return $super(a)}});WebShow.TransitionType={APPEAR:"appear",DISAPPEAR:"disappear",REMOVE:"remove",TRANSFORM:"transform"};WebShow.Transition=WebShow.createClass(WebShow.Operation,{CLASS_NAME:"WebShow.Transition",initialize:function($super,a,b,c){$super(a);this.setTransType(c||WebShow.TransitionType.TRANSFORM);this.setElement(b)},initProperties:function($super){$super();this.initPublishedProp("transType",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,WebShow.TransitionType.TRANSFORM)},isReversible:function(){return true},getDefXmlStoreTag:function(){return"transitionItem"},containTransition:function(){return true}});WebShow.TransitionAculo=WebShow.createClass(WebShow.Transition,{CLASS_NAME:"WebShow.TransitionAculo",initialize:function($super,c,d,e,a,b){$super(c,d,e);this.setEffectName(a);this.setEffectOptions(b);this.felementOriginalStyleText=null;this.fElementVisible=null;this.fElementDisplay=null;this.fieFixed=false},initProperties:function($super){$super();this.initPublicProp("effectName",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("effectOptions",WebShow.PropertyType.Object,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("effect",WebShow.PropertyType.Object,WebShow.PropertyMode.READ,null);this.initPublicEvent("onEffectUpdating",null);this.initPublicEvent("onEffectUpdated",null)},initPropertyValues:function($super){$super();this.feffectOptions={}},fixTableForIE:function(d){if(this.getTransType()!=WebShow.TransitionType.APPEAR){return d}var b=d.tagName;if(b.toLowerCase()!="table"){return d}var c=d.parentNode;var f=d.ownerDocument;var a=f.createElement("div");var e=c.replaceChild(a,d);a.appendChild(e);this.fieFixed=true;return a},fixLiForIE:function(h){var d=h.tagName;if(d.toLowerCase()!="li"){return h}var b=Element.getStyle(h,"display");if((b!="")&&(b.toLowerCase()!="block")&&(b.toLowerCase()!="list-item")){return h}var e=h.parentNode;var c=this.getListItemIndex(e,h);if(c>=0){h.setAttribute("value",c+1)}var g=h.ownerDocument;var a=g.createElement("div");var f=e.replaceChild(a,h);a.appendChild(f);this.fieFixed=true;return a},getListItemIndex:function(b,c){var a=Element.select(b,"li");return a.indexOf(c)},fixSpecElemForIE:function(c){var a=c;var b=a.tagName.toLowerCase();if(b=="li"){a=this.fixLiForIE(a)}return a},doPrepare:function(){if(Prototype.Browser.IE){this.setElement(this.fixSpecElemForIE(this.getElement()))}if(this.getTransType()==WebShow.TransitionType.APPEAR){this.hideElement()}else{if(this.getTransType()==WebShow.TransitionType.DISAPPEAR){this.showElement()}}return true},doExecute:function(){this.feffect=this.createEffect();if((!this.getElement())||!this.feffect){return true}if(this.getTransType()==WebShow.TransitionType.APPEAR){setTimeout(this.showElementWithoutOpacity.bind(this),0);this.feffect.render(this.feffect.options.from||0)}return false},doReverse:function(){if(this.felementOriginalStyleText!=null){if(this.getElement()){this.getElement().style.cssText=this.felementOriginalStyleText}}return true},doFinalize:function($super){this.fElementVisible=null;this.feffect=null;return $super()},doExecuteInstantly:function(){this.feffect=this.createEffect({duration:0});if(this.getTransType()==WebShow.TransitionType.APPEAR){this.feffect.render(this.feffect.options.from||0);setTimeout(this.showElementWithoutOpacity.bind(this),0)}return true},doCancelExecute:function(){if(this.getEffect()){this.getEffect().cancel();this.reverseInstantly()}return true},doStopExecute:function(){if(this.getEffect()){if(this.getEffect().stop){this.getEffect().stop()}}return true},reverseInstantly:function($super){return this.reverse()},afterExecute:function($super){$super();if(this.getTransType()==WebShow.TransitionType.DISAPPEAR){if(this.getElement()){this.getElement().style.cssText=this.felementOriginalStyleText;this.hideElement()}}else{if(this.getTransType()==WebShow.TransitionType.REMOVE){if(this.getElement()){this.getElement().style.cssText=this.felementOriginalStyleText;this.hideElementDisplay()}}}},createEffect:function(additionalOpts){if(!this.getEffectName()){return null}var targetElem=this.getElement();if(targetElem){this.felementOriginalStyleText=targetElem.style.cssText}var dur=null;dur=this.getDuration()/1000;var transFunc=null;if(this.getEffectOptions().transition){try{transFunc=eval(this.getEffectOptions().transition)}catch(e){transFunc=null}}var ownerSlide=this.getOwnerSlide();var effectOpts=Object.extend({afterFinish:this.reactAfterFinish.bind(this),beforeUpdate:this.reactBeforeUpdate.bind(this),afterUpdate:this.reactAfterUpdate.bind(this),refElem:ownerSlide?ownerSlide.getElement():null},this.getEffectOptions());if(dur){effectOpts.duration=dur}if(additionalOpts){effectOpts=Object.extend(effectOpts,additionalOpts)}if(transFunc){effectOpts.transition=transFunc}else{delete effectOpts.transition}var evalStr="new "+this.getEffectName()+"(targetElem, effectOpts);";this.feffect=eval(evalStr);return this.feffect},reactAfterFinish:function(a){if(a==this.getEffect()){this.afterExecute()}},reactBeforeUpdate:function(a){if(a==this.getEffect()){this.evokeEventHandler(this.onEffectUpdating,this)}},reactAfterUpdate:function(a){if(a==this.getEffect()){this.evokeEventHandler(this.onEffectUpdated,this)}},hideElement:function(){if(this.getElement()){this.fElementVisible=Element.getStyle(this.getElement(),"visibility");Element.setStyle(this.getElement(),{visibility:"hidden"})}},hideElementDisplay:function(){if(this.getElement()){this.fElementDisplay=Element.getStyle(this.getElement(),"display")||"inherit";Element.setStyle(this.getElement(),{display:"none"})}},showElement:function(a){if(this.getElement()){WebShow.ElementUtils.show(this.getElement(),!a)}},showElementWithoutOpacity:function(){this.showElement(false)},restoreElement:function(){if(this.getElement()){if(this.fElementVisible){Element.setStyle(this.getElement(),{visibility:this.fElementVisible})}if(this.fElementDisplay){Element.setStyle(this.getElement(),{display:this.fElementDisplay})}}},getDuration:function(){if(this.fduration){return this.fduration}else{if(this.getEffectOptions()){return this.getEffectOptions().duration*1000}}},setDuration:function(a){this.fduration=a}});WebShow.TransitionDef=WebShow.createClass(WebShow.OperationDefItem,{CLASS_NAME:"WebShow.TransitionDef",initialize:function($super,a,b,c){$super(a);this.setClass(b);if(c){this.setTransType(c)}},initProperties:function($super){$super();this.initPublishedProp("transType",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null)},getDefXmlStoreTag:function(){return"transition"},doCreateOperationOnElement:function($super,b){if(!b){return null}var a=$super(b);a.setTransType(this.getTransType());if(a.setElement){a.setElement(b)}return a},doCreateOperationObject:function($super,a){if(!a){a="TransitionAculo"}return $super(a)}});WebShow.ObjRepository=WebShow.createClass(WebShow.Object,{CLASS_NAME:"WebShow.ObjRepository",initialize:function($super){$super()},initProperties:function($super){$super();this.initPublishedProp("objList","WebShow.FlexObjectList",WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("varMap","WebShow.Map",WebShow.PropertyMode.READWRITE,null)},initPropertyValues:function($super){$super();this.fobjList=new WebShow.FlexObjectList(false);this.fvarMap=new WebShow.Map()},addObject:function(a){if(typeof(a)!="object"){throw new Error(WebShow.ErrorStr.errCanNotAddNonObjectToRepository)}if(a.getName&&a.getName()){return this.getObjList().add(a)}else{throw new Error(WebShow.ErrorStr.errCanNotAddNoNameObjToRepository)}},removeObject:function(a){return this.getObjList().remove(a)},getObject:function(a){return this.getObjList().getItem(a)},getObjectsLength:function(){return this.getObjList().getLength()},findObject:function(d,f){for(var c=0,b=this.getObjectsLength();c<b;++c){var e=this.getObject(c);var a=(d&&(e.getName()!=d))||(f&&(!(e instanceof f)));if(!a){return e}}return null}});WebShow.AppMode={SimplePage:"simple",EmbedPage:"embedded",FrameEmbeded:"iframe"};WebShow.SlideElemRelation={FREE:"free",SAME_ANCESTOR:"sameAncestor"};WebShow.AppState={INITAL:1,LOADING:2,LOADED:3,PREPARE_RUN:17,RUNNING:20,OPER_EXECUTING:31,OPER_FINISHED:32,OPER_REVERSED:34};WebShow.AppSlideState={INITIAL:0,SLIDE_CREATING:4,SLIDE_CREATED:5,SLIDE_ADDING:6,SLIDE_ADDED:7,SLIDE_REMOVING:8,SLIDE_REMOVED:9,SLIDE_SHOWING:21,SLIDE_SHOWN:22,SLIDE_HIDING:23,SLIDE_HIDDEN:24,SLIDE_SWITCHING:25};WebShow.AppSlideImplementState={INITIAL:1,IMPLEMENTING:2,IMPLEMENTED:3};WebShow.apps={};WebShow.appArray=[];WebShow.app=null;WebShow._addNamedApp=function(b,a){if(a){WebShow.apps[a]=b}};WebShow._addApp=function(b){WebShow.appArray.push(b);WebShow.app=b;var a=b.getName();if(a){WebShow._addNamedApp(b,a)}};WebShow._changeAppName=function(a,b){if(WebShow.apps[b]){var c=WebShow.apps[b];delete WebShow.apps[b];WebShow._addNamedApp(c,a)}};WebShow.lastApp=function(){var a;if(WebShow.appArray.length>0){a=WebShow.appArray[WebShow.appArray.length-1]}else{a=null}WebShow.app=a;return a};WebShow.getAppByName=function(a){return WebShow.apps[a]};WebShow.App=WebShow.createClass(WebShow.Component,{CLASS_NAME:"WebShow.App",WEBSHOW_APP_TITLE_SUFFIX:"WebShow Application",XmlSlideDefListTagName:"slides",DEF_SLIDEFRAME_CLASSNAME:"SlideFrame",DEF_AUTONAVIGATOR_CTRL_ID:"wsNavigatorControl",DEF_AUTONAVIGATOR_SLIDELIST_ID:"wsNavigatorSlideList",initialize:function($super,a,e,d,b,c){$super(null,a);this.initBindingMethods();this._isAutoPlaying=false;this._autoPlayInterval=0;this._autoPlayTimeHandler=null;this._splashOldZIndex=null;this._appUpdatingRef=0;this._suspendedGotoSlide=null;this._autoNavigatorController=null;this._slideFrames=[];this._autoZoomTransformElement=null;this._isFirstDisplayingCover=null;this._forcedFirstDisplaySlideIndex=-1;this.setTitle(e||"");this.setSlideContainer(b);this.setAppElement(c);this.fappMode=d||WebShow.AppMode.SimplePage;this.setSlideFrameClassName(this.DEF_SLIDEFRAME_CLASSNAME);this.changeState(WebShow.AppState.INITAL);WebShow._addApp(this);this.fvisible=true},initProperties:function($super){$super();this.initPublicProp("cmdInterface","WebShow.AppCmdInterface",WebShow.PropertyMode.READ,null);this.initPublicProp("configFileUrl",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("appMode",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("title",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("commands","WebShow.AppCommandList",WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("componentHolders",WebShow.PropertyType.Object,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("appTitleElemId",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"wsAppTitle");this.initPublicProp("splashElemId",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"wsSplash");this.initPublicProp("slideDirId",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"wsSlideDir");this.initPublicProp("slideTitleElemId",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"wsSlideTitle");this.initPublicProp("slideIndexElemId",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"wsSlideIndex");this.initPublicProp("slideCountElemId",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"wsSlideCount");this.initPublicProp("logElemId",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"wsLog");this.initPublicProp("appStateElemId",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"wsAppState");this.initPublicProp("autoNavigatorParentElemId",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"wsNavigator");this.initPublicProp("playerElemId",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"wsPlayer");this.initPublishedProp("appParams",WebShow.PropertyType.Object,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("slideElemRelation",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,WebShow.SlideElemRelation.SAME_ANCESTOR);this.initPublicProp("enableAjaxUrl",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("enableOperationHistory",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true);this.initPublicProp("enableSlideSuspend",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true);this.initPublicProp("loopPlay",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("reprepareSlidesAfterLoop",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true);this.initPublicProp("forcePlayHiddenSlides",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("autoPlayLoop",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("autoPlayAfterRun",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("changeDocumentTitle",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,false);this.initPublicProp("changeDocumentTitleOnSlideShow",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,false);this.initPublicProp("playingSlideContainerClassName",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"PlayingSlideContainer");this.initPublicProp("slideFrameClassName",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"SlideFrame");this.initPublicProp("playingSlideFrameBodyClassName",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"PlayingBody");this.initPublicProp("playingSlideClassName",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"PlayingSlide");this.initPublicProp("currSlideClassName",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"CurrentSlide");this.initPublicProp("forceListHiddenSlideInDir",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true);this.initPublicProp("hiddenSlideDirItemClassName",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"HiddenSlideListItem");this.initPublicProp("currSlideDirItemClassName",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"CurrSlideListItem");this.initPublicProp("clickToNextStep",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true);this.initPublicProp("autoCreateNavigator",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,false);this.initPublicProp("iePngFix",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("iePngFixTransImgSrc",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"");this.initPublishedProp("autoZoomer",WebShow.AutoZoomer,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("autoZoomerEnabled",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("autoZoomerOptions",WebShow.PropertyType.Object,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("autoZoomerUsePredefinedRatio",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("autoZoomWidthRatio",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("autoZoomHeightRatio",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("preferedWidth",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("preferedHeight",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("preferedViewportWidth",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("preferedViewportHeight",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("fixedSpaceWidth",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("fixedSpaceHeight",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("appElement",WebShow.PropertyType.Object,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("slideContainer",WebShow.PropertyType.Object,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("appElemId",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("slideContainerId",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,"wsStage");this.initPublicProp("slides","WebShow.FlexObjectList",WebShow.PropertyMode.READ,this.getChildComponents());this.initPublicProp("slideDefs","WebShow.SlideDefList",WebShow.PropertyMode.READ,null);this.initPublishedProp("slideDefTemplates","WebShow.SlideDefTemplate",WebShow.PropertyMode.READWRITE,null);this.initPublicProp("defSlideDefTemplate","WebShow.SlideDefTemplate",WebShow.PropertyMode.READ,null);this.initPublicProp("currSlide","WebShow.Slide",WebShow.PropertyMode.READWRITE,null);this.initPublicProp("currSlideIndex",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,-1);this.initPublicProp("appearingSlide","WebShow.Slide",WebShow.PropertyMode.READ,null);this.initPublicProp("prevSlide","WebShow.Slide",WebShow.PropertyMode.READWRITE,null);this.initPublicProp("coverSlideIndex",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,0);this.initPublishedProp("autoPlayInterval",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("autoHandleEmbededSlideLinks",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true);this.initPublicProp("ensureSlideReadyRange",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("currCustomOperation","WebShow.Operation",WebShow.PropertyMode.READ,null);this.initPublishedProp("operationInstantly",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("operationHistory","WebShow.OperationHistory",WebShow.PropertyMode.READ,null);this.initPublishedProp("repository","WebShow.ObjRepository",WebShow.PropertyMode.READWRITE,null);this.initPublicProp("htmlPageManager","WebShow.HtmlPageManager",WebShow.PropertyMode.READ,null);this.initPublicProp("isAppUpdating",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READ,false);this.initState("state",WebShow.AppState.INITIAL);this.initState("slideImplementState",WebShow.AppSlideImplementState.INITIAL);this.initState("slideState",WebShow.AppSlideState.INITIAL);this.initPublicEvent("onLoad",null);this.initPublicEvent("onAppReady",null);this.initPublicEvent("onCreateSlide",null);this.initPublicEvent("onAllSlidesCreated",null);this.initPublicEvent("onStateChanged",null);this.initPublicEvent("onStateTextChanged",null);this.initPublicEvent("onSlideSwitched",null);this.initPublicEvent("onFirstSlideDisplayed",null);this.initPublicEvent("onAutoPlayStart",null);this.initPublicEvent("onAutoPlayStop",null)},initPropertyValues:function($super){$super();this.fcmdInterface=new WebShow.AppCmdInterface(this);this.fcomponentHolders={};this.fappParams={};this.getSlides().setOwnChildren(true);this.fslideDefs=new WebShow.SlideDefList(this);this.getSlideDefs().setOwnChildren(true);this.fslideDefTemplates=new WebShow.SlideDefTemplateList();this.foperationHistory=new WebShow.OperationHistory();this.frepository=new WebShow.ObjRepository();this.fhtmlPageManager=new WebShow.HtmlPageManager();this.fcommands=new WebShow.AppCommandList(this);this.fcommands.setAutoImplementEmbeddedCommandAttribs(false);this.fautoZoomer=new WebShow.AutoZoomer()},initBindingMethods:function(){this.reactSlideShowingBinding=this.reactSlideShowing.bind(this);this.reactSlideShownBinding=this.reactSlideShown.bind(this);this.reactSlideHidingBinding=this.reactSlideHiding.bind(this);this.reactSlideHiddenBinding=this.reactSlideHidden.bind(this);this.reactPresentationClickEventBinding=this.reactPresentationClickEvent.bindAsEventListener(this);this.reactSlideOperationExecutingBinding=this.reactSlideOperationExecuting.bind(this);this.reactSlideOperationFinishBinding=this.reactSlideOperationFinish.bind(this);this.reactSlideOperationReversedBinding=this.reactSlideOperationReversed.bind(this);this.reactCustomOperationExecutingBinding=this.reactCustomOperationExecuting.bind(this);this.reactCustomOperationFinishBinding=this.reactCustomOperationFinish.bind(this);this.reactCustomOperationReversedBinding=this.reactCustomOperationReversed.bind(this);this.reactSlideDirItemClickBinding=this.reactSlideDirItemClick.bindAsEventListener(this)},clean:function(){this.getCommands().clear();this.clearSlides(true);this.getHtmlPageManager().clearLoaders()},free:function($super){this.clearSlides(true);this.getHtmlPageManager().free();this.getCmdInterface().free();this.getCommands().free();this.getAutoZoomer().free();this.uninstallClickEventListener();$super();if(this.getName()){delete WebShow.apps[this.getName()]}WebShow.appArray=WebShow.appArray.without(this);if(WebShow.app==this){WebShow.app=WebShow.lastApp()}},createChildComponents:function($super){return(new WebShow.SlideList())},inspect:function($super){return $super()},changeState:function(c){var b=this.getStateValue("state");this.setStateValue("state",c);var a=WebShow.AppStateText.getText(c);this.updateAppStateElem(a);this.evokeEventHandler(this.onStateChanged,this,b,c);this.evokeEventHandler(this.onStateTextChanged,this,a)},changeSlideImplementState:function(a){this.setStateValue("slideImplementState",a)},changeSlideState:function(a){this.setStateValue("slideState",a)},isLoading:function(){return(this.getState()>=WebShow.AppState.LOADING)&&(this.getState()<WebShow.AppState.LOADED)},isRunning:function(){return(this.getState()>=WebShow.AppState.RUNNING)},getIsAppUpdating:function(){return this._appUpdatingRef>0},beginUpdate:function(){this._appUpdatingRef++},endUpdate:function(){if(this._appUpdatingRef>0){this._appUpdatingRef--}if(!this.getIsAppUpdating()){this.appUpdateFinished()}},forceEndUpdate:function(){this._appUpdatingRef=0;this.appUpdateFinished()},appUpdateFinished:function(){this.updateAppTitleElem();this.updateAutoNavigator();this.updateSlideDir();this.updateSlideCountElem();this.currSlideChanged()},getSlideElemRelation:function(){return this.getAppParams().slideElemRelation},setSlideElemRelation:function(a){this.getAppParams().slideElemRelation=a},getEnableAjaxUrl:function(){return this.getAppParams().enableAjaxUrl},setEnableAjaxUrl:function(a){this.getAppParams().enableAjaxUrl=a},getEnableSlideSuspend:function(){return this.getAppParams().enableSlideSuspend},setEnableSlideSuspend:function(a){this.getAppParams().enableSlideSuspend=a},getEnableOperationHistory:function(){return this.getAppParams().enableOperationHistory},setEnableOperationHistory:function(a){this.getAppParams().enableOperationHistory=a},getLoopPlay:function(){return this.getAppParams().loopPlay},setLoopPlay:function(a){this.getAppParams().loopPlay=!(!a)},getReprepareSlidesAfterLoop:function(){return this.getAppParams().reprepareSlidesAfterLoop},setReprepareSlidesAfterLoop:function(a){this.getAppParams.reprepareSlidesAfterLoop=a},getAutoPlayLoop:function(){return this.getAppParams().autoPlayLoop},setAutoPlayLoop:function(a){this.getAppParams().autoPlayLoop=a},getAutoPlayAfterRun:function(){return this.getAppParams().autoPlayAfterRun},setAutoPlayAfterRun:function(a){this.getAppParams().autoPlayAfterRun=a},getForcePlayHiddenSlides:function(){return this.getAppParams().forcePlayHiddenSlides},setForcePlayHiddenSlides:function(a){this.getAppParams().forcePlayHiddenSlides=!(!a)},getChangeDocumentTitle:function(){return !(!this.getAppParams().changeDocumentTitle)},setChangeDocumentTitle:function(a){this.getAppParams().changeDocumentTitle=!(!a)},getChangeDocumentTitleOnSlideShow:function(){return !(!this.getAppParams().changeDocumentTitleOnSlideShow)},setChangeDocumentTitleOnSlideShow:function(a){this.getAppParams().changeDocumentTitleOnSlideShow=!(!a)},getClickToNextStep:function(){return !(!this.getAppParams().clickToNextStep)},setClickToNextStep:function(a){this.getAppParams().clickToNextStep=!!a},getAppTitleElemId:function(){return this.getComponentHolders().appTitleElemId||this.getAppParams().appTitleElemId},setAppTitleElemId:function(a){if(this.getAppTitleElemId()!=a){this.getComponentHolders().appTitleElemId=a;this.updateAppTitleElem()}},getSplashElemId:function(){return this.getComponentHolders().splashElemId||this.getAppParams().splashElemId},setSplashElemId:function(a){this.getComponentHolders().splashElemId=a},getSlideDirId:function(){return this.getComponentHolders().slideDirId||this.getAppParams().slideDirId},setSlideDirId:function(a){if(this.getSlideDirId()!=a){this.getComponentHolders().slideDirId=a;this.updateSlideDir()}},getSlideTitleElemId:function(){return this.getComponentHolders().slideTitleElemId||this.getAppParams().slideTitleElemId},setSlideTitleElemId:function(a){if(this.getSlideTitleElemId()!=a){this.getComponentHolders().slideTitleElemId=a;this.updateSlideTitleElem()}},getSlideIndexElemId:function(){return this.getComponentHolders().slideIndexElemId||this.getAppParams().slideIndexElemId},setSlideIndexElemId:function(a){if(this.getSlideIndexElemId()!=a){this.getComponentHolders().slideIndexElemId=a;this.updateSlideIndexElem()}},getSlideCountElemId:function(){return this.getComponentHolders().slideCountElemId||this.getAppParams().slideCountElemId},setSlideCountElemId:function(a){if(this.getSlideCountElemId()!=a){this.getComponentHolders().slideCountElemId=a;this.updateSlideCountElem()}},getAppStateElemId:function(){return this.getComponentHolders().appStateElemId||this.getAppParams().appStateElemId},setAppStateElemId:function(a){this.getComponentHolders().appStateElemId=a},getLogElemId:function(){return this.getComponentHolders().logElemId||this.getAppParams().logElemId},setLogElemId:function(a){this.getComponentHolders().logElemId=a;if(a){WebShow.Logger.element=this.getAppDoc().getElementById(a)}else{WebShow.Logger.element=null}},getAutoNavigatorParentElemId:function(){return this.getComponentHolders().autoNavigatorParentElemId||this.getAppParams().autoNavigatorParentElemId},setAutoNavigatorParentElemId:function(a){this.getComponentHolders().autoNavigatorParentElemId=a},getPlayerElemId:function(){return this.getComponentHolders().playerElemId||this.getAppParams().playerElemId},setPlayerElemId:function(a){this.getComponentHolders().playerElemId=a},getPlayingSlideClassName:function(){return this.getAppParams().playingSlideClassName||""},setPlayingSlideClassName:function(a){this.getAppParams().playingSlideClassName=a},getCurrSlideClassName:function(){return this.getAppParams().currSlideClassName||""},setCurrSlideClassName:function(a){this.getAppParams().currSlideClassName=a},getPlayingSlideContainerClassName:function(){return this.getAppParams().playingSlideContainerClassName||""},setPlayingSlideContainerClassName:function(a){this.getAppParams().playingSlideContainerClassName=a},getSlideFrameClassName:function(){return this.getAppParams().slideFrameClassName||""},setSlideFrameClassName:function(a){this.getAppParams().slideFrameClassName=a;this.getHtmlPageManager().setDefFrameClassName(a)},getPlayingSlideFrameBodyClassName:function(){return this.getAppParams().playingSlideFrameBodyClassName||""},setPlayingSlideFrameBodyClassName:function(a){this.getAppParams().playingSlideFrameBodyClassName=a},getForceListHiddenSlideInDir:function(){return this.getAppParams().forceListHiddenSlideInDir||false},setForceListHiddenSlideInDir:function(a){this.getAppParams().forceListHiddenSlideInDir=!!a},getHiddenSlideDirItemClassName:function(){return this.getAppParams().hiddenSlideDirItemClassName||""},setHiddenSlideDirItemClassName:function(a){this.getAppParams().hiddenSlideDirItemClassName=a},getCurrSlideDirItemClassName:function(){return this.getAppParams().currSlideDirItemClassName||this.getCurrSlideClassName()||""},setCurrSlideDirItemClassName:function(a){this.getAppParams().currSlideDirItemClassName=a},getAutoCreateNavigator:function(){return this.getAppParams().autoCreateNavigator||false},setAutoCreateNavigator:function(a){this.getAppParams().autoCreateNavigator=!!a},getIePngFix:function(){return this.getAppParams().iePngFix||false},setIePngFix:function(a){this.getAppParams().iePngFix=a},getIePngFixTransImgSrc:function(){return this.getAppParams().iePngFixTransImgSrc||""},setIePngFixTransImgSrc:function(a){this.getAppParams().iePngFixTransImgSrc=a},getIePngFixTransImgAbsSrc:function(){var a=this.getIePngFixTransImgSrc();if(!a){return""}else{var b=this.getAppDoc().URL;a=WebShow.URL.relPathToAbs(a,b);return a}},getAutoZoomerEnabled:function(){return this.getAutoZoomer().getEnabled()},setAutoZoomerEnabled:function(a){this.getAutoZoomer().setEnabled(a)},getAutoZoomerOptions:function(){return this.getAutoZoomer().getOptions()},setAutoZoomerOptions:function(a){this.getAutoZoomer().setOptions(a)},getAutoZoomerUsePredefinedRatio:function(){return this.getAutoZoomer().getUsePredefinedRatio()},setAutoZoomerUsePredefinedRatio:function(a){return this.getAutoZoomer().setUsePredefinedRatio(a)},getAutoZoomWidthRatio:function(){return this.getAutoZoomer().getWidthRatio()},setAutoZoomWidthRatio:function(a){this.getAutoZoomer().setWidthRatio(a)},getAutoZoomHeightRatio:function(){return this.getAutoZoomer().getHeightRatio()},setAutoZoomHeightRatio:function(a){this.getAutoZoomer().setHeightRatio(a)},getPreferedWidth:function(){return this.getAutoZoomer().getPreferedWidth()},setPreferedWidth:function(a){this.getAutoZoomer().setPreferedWidth(a)},getPreferedHeight:function(){return this.getAutoZoomer().getPreferedHeight()},setPreferedHeight:function(a){this.getAutoZoomer().setPreferedHeight(a)},getPreferedViewportWidth:function(){return this.getAutoZoomer().getPreferedViewportWidth()},setPreferedViewportWidth:function(a){this.getAutoZoomer().setPreferedViewportWidth(a)},getPreferedViewportHeight:function(){return this.getAutoZoomer().getPreferedViewportHeight()},setPreferedViewportHeight:function(a){this.getAutoZoomer().setPreferedViewportHeight(a)},getFixedSpaceWidth:function(){return this.getAutoZoomer().getFixedWidth()},setFixedSpaceWidth:function(a){this.getAutoZoomer().setFixedWidth(a)},getFixedSpaceHeight:function(){return this.getAutoZoomer().getFixedHeight()},setFixedSpaceHeight:function(a){this.getAutoZoomer().setFixedHeight(a)},setVisible:function($super,a){if(this.isLoading()){this.fvisible=a}else{$super(a)}},show:function(){if(this.getAppElement()){WebShow.ElementUtils.show(this.getAppElement())}},hide:function(){if(this.getAppElement()){WebShow.ElementUtils.hideVisibility(this.getAppElement())}},updateVisibility:function($super){$super()},run:function(){this.changeState(WebShow.AppState.PREPARE_RUN);this._isFirstDisplayingCover=true;this.initAjaxUrl();this.installClickEventListener();this.appUpdateFinished();this.implementEmbededCommandAttribs();this.simpleHideAllSlides();this.hideSplashElement();this.displayFirstSlide();this.updateVisibility();this.changeState(WebShow.AppState.RUNNING)},appReady:function(){this.evokeEventHandler(this.onAppReady,this);this.initAutoPlay()},reactPresentationClickEvent:function(b){var a=Event.element(b);if(!WebShow.ElementUtils.isClickableElement(a)){if(this.getClickToNextStep()){this.nextStep()}Event.stop(b)}},installClickEventListener:function(){var c=this.getSlideContainer();Event.observe(c,"click",this.reactPresentationClickEventBinding);if(this.getAppMode()==WebShow.AppMode.FrameEmbeded){this._slideFrames=this.getFramesOfSlide();for(var b=0,a=this._slideFrames.length;b<a;++b){c=WebShow.FrameUtils.getFrameDocumentFromElement(this._slideFrames[b]);Event.observe(c.body,"click",this.reactPresentationClickEventBinding)}}},uninstallClickEventListener:function(){var c=this.getSlideContainer();Event.stopObserving(c,"click",this.reactPresentationClickEventBinding);if(this.getAppMode()==WebShow.AppMode.FrameEmbeded){for(var b=0,a=this._slideFrames.length;b<a;++b){c=WebShow.FrameUtils.getFrameDocumentFromElement(this._slideFrames[b]);Event.stopObserving(c,"click",this.reactPresentationClickEventBinding)}}},saveToXmlElement:function($super,b,c){var a=$super(b,c);this.getSlideDefs().saveToXml(b,this.XmlSlideDefListTagName,c);return a},loadFromXml:function($super,b,d){this.changeState(WebShow.AppState.LOADING);this.beginUpdate();this.clean();$super(b,d);var a=b.getElementsByTagName(this.XmlSlideDefListTagName);if(a.length>0){var c=a[a.length-1];this.getSlideDefs().loadFromXml(c,d)}this.changeState(WebShow.AppState.LOADED);this.implementSlideDefs();this.endUpdate();this.setLogElemId(this.getLogElemId())},loadFromXmlFile:function($super,a,b,c){this.setConfigFileUrl(a);$super(a,b,c)},implementEmbededCommandAttribs:function(b){var a=b||this.getAppElement()||document.body;this.getCommands().implementEmbededCommandAttribs(a,null,[this.getSlideContainer()])},uninstallAllCommands:function(){this.getCommands().uninstallAllCommands()},canSortSlideElements:function(){return this.getAppMode()!=WebShow.AppMode.FrameEmbeded},sortSlideElements:function(){if(!this.canSortSlideElements()){throw new Error(WebShow.ErrorStr.errUnableToSortSlideElemInFrameMode);return}var g=[];var c=this.getDirectSlideElemParent();for(var e=0,b=this.getSlideCount();e<b;++e){var a=this.getSlideAt(e);var f=a.getElement();var d=null;if(g.length>0){d=g.last().nextSibling}if(d){if(d!=f){c.insertBefore(f,d)}}else{c.appendChild(f)}g.push(f)}},slideCount:function(){return this.getSlides().getLength()},getSlideCount:function(){return this.getSlides().getLength()},indexOfSlide:function(a){return this.indexOfChild(a)},hasSlide:function(a){return this.hasChild(a)},slidesChanged:function(){if((!this.isLoading())&&(!this.isImplementingSlides())){this.updateSlideDir();this.updateSlideCountElem();this.currSlideChanged()}},removeSlide:function(b,c){this.changeSlideState(WebShow.AppSlideState.SLIDE_REMOVING);if(b==this.getCurrSlide()){this.setCurrSlide(null)}this.removeSlidePlayingClass(b);this.uninstallSlideEventListener(b);var a=this.removeChild(b);if(c&&a){a.free();a=null}this.changeSlideState(WebShow.AppSlideState.SLIDE_REMOVED);this.slidesChanged();return a},removeSlideAt:function(c,b){var a=this.getSlideAt(c);if(a){this.removeSlide(a,b)}},clearSlides:function(a){for(var b=this.slideCount()-1;b>=0;--b){this.removeSlideAt(b,a)}this.setCurrSlide(null)},addSlideByIndex:function(b,d){this.changeSlideState(WebShow.AppSlideState.SLIDE_ADDING);if(this.getSlideElemRelation()==WebShow.SlideElemRelation.SAME_ANCESTOR){var e=b.getElement();var c=this.getDirectSlideElemParent();if(!Element.descendantOf(e,c)){c.appendChild(e)}}var a=this.addChild(b,d);this.addSlidePlayingClass(b);this.installSlideEventListener(b);this.changeSlideState(WebShow.AppSlideState.SLIDE_ADDED);this.slidesChanged();return a},addSlide:function(c){var g=0;var b=null;var a=c.getDefinerOrder();for(var d=this.slideCount()-1;d>=0;--d){var f=this.getSlideAt(d);var e=f.getDefinerOrder();if(a>=e){b=this.addSlideByIndex(c,d+1);break}}if(!b){g=0;var b=this.addSlideByIndex(c,g)}c.setOwner(this);return b},createSlide:function(f,c,e,b,d){this.changeSlideState(WebShow.AppSlideState.SLIDE_CREATING);var a=new WebShow.Slide(null,f,c,e,b||0,d);this.addSlide(a);this.changeSlideState(WebShow.AppSlideState.SLIDE_CREATED);return a},addSlidePlayingClass:function(c){var b=this.getPlayingSlideClassName();if(b){var e=c.getElement();Element.addClassName(e,b)}if(this.isInFrameMode()&&this.getPlayingSlideFrameBodyClassName()){var a=e.ownerDocument.documentElement;Element.addClassName(a,this.getPlayingSlideFrameBodyClassName());var d=e.ownerDocument.body;Element.addClassName(d,this.getPlayingSlideFrameBodyClassName())}},removeSlidePlayingClass:function(b){if(this.getPlayingSlideClassName()){var d=b.getElement();Element.removeClassName(d,this.getPlayingSlideClassName())}if(this.isInFrameMode()&&this.getPlayingSlideFrameBodyClassName()){var a=d.ownerDocument.documentElement;Element.removeClassName(a,this.getPlayingSlideFrameBodyClassName());var c=d.ownerDocument.body;Element.removeClassName(c,this.getPlayingSlideFrameBodyClassName())}},installSlideEventListener:function(a){a.onInternalShowing=this.reactSlideShowingBinding;a.onInternalShown=this.reactSlideShownBinding;a.onInternalHiding=this.reactSlideHidingBinding;a.onInternalHidden=this.reactSlideHiddenBinding;a.onInternalOperationExecuting=this.reactSlideOperationExecutingBinding;a.onInternalOperationFinish=this.reactSlideOperationFinishBinding;a.onInternalOperationReversed=this.reactSlideOperationReversedBinding},uninstallSlideEventListener:function(a){a.onInternalShowing=null;a.onInternalShown=null;a.onInternalHiding=null;a.onInternalHidden=null;a.onInternalOperationExecuting=null;a.onInternalOperationFinish=null;a.onInternalOperationReversed=null},addSlideContainerClass:function(a){if(!a){a=this.getSlideContainer()}if(this.getPlayingSlideContainerClassName()&&a){Element.addClassName(a,this.getPlayingSlideContainerClassName())}},removeSlideContainerClass:function(a){if(!a){a=this.getSlideContainer()}if(this.getPlayingSlideContainerClassName()&&a){Element.removeClassName(a,this.getPlayingSlideContainerClassName())}},createSlideDef:function(c,d,b,a,e){return this.getSlideDefs().createSlideDef(c,d,b,a,e)},implementSlideDefs:function(){this.showPlayerElement();this.showSplashElement();this.beginUpdate();this.changeSlideImplementState(WebShow.AppSlideImplementState.IMPLEMENTING);this.setAutoHandleEmbededSlideLinks(this.getSlideDefs().getAutoHandleEmbededSlideLinks());this.getHtmlPageManager().setDefFrameClassName(this.getSlideFrameClassName());var a=this.getSlideDefs().getEnsureSlideReadyRange();if(a==null){a=2}this.setEnsureSlideReadyRange(a);this.getSlideDefs().implementSlideDefsAsyn(this.implementSlideDefsCallBackSingle.bind(this),this.implementSlideDefsCallBackSummary.bind(this))},implementSlideDefsCallBackSingle:function(a){this.evokeEventHandler(this.onCreateSlide,this,a)},implementSlideDefsCallBackSummary:function(a){this.changeSlideImplementState(WebShow.AppSlideImplementState.IMPLEMENTED);this.endUpdate();this.allSlidesCreated(a);this.run()},allSlidesCreated:function(a){this.evokeEventHandler(this.onAllSlidesCreated,this,a);this.evokeEventHandler(this.onLoad,this)},isImplementingSlides:function(){return(this.getSlideImplementState()>=WebShow.AppSlideImplementState.IMPLEMENTING)&&(this.getSlideImplementState()<WebShow.AppSlideImplementState.IMPLEMENTED)},getDefSlideDefTemplate:function(){if(this.slideDefTemplateCount()>0){return this.getSlideDefTemplates().getItem(0)}else{return null}},getSlideDefTemplateByName:function(a){return this.getSlideDefTemplates().getSlideDefTemplateByName(a)},getSlideDefTemplate:function(a){if(!a){return this.getDefSlideDefTemplate()}else{return this.getSlideDefTemplateByName(a)}},getSlideDefTemplateOperationDefs:function(a){var b=this.getSlideDefTemplate(a);if(b){return b.getOperationDefs()}else{return null}},getSlideDefTemplateAppearOperationDefs:function(a){var b=this.getSlideDefTemplate(a);if(b){return b.getAppearOperationDefs()}else{return null}},getSlideDefTemplateDisappearOperationDefs:function(a){var b=this.getSlideDefTemplate(a);if(b){return b.getDisappearOperationDefs()}else{return null}},getSlideDefTemplatePrevSlideDisappearOperationDefs:function(a){var b=this.getSlideDefTemplate(a);if(b&&b.hasPrevSlideDisappearOperationDefs()){return b.getPrevSlideDisappearOperationDefs()}else{return null}},slideDefTemplateCount:function(){return this.getSlideDefTemplates().getLength()},createSlideDefTemplate:function(a){return this.getSlideDefTemplates().createSlideDefTemplate(a)},getFramesOfSlide:function(){var a=[];if(this.getAppMode()==WebShow.AppMode.FrameEmbeded){for(var c=0,b=this.getSlideCount();c<b;++c){var d=this.getFrameOfSlide(this.getSlideAt(c));if(a.indexOf(d)<0){a.push(d)}}}this._slideFrames=a;return a},getFrameOfSlide:function(a){if(this.getAppMode()==WebShow.AppMode.FrameEmbeded){if(a&&a.getElement()){var b=a.getElement();if(b){return WebShow.FrameUtils.getFrameOfInsideElement(b)}}}return null},getActiveFrame:function(){return this.getFrameOfSlide(this.getCurrSlide())},isInSimplePageMode:function(){return this.getAppMode()==WebShow.AppMode.SimplePage},isInFrameMode:function(){return this.getAppMode()==WebShow.AppMode.FrameEmbeded},isInEmbedMode:function(){return this.getAppMode()==WebShow.AppMode.EmbedPage},getName:function(){return this.fname},setName:function(a){WebShow._changeAppName(a,this.fname);this.fname=a},setTitle:function(a){this.ftitle=a;this.updateAppTitleElem()},getBaseUri:function(){return this.getSlideDefs().getBaseUri()},setBaseUri:function(a){this.getSlideDefs().setBaseUri(a)},setAppMode:function(a){if(a!=this.getAppMode()){this.clearSlides(true);this.getHtmlPageManager().clearLoaders();if(a==WebShow.AppMode.EmbedPage){this.getHtmlPageManager().setDefLoadMethod(WebShow.HtmlPageLoaderMethod.XHR)}else{this.getHtmlPageManager().setDefLoadMethod(WebShow.HtmlPageLoaderMethod.FRAME)}this.fappMode=a;if(!this.getIsAppUpdating()){this.implementSlideDefs()}}},setTitle:function(a){this.ftitle=a;this.updateDocumentTitle()},getSlideContainer:function(){if(this.fslideContainer){return this.fslideContainer}else{if(this.fappElement){return this.fappElement}else{return null}}},setSlideContainer:function(a){if(a!=this.fslideContainer){var b=this.fslideContainer;this.removeSlideContainerClass(b);this.fslideContainer=a;this.addSlideContainerClass(a);this.slideContainerChanged(b,a)}},getSlideContainerId:function(){if(this.getSlideContainer()){return this.getSlideContainer().id}else{return this.fslideContainerId}},setSlideContainerId:function(b){if(this.getSlideContainerId()!=b){this.fslideContainerId=b;if(b&&this.getAppDoc()){var a=this.getAppDoc().getElementById(b);if(a){this.setSlideContainer(a)}}}},slideContainerChanged:function(c,b){this.getAutoZoomer().unprepare();this.getAutoZoomer().setElement(b);this.getAutoZoomer().prepare();var a=this.getDirectSlideElemParent();this.getHtmlPageManager().setDefParentElement(a)},getDirectSlideElemParent:function(){return this.getAutoZoomer().getActualZoomElem()||this.getSlideContainer()},getAppElement:function(a){if(this.fappElement){return this.fappElement}else{return null}},setAppElement:function(a){if(this.fappElement!=a){var b=this.fappElement;this.fappElement=a;this.updateVisibility();this.appElementChanged(b,a)}},getAppElemId:function(){if(this.getAppElement()){return this.getAppElement().id}else{return this.fappElemId}},setAppElemId:function(b){if(this.getAppElemId()!=b){this.fappElemId=b;if(b&&this.getAppDoc()){var a=this.getAppDoc().getElementById(b);if(a){this.setAppElement(a)}}}},appElementChanged:function(b,a){if(b){this.uninstallAllCommands()}this.getCommands().setRootElem(a);if((!this.getIsAppUpdating())&&(this.isRunning())){this.implementEmbededCommandAttribs()}},getAppDoc:function(){if(!this.getAppElement()){return document}else{return this.getAppElement().ownerDocument}},getSlideLoadTimeout:function(){return this.getSlideDefs().getLoadTimeout()},setSlideLoadTimeout:function(a){this.getSlideDefs().setLoadTimeout(a)},getSlides:function(){return this.getChildComponents()},getSlideAt:function(a){return this.getChildAt(a)},setConfigFileUrl:function(a){if(!a){this.getSlideDefs().setImplicitBaseUri(null)}else{var b=WebShow.URL.getBasePath(a);this.getSlideDefs().setImplicitBaseUri(b)}},findSlideByName:function(a){return this.getSlides().findSlideByName(a)},switchToSlide:function(b,d,a,c){if(this.isSwitchingSlides()){if(this.getEnableSlideSuspend()){this.suspendSwitchSlide(b)}return}if(b==null){}else{if(!this.hasSlide(b)){return}}if(this.fcurrSlide==b){return}if(!d){d=this.getCurrSlide()}var e=new this.SwitchSlideOperation("slideSwitch",this,b,d);this.execCustomOperation(e,a,c)},isSwitchingSlides:function(){if(this.getCurrCustomOperation()){return(this.getCurrCustomOperation().isInheritedFrom(this.SwitchSlideOperation))}else{return false}},slideSwitchDone:function(c,b){this.evokeEventHandler(this.onSlideSwitched,this,c,b);if((c==this.getFirstDisplayedSlide())&&(this._isFirstDisplayingCover)){this._isFirstDisplayingCover=false;this.firstSlideDisplayed()}if(this._suspendedGotoSlide){var a=this._suspendedGotoSlide;this._suspendedGotoSlide=null;this.gotoSlide(a)}},suspendSwitchSlide:function(a){this._suspendedGotoSlide=a},forceSwitchToSlide:function(a){if(this.isSwitchingSlides()){this.suspendSwitchSlide(a)}else{this.switchToSlide(a)}},_setCurrSlideValue:function(e){var d=this.getCurrSlideClassName();if((d)&&(this.fcurrSlide)){Element.removeClassName(this.fcurrSlide.getElement(),d)}this.fcurrSlide=e;if((d)&&(this.fcurrSlide)){Element.addClassName(this.fcurrSlide.getElement(),d)}this.currSlideChanged();var b=this.getEnsureSlideReadyRange();var f=this.getCurrSlideIndex();for(var c=f-b,a=f+b;c<=a;++c){if((c>=0)&&(c<this.slideCount())){this.getSlideAt(c).ensureSlideReady()}}},setCurrSlide:function(a){if(a==null){if(this.getCurrSlide()){this.getCurrSlide().simpleHide()}this._setCurrSlideValue(null)}else{this.switchToSlide(a)}},getCurrSlideIndex:function(){return this.indexOfSlide(this.getCurrSlide())},setCurrSlideIndex:function(b){if((b>=0)&&(b<this.slideCount())){var a=this.getSlideAt(b);this.setCurrSlide(a)}},isCurrSlideHidden:function(){if(this.getCurrSlide()){return this.getCurrSlide().getIsHidden()}else{return false}},getFirstSlide:function(a){if(a||this.getForcePlayHiddenSlides()){return this.getSlides().first()}else{return this.getFirstPublicSlide()}},isCurrFirstSlide:function(){var a=this.getForcePlayHiddenSlides()||this.isCurrSlideHidden();return(this.getCurrSlide()==this.getFirstSlide(a))},getLastSlide:function(a){if(a||this.getForcePlayHiddenSlides()){return this.getSlides().last()}else{return this.getLastPublicSlide()}},isCurrLastSlide:function(){var a=this.getForcePlayHiddenSlides()||this.isCurrSlideHidden();return(this.getCurrSlide()==this.getLastSlide(a))},getFirstPublicSlide:function(){for(var b=0,a=this.slideCount();b<a;++b){if(!this.getSlideAt(b).getIsHidden()){return this.getSlideAt(b)}}return null},getLastPublicSlide:function(){for(var a=this.slideCount()-1;a>=0;--a){if(!this.getSlideAt(a).getIsHidden()){return this.getSlideAt(a)}}return null},getNextSlide:function(a){if(a||this.getForcePlayHiddenSlides()){return this.getSlideAt(this.getCurrSlideIndex()+1)}else{return this.getNextPublicSlide()}},getPrevSlide:function(a){if(a||this.getForcePlayHiddenSlides()){return this.getSlideAt(this.getCurrSlideIndex()-1)}else{return this.getPrevPublicSlide()}},getNextPublicSlide:function(){var b=this.getCurrSlideIndex()+1;for(var c=b,a=this.slideCount();c<a;++c){if(!this.getSlideAt(c).getIsHidden()){return this.getSlideAt(c)}}return null},getPrevPublicSlide:function(){var a=this.getCurrSlideIndex()-1;for(var b=a;b>=0;--b){if(!this.getSlideAt(b).getIsHidden()){return this.getSlideAt(b)}}return null},reactSlideShowing:function(a){this.changeSlideState(WebShow.AppSlideState.SLIDE_SHOWING)},reactSlideShown:function(a){this.changeSlideState(WebShow.AppSlideState.SLIDE_SHOWN)},reactSlideHiding:function(a){this.changeSlideState(WebShow.AppSlideState.SLIDE_HIDING)},reactSlideHidden:function(a){this.changeSlideState(WebShow.AppSlideState.SLIDE_HIDDEN)},currSlideChanged:function(){this.updateDocumentTitle();this.updateSlideTitleElem();this.updateSlideIndexElem();this.updateCurrSlideInDir();this.updateCurrSlideInAutoNavSlideList();if(this.getEnableAjaxUrl()){this.updateAjaxUrl()}},getCoverSlide:function(){return this.getSlideAt(this.getCoverSlideIndex())},gotoCoverSlide:function(){this.displayCoverSlide()},displayCoverSlide:function(){var a=this.getSlideAt(this.getCoverSlideIndex());if(a){a.ensureSlideReady();this.switchToSlide(a,null,true)}},displayFirstSlide:function(b){var a=this.getFirstDisplayedSlide();if(a){a.ensureSlideReady();var b=Prototype.Browser.IE&&(this.getSlideCount()>50);this.switchToSlide(a,null,true,b)}},getFirstDisplayedSlide:function(){var a=null;if(this._forcedFirstDisplaySlideIndex>=0){a=this.getSlideAt(this._forcedFirstDisplaySlideIndex)}if(!a){a=this.getCoverSlide()}return a},firstSlideDisplayed:function(){this.evokeEventHandler(this.onFirstSlideDisplayed,this,this.getFirstDisplayedSlide());this.appReady();this._forcedFirstDisplaySlideIndex=-1},simpleHideAllSlides:function(){for(var b=0,a=this.slideCount();b<a;++b){this.getSlideAt(b).simpleHide()}},simpleHideAllSlidesExcept:function(b){for(var c=0,a=this.slideCount();c<a;++c){if(c!=b){this.getSlideAt(c).simpleHide()}}},resetAllSlidesPrepareState:function(){for(var b=0,a=this.slideCount();b<a;++b){this.getSlideAt(b).resetPrepareState()}},gotoSlide:function(a){this.setCurrSlide(a)},gotoSlideIndex:function(a){this.setCurrSlideIndex(a)},forceToGotoSlideIndex:function(a){if(this.isRunning()){this.gotoSlideIndex(a)}else{this._forcedFirstDisplaySlideIndex=a}},gotoSlideOffset:function(b){var a=this.getCurrSlideIndex()+b;this.gotoSlideIndex(a)},gotoSlideName:function(b){var a=this.findSlideByName(b);if(a){this.gotoSlide(a)}},toNextSlide:function(a){a=a||this.getForcePlayHiddenSlides();if(this.currSlideIsLast(a)&&this.getLoopPlay()){this.toFirstSlide(a)}else{if(this.getNextSlide(a)){this.setCurrSlide(this.getNextSlide(a))}}},gotoNextSlide:function(){var a=false;if(this.getCurrSlide()){a=this.getCurrSlide().getIsHidden()||this.getForcePlayHiddenSlides()}this.toNextSlide(a)},toPrevSlide:function(a){a=a||this.getForcePlayHiddenSlides();if(this.currSlideIsFirst(a)&&this.getLoopPlay()){this.toLastSlide(a)}else{if(this.getPrevSlide(a)){this.setCurrSlide(this.getPrevSlide(a))}}},gotoPrevSlide:function(){var a=this.getCurrSlide().getIsHidden()||this.getForcePlayHiddenSlides();this.toPrevSlide(a)},toFirstSlide:function(a){if(a||this.getForcePlayHiddenSlides()){this.setCurrSlideIndex(0)}else{this.toFirstPublicSlide()}},toFirstPublicSlide:function(){var a=this.getFirstPublicSlide();if(a){this.setCurrSlide(a)}},gotoFirstSlide:function(){var a=this.getCurrSlide().getIsHidden()||this.getForcePlayHiddenSlides();a?this.toFirstSlide():this.toFirstPublicSlide()},toLastSlide:function(a){if(a||this.getForcePlayHiddenSlides()){this.setCurrSlideIndex(this.slideCount()-1)}else{this.toLastPublicSlide()}},toLastPublicSlide:function(){var a=this.getLastPublicSlide();if(a){this.setCurrSlide(a)}},gotoLastSlide:function(){var a=this.getCurrSlide().getIsHidden()||this.getForcePlayHiddenSlides();a?this.toLastSlide():this.toLastPublicSlide()},currSlideIsFirst:function(a){if(this.getCurrSlide()){return(this.getCurrSlide()==this.getFirstSlide(a))}else{return(this.getSlides().getLength()==0)}},currSlideIsLast:function(a){if(this.getCurrSlide()){return(this.getCurrSlide()==this.getLastSlide(a))}else{return(this.getSlides().getLength()==0)}},appearingSlideIsFirst:function(a){if(this.getAppearingSlide()){return(this.getAppearingSlide()==this.getFirstSlide(a))}else{return null}},appearingSlideIsLast:function(a){if(this.getAppearingSlide()){return(this.getAppearingSlide()==this.getLastSlide(a))}else{return null}},getCurrOperation:function(){if(this.getCurrCustomOperation()){return this.getCurrCustomOperation()}if(this.getCurrSlide()){return this.getCurrSlide().getCurrOperation()}else{return null}},execNextOperation:function(){if(this.getCurrSlide()){this.getCurrSlide().execNextOperation()}},reverseCurrOperation:function(){if(this.getCurrCustomOperation()){this.getCurrCustomOperation().reverse()}if(this.getCurrSlide()){this.getCurrSlide().reverseCurrOperation()}},instantExecuteNextOperation:function(){if(this.getCurrSlide()){this.getCurrSlide().instantExecuteNextOperation()}},stopCurrOperation:function(){if(this.getCurrCustomOperation()){this.getCurrCustomOperation().stopExecute()}if(this.getCurrSlide()){this.getCurrSlide().stopCurrOperation()}},cancelCurrOperation:function(){if(this.getCurrCustomOperation()){this.getCurrCustomOperation().cancelExecute()}if(this.getCurrSlide()){this.getCurrSlide().cancelCurrOperation()}},reactSlideOperationFinish:function(a,b){if(b&&this.getEnableOperationHistory()){this.pushOperationToHistory(b)}this.notifyOperationFinished(b)},reactSlideOperationExecuting:function(a,b){this.notifyOperationExecuting(b)},reactSlideOperationReversed:function(a,b){this.notifyOperationReversed(b)},notifyOperationExecuting:function(a){this.changeState(WebShow.AppState.OPER_EXECUTING)},notifyOperationFinished:function(a){this.changeState(WebShow.AppState.OPER_FINISHED);if(this.isAutoPlaying()){this.setNextAutoPlayItem()}},notifyOperationReversed:function(a){this.changeState(WebShow.AppState.OPER_REVERSED)},execCustomOperation:function(b,a,c){if(!b){return}this.fcurrCustomOperation=b;this.installCustomOperationEventHandler(b);if(a){b._byPassHistory=true}if(c||this.getOperationInstantly()){b.executeInstantly()}else{b.execute()}},reactCustomOperationExecuting:function(a){if(a){this.fcurrCustomOperation=a;this.notifyOperationExecuting(a)}},reactCustomOperationFinish:function(a){if(a){if(!a._byPassHistory){this.pushOperationToHistory(a)}else{delete a._byPassHistory}this.fcurrCustomOperation=null;this.uninstallCustomOperationEventHandler(a);this.notifyOperationFinished(a)}},reactCustomOperationReversed:function(a){if(a){this.fcurrCustomOperation=null;this.uninstallCustomOperationEventHandler(a);this.notifyOperationReversed(a)}},installCustomOperationEventHandler:function(a){a.onInternalExecuting=this.reactCustomOperationExecutingBinding;a.onInternalFinish=this.reactCustomOperationFinishBinding;a.onInternalReversed=this.reactCustomOperationReversedBinding},uninstallCustomOperationEventHandler:function(a){a.onInternalExecuting=null;a.onInternalFinish=null;a.onInternalReversed=null},execNamedOperationDefOnElement:function(c,g,a,d){if(c&&g&&this.getCurrSlide()){var e=g;if(typeof(g)=="string"){var b=this.getCurrSlide().getElement();if(b){e=$A(Element.select(b,g)).first()}if(!e){return null}}var f=this.findOperationDefOfName(c);if(!f){return null}if(!(f instanceof WebShow.OperationDef)){throw new Error(WebShow.ErrorStr.errNamedObjectNotOperationDef+c)}var h=f.createOperationOnElement(e,null,this.getRepository());if(h){return this.execCustomOperation(h,a,d)}}},findOperationDefOfName:function(a){var b=this.getRepository().getObjList().findItemByName(a);if(b){return b}return null},pushOperationToHistory:function(a){if(this.getEnableOperationHistory()){this.getOperationHistory().pushOperation(a)}},popOperationFromHistory:function(){if(this.getEnableOperationHistory()){return this.getOperationHistory().popOperation(operation)}else{return null}},initLoopPlay:function(){if(this.getReprepareSlidesAfterLoop()){if(this.getEnableOperationHistory()){this.getOperationHistory().clearOperations()}this.resetAllSlidesPrepareState()}},nextStep:function(){if(this.getCurrCustomOperation()){this.stopCurrOperation()}else{if(this.hasNextStep()){if(this.getCurrSlide().hasNextStep()){this.getCurrSlide().nextStep(this.getOperationInstantly())}else{this.gotoNextSlide()}}else{if(this.getLoopPlay()){this.initLoopPlay();this.gotoFirstSlide()}}}},prevStep:function(){if(this.getCurrCustomOperation()){this.cancelCurrOperation()}else{if((this.getCurrSlide())&&(this.getCurrSlide().isExecutingOperation())){this.getCurrSlide().prevStep(this.getOperationInstantly())}else{if(this.getEnableOperationHistory()){if(this.getOperationHistory().getLength()>0){var c=this.getOperationHistory().last();var b=0;while(c){this.getOperationHistory().reverseLastOperation();var a=c.getOwnerSlide();if(a&&a.getCurrOperation()==c){a.setCurrOperationToPrev()}if(c.isReversible()){break}else{c=this.getOperationHistory().last()}}var c=this.getOperationHistory().last();if(c){var a=c.getOwnerSlide();if(a){a.setCurrOperation(c)}}}}else{if(this.hasPrevStep()){if(this.getCurrSlide().hasPrevStep()){this.getCurrSlide().prevStep(this.getOperationInstantly())}else{this.gotoPrevSlide()}}else{if(this.getLoopPlay()){this.gotoLastSlide()}}}}}},hasNextPredefinedStep:function(){var a=!((!this.getCurrSlide())||(this.currSlideIsLast()&&(!this.getCurrSlide().hasNextStep())));if(!a){if(this.getAppearingSlide()){a=(!this.appearingSlideIsLast())||this.getAppearingSlide().hasNextStep()}}return a},hasNextStep:function(){var a=this.hasNextPredefinedStep();if(!a){a=this.getAppearingSlide()!=null}return a},hasPrevStep:function(){if(this.getEnableOperationHistory()){return(this.getOperationHistory().getLength()>0)}else{return !((!this.getCurrSlide())||(this.currSlideIsFirst()&&(!this.getCurrSlide().hasPrevStep())))}},getActualAutoPlayInterval:function(){if(this.getAutoPlayInterval()!=null){return this.getAutoPlayInterval()}else{return 1500}},setNextAutoPlayItem:function(){if(this.hasNextPredefinedStep()||(this.getLoopPlay()&&this.getAutoPlayLoop())){var a=this._autoPlayInterval;this._autoPlayTimeHandler=setTimeout(this._nextStepBinding,a)}else{this.stopAutoPlay()}},initAutoPlay:function(){if(this.getAutoPlayAfterRun()){this.startAutoPlay()}},startAutoPlay:function(){if(!this._isAutoPlaying){this._isAutoPlaying=true;this._autoPlayInterval=this.getActualAutoPlayInterval();this._nextStepBinding=this.nextStep.bind(this);this.evokeEventHandler(this.onAutoPlayStart,this);this.setNextAutoPlayItem()}},stopAutoPlay:function(){if(this._autoPlayTimeHandler){clearTimeout(this._autoPlayTimeHandler);this._autoPlayTimeHandler=null}this._isAutoPlaying=false;this.evokeEventHandler(this.onAutoPlayStop,this)},toggleAutoPlay:function(){if(this.isAutoPlaying()){this.stopAutoPlay()}else{this.startAutoPlay()}},isAutoPlaying:function(){return this._isAutoPlaying},SwitchSlideOperation:WebShow.createClass(WebShow.Operation,{CLASS_NAME:"WebShow.SwitchSlideOperation",initialize:function($super,b,d,c,a){$super(b);this.setApp(d);this.setFromSlide(a);this.setToSlide(c);this.reactOperationGroupFinishBinding=this.reactOperationGroupFinish.bind(this);this.reactSwitchOperationChildFinishBinding=this.reactSwitchOperationChildFinish.bind(this);this.reactOperationGroupReversedBinding=this.reactOperationGroupReversed.bind(this)},initProperties:function($super){$super();this.initPublicProp("app","WebShow.App",WebShow.PropertyMode.READWRITE,null);this.initPublicProp("toSlide","WebShow.Slide",WebShow.PropertyMode.READWRITE,null);this.initPublicProp("fromSlide","WebShow.Slide",WebShow.PropertyMode.READWRITE,null);this.initPrivateProp("switchSlideOperation","WebShow.OperationGroup",WebShow.PropertyMode.READ,null)},isReversible:function(){return true},doExecute:function(){this.prepareSwitchSlide(this.getApp(),this.getToSlide(),this.getFromSlide());this.fswitchSlideOperation.prepare();this.beforeDoExecute();this.fswitchSlideOperation.execute();return false},doReverse:function(){this.reverseInstantly();return true},doExecuteInstantly:function(){this.prepareSwitchSlide(this.getApp(),this.getToSlide(),this.getFromSlide());this.fswitchSlideOperation.prepare();this.beforeDoExecute();this.fswitchSlideOperation.executeInstantly();return true},doCancelExecute:function(){if(this.getSwitchSlideOperation()){this.getSwitchSlideOperation().cancelExecute();this.reverseInstantly()}return true},doStopExecute:function(){if(this.getSwitchSlideOperation()){this.getSwitchSlideOperation().stopExecute()}return true},reverseInstantly:function($super){if(this.fswitchSlideOperation){this.fswitchSlideOperation.forceReverse()}if(this.getFromSlide()){this.getFromSlide().simpleShow();if(this._disappearZElement){WebShow.ElementUtils.show(this._disappearZElement)}}if(this.getToSlide()){this.getToSlide().simpleHide();if(this._appearZElement){WebShow.ElementUtils.hide(this._appearZElement)}}this.getApp().fprevSlide=this.getToSlide();this.getApp()._setCurrSlideValue(this.getFromSlide());return true},createSwitchOperationGroup:function(e,b,c){this.fswitchSlideOperation=new WebShow.OperationGroup("internal",WebShow.OperationGroupMode.PARALLEL);this.fswitchSlideOperation.onInternalFinish=this.reactOperationGroupFinishBinding;this.fswitchSlideOperation.onInternalChildOperationFinish=this.reactSwitchOperationChildFinishBinding;this.fswitchSlideOperation.onInternalReversed=this.reactOperationGroupReversedBinding;if(c){if(b&&b.hasPrevSlideDisappearOperationDefs()){var a=c.getElement();var d=b.getPrevSlideDisappearOperationDefs();this._disappearOperations=d.createOperationOnElement(a,this.fswitchSlideOperation,this.getApp().getRepository());this.fswitchSlideOperation.appendOperation(this._disappearOperations)}else{if(c.getDisappearOperations()){this._disappearOperations=c.getDisappearOperations();this.fswitchSlideOperation.appendOperation(c.getDisappearOperations())}}}if(b){b.ensureOperationCreated();if(b.getAppearOperations()){this._appearOperations=b.getAppearOperations();this.fswitchSlideOperation.addOperation(b.getAppearOperations(),0)}}},prepareSwitchSlide:function(d,a,c){if(!d){d=a?a.getOwner():(c?c.getOwner():null)}if(!d){return}if((!a)&&(!c)){return}if(!c){c=d.getCurrSlide()}if(!d.hasSlide(a)){return}if(c){var b=d.getFrameOfSlide(c)}if(a){var f=d.getFrameOfSlide(a)}if((d.getAppMode()==WebShow.AppMode.FrameEmbeded)&&(b!=f)){this._disappearZElement=(c)?b:null;this._appearZElement=(a)?f:null;if(a){WebShow.ElementUtils.show(this._appearZElement)}}else{this._disappearZElement=(c)?c.getElement():null;this._appearZElement=(a)?a.getElement():null}if(c){this._oldZIndex=WebShow.ElementUtils.getZIndexOfElement(this._disappearZElement)}else{this._oldZIndex=null}if(a){this._oldZIndex=WebShow.ElementUtils.getZIndexOfElement(this._appearZElement)}else{this._newZIndex=null}var e=this.switchNeedChangeZIndex(a,c,this._appearZElement,this._disappearZElement);this.createSwitchOperationGroup(this.getApp(),a,c);if(c){this._oldSlideEnsure=c.getEnsureShowHide();c.setEnsureShowHide(false);if(e<0){WebShow.ElementUtils.setZIndexOfElement(this._disappearZElement,WebShow.ElementUtils.parseZIndex(this._newZIndex)+1)}c.beforeHide()}else{this._oldSlideEnsure=null}if(a){this._newSlideEnsure=a.getEnsureShowHide();a.setEnsureShowHide(true);if(e>0){WebShow.ElementUtils.setZIndexOfElement(this._appearZElement,WebShow.ElementUtils.parseZIndex(this._oldZIndex)+1)}a.beforeShow()}else{this._newSlideEnsure=null}d.fappearingSlide=a},beforeDoExecute:function(){if(this.getToSlide()&&(!this._appearOperations)){this.getToSlide().quietShow()}},reactOperationGroupFinish:function(a){if(a==this.getSwitchSlideOperation()){this.getApp().fprevSlide=this.getFromSlide();this.getApp()._setCurrSlideValue(this.getToSlide());if(this.getToSlide()){this.getToSlide().simpleShow();if(this._newSlideEnsure!=null){this.getToSlide().setEnsureShowHide(this._newSlideEnsure)}this.getToSlide().afterShow()}if(this.getFromSlide()){this.getFromSlide().simpleHide();if(this._disappearZElement){WebShow.ElementUtils.hideVisibility(this._disappearZElement)}if(this._oldSlideEnsure!=null){this.getFromSlide().setEnsureShowHide(this._oldSlideEnsure)}this.getFromSlide().afterHide()}WebShow.ElementUtils.setZIndexOfElement(this._disappearZElement,this._oldZIndex);WebShow.ElementUtils.setZIndexOfElement(this._appearZElement,this._newZIndex);this.afterExecute();this.getApp().fappearingSlide=null;this.evokeAppSwitchSlideEvent()}},reactSwitchOperationChildFinish:function(a){if(a==this._appearOperations){this.getToSlide().reactOnShowFinish(a)}else{if(a==this._disappearOperations){this.getFromSlide().reactOnHideFinish(a)}}},reactOperationGroupReversed:function(a){if(a==this.getSwitchSlideOperation()){this.getApp().fprevSlide=this.getToSlide();this.getApp()._setCurrSlideValue(this.getFromSlide());if(this.getFromSlide()){this.getFromSlide().simpleShow();if(this._disappearZElement){WebShow.ElementUtils.show(this._disappearZElement)}}if(this.getToSlide()){this.getToSlide().simpleHide();if(this._appearZElement){WebShow.ElementUtils.hideVisibility(this._appearZElement)}}this.evokeAppSwitchSlideEvent()}},evokeAppSwitchSlideEvent:function(){if(this.getApp()){this.getApp().slideSwitchDone(this.getToSlide(),this.getFromSlide())}},switchNeedChangeZIndex:function(a,f,h,b){if((!h)||(!b)){return 0}var e=h.parentNode;var c=b.parentNode;if(e!=c){return 0}var d=WebShow.ElementUtils.compareZLevelOfElement(b,h);if(d<0){var g=f.containDisappearTransition()||a.hasPrevSlideDisappearOperationDefs();if(g&&(!a.containAppearTransition())){return -1}}else{if(d>0){if(a.containAppearTransition()){return 1}}else{return 0}}}}),initAjaxUrl:function(){if(this.getEnableAjaxUrl()){this.followAjaxUrl()}},followAjaxUrl:function(){WebShow.AppAjaxUrlUtil.updateAppByHash(this)},updateAjaxUrl:function(){WebShow.AppAjaxUrlUtil.updateHashByAllApps()},updateDocumentTitle:function(){var a="";if(this.getAppDoc()){if(this.getChangeDocumentTitle()||this.getChangeDocumentTitleOnSlideShow()){if(this.getChangeDocumentTitleOnSlideShow()&&this.getCurrSlide()&&this.getCurrSlide().getVisible()){a=this.getCurrSlide().getTitle()}else{a=this.getTitle()}if(a){this.getAppDoc().title=a+" - "+this.WEBSHOW_APP_TITLE_SUFFIX}else{this.getAppDoc().title=this.WEBSHOW_APP_TITLE_SUFFIX}}}},getPlayerElement:function(){if(this.getPlayerElemId()){return this.getAppDoc().getElementById(this.getPlayerElemId())}},showPlayerElement:function(){var a=this.getPlayerElement();if(a){WebShow.ElementUtils.show(a,true)}},hidePlayerElement:function(){var a=this.getPlayerElement();if(a){WebShow.ElementUtils.hide(a)}},getSplashElement:function(){if(this.getSplashElemId()){return this.getAppDoc().getElementById(this.getSplashElemId())}else{return null}},showSplashElement:function(){var a=this.getSplashElement();if(a){this._splashOldZIndex=Element.getStyle(a,"z-index");a.style.zIndex=100000;WebShow.ElementUtils.showWithAncestors(a)}},hideSplashElement:function(){var a=this.getSplashElement();if(a){WebShow.ElementUtils.hide(a);if(this._splashOldZIndex){a.style.zIndex=this._splashOldZIndex}}},installSlideDirEventHandler:function(a){Event.observe(a,"click",this.reactSlideDirItemClickBinding)},reactSlideDirItemClick:function(b){var a=Event.findElement(b,"li");if(a&&(a._slideIndex!=null)){this.gotoSlideIndex(a._slideIndex)}},getSlideDirElement:function(){if(this.getSlideDirId()){return this.getAppDoc().getElementById(this.getSlideDirId())}else{return null}},getSlideHref:function(a){return"#"+WebShow.AppAjaxUrlUtil.getSlideAjaxHash(a,this)},fillSlideDir:function(h){h=(h||this.getForcePlayHiddenSlides());var a=this.getSlideDirElement();if(a&&(this.slideCount()>0)){WebShow.ElementUtils.clearChilds(a);var j=a.ownerDocument;var f=j.createElement("ol");for(var c=0,b=this.slideCount();c<b;++c){var d=this.getSlideAt(c);if((!d.getIsHidden())||h||this.getForceListHiddenSlideInDir()){var k=j.createElement("li");k._slideIndex=c;if(d.getIsHidden()){var e=this.getHiddenSlideDirItemClassName();if(e){Element.addClassName(k,e)}}var g=j.createElement("a");var m=j.createTextNode(d.getTitle());g.appendChild(m);g.href=this.getSlideHref(d);k.appendChild(g);f.appendChild(k)}}a.appendChild(f);this.installSlideDirEventHandler(f);this.updateCurrSlideInDir();return f}else{return null}},updateSlideDir:function(){if(!this.getIsAppUpdating()){this.fillSlideDir()}},updateCurrSlideInDir:function(){var b=this.getSlideDirElement();if(b){var c=Element.descendants(b);var e=this.getCurrSlideDirItemClassName();for(var d=0,a=c.length;d<a;++d){if((this.getCurrSlideIndex()>=0)&&e){if(c[d]._slideIndex!==null){if((c[d]._slideIndex===this.getCurrSlideIndex())){Element.addClassName(c[d],e)}else{Element.removeClassName(c[d],e)}}}}}},getAppTitleElement:function(){if(this.getAppTitleElemId()){return this.getAppDoc().getElementById(this.getAppTitleElemId())}else{return null}},displayAppTitleInElem:function(a){if(!a){a=this.getAppTitleElement()}if(a){a.innerHTML=this.getTitle()}},updateAppTitleElem:function(){if(!this.getIsAppUpdating()){this.displayAppTitleInElem()}},getSlideTitleElement:function(){if(this.getSlideTitleElemId()){return this.getAppDoc().getElementById(this.getSlideTitleElemId())}else{return null}},displayTitleOfSlideInElem:function(a,b){if(!b){b=this.getSlideTitleElement()}if(b){if(a){b.innerHTML=a.getTitle()}}},updateSlideTitleElem:function(){if(!this.getIsAppUpdating()){var a=this.getCurrSlide();this.displayTitleOfSlideInElem(a)}},getSlideIndexElement:function(){if(this.getSlideIndexElemId()){return this.getAppDoc().getElementById(this.getSlideIndexElemId())}else{return null}},displayIndexOfSlideInIndexElem:function(){var a=this.getSlideIndexElement();if(a){if(this.getCurrSlideIndex()>=0){a.innerHTML=(this.getCurrSlideIndex()+1)}}},updateSlideIndexElem:function(){if(!this.getIsAppUpdating()){this.displayIndexOfSlideInIndexElem()}},getSlideCountElement:function(){if(this.getSlideCountElemId()){return this.getAppDoc().getElementById(this.getSlideCountElemId())}else{return null}},displayCountOfSlideInCountElem:function(){var a=this.getSlideCountElement();if(a){a.innerHTML=this.getSlideCount()}},updateSlideCountElem:function(){if(!this.getIsAppUpdating()){this.displayCountOfSlideInCountElem()}},getAppStateElem:function(){if(this.getAppStateElemId()){return this.getAppDoc().getElementById(this.getAppStateElemId())}else{return null}},displayAppStateInElem:function(a,b){if(!b){b=this.getAppStateElem()}if(b){b.innerHTML=a}},updateAppStateElem:function(a){var b=this.getAppStateElem();if(b){this.displayAppStateInElem(a,b)}},getAutoNavigatorParentElem:function(){var a=null;if(this.getAutoNavigatorParentElemId()){a=this.getAppDoc().getElementById(this.getAutoNavigatorParentElemId())}if(!a){a=this.getSlideContainer()}return a},getAutoNavigatorElem:function(){return this._autoNavigatorController},getAutoNavigatorSlideListElem:function(){var a=null;var b=this.getAutoNavigatorElem();if(b){a=b.getElementsByTagName("select")[0]}return a},createAutoNavigator:function(){if(this._autoNavigatorController){WebShow.ElementUtils.removeSelf(this._autoNavigatorController)}var c=this.getAutoNavigatorParentElem();if(!c){return}var d=this.getAppDoc();var b=d.createElement("form");b.id=this.DEF_AUTONAVIGATOR_CTRL_ID;var a=this.createAutoNavButton(WebShow.AppCommandID.PrevSlide,WebShow.AutoNavigatorText.PREV_SLIDE_TEXT,WebShow.AutoNavigatorText.PREV_SLIDE_HINT,b,d);var a=this.createAutoNavButton(WebShow.AppCommandID.PrevStep,WebShow.AutoNavigatorText.PREV_STEP_TEXT,WebShow.AutoNavigatorText.PREV_STEP_HINT,b,d);var a=this.createAutoNavButton(WebShow.AppCommandID.NextStep,WebShow.AutoNavigatorText.NEXT_STEP_TEXT,WebShow.AutoNavigatorText.NEXT_STEP_HINT,b,d);var a=this.createAutoNavButton(WebShow.AppCommandID.NextSlide,WebShow.AutoNavigatorText.NEXT_SLIDE_TEXT,WebShow.AutoNavigatorText.NEXT_SLIDE_HINT,b,d);this.createAutoNavSlideList(b,d);this._autoNavigatorController=b;this.implementEmbededCommandAttribs(b);c.appendChild(b)},createAutoNavButton:function(d,c,g,b,e){if(!e){e=b.ownerDocument}var a=e.createElement("a");var f=e.createTextNode(c);a.appendChild(f);a.href="#";a.setAttribute("title",g);a.setAttribute(WebShow.Command.EMBED_COMMAND_ATTRIB,d);b.appendChild(a);return a},createAutoNavSlideList:function(b,d){if(!b){b=this.getAutoNavigatorElem()}if(!b){return}if(!d){d=b.ownerDocument}var c=this.getAutoNavigatorSlideListElem();if(c){WebShow.ElementUtils.removeSelf(c)}var a=d.createElement("select");a.id=this.DEF_AUTONAVIGATOR_SLIDELIST_ID;this.fillAutoNavSlideList(a);Event.observe(a,"change",this.autoNavSlideListChangeEventListener.bindAsEventListener(this));b.appendChild(a);return a},fillAutoNavSlideList:function(e,h){var a=e;if(!e){a=this.getAutoNavigatorSlideListElem()}if(a){h=(h||this.getForcePlayHiddenSlides());if(a&&(this.slideCount()>0)){WebShow.ElementUtils.clearChilds(a);var j=a.ownerDocument;for(var c=0,b=this.slideCount();c<b;++c){var f=this.getSlideAt(c);if((!f.getIsHidden())||h||this.getForceListHiddenSlideInDir()){var d=j.createElement("option");d.value=c;if(f.getIsHidden()){var g=this.getHiddenSlideDirItemClassName();if(g){Element.addClassName(d,g)}}var k=j.createTextNode(f.getTitle());d.appendChild(k);a.appendChild(d)}}this.updateCurrSlideInAutoNavSlideList()}}},updateCurrSlideInAutoNavSlideList:function(){var a=this.getAutoNavigatorSlideListElem();if(a){if(this.getCurrSlideIndex()!=a.value){a.value=this.getCurrSlideIndex()}}},autoNavSlideListChangeEventListener:function(c){var b=this.getAutoNavigatorSlideListElem();if(b){var a=b.value;this.gotoSlideIndex(a);Event.stop(c)}},updateAutoNavigator:function(){if(this.getAutoCreateNavigator()){this.createAutoNavigator()}}});WebShow.AppCmdInterface=Class.create({CLASS_NAME:"WebShow.AppCmdInterface",initialize:function(a){this.fappImpl=a},getAppImpl:function(){return this.fappImpl},getName:function(){return this.getAppImpl().getName()},getAppMode:function(){return this.getAppImpl().getAppMode()},getSlideCount:function(){return this.getAppImpl().slideCount()},gotoSlide:function(a){return this.getAppImpl().gotoSlide(a)},gotoSlideIndex:function(a){return this.getAppImpl().gotoSlideIndex(a)},gotoSlideOffset:function(a){return this.getAppImpl().gotoSlideOffset(a)},gotoCoverSlide:function(){return this.getAppImpl().displayCoverSlide()},gotoNextSlide:function(){return this.getAppImpl().gotoNextSlide()},gotoPrevSlide:function(){return this.getAppImpl().gotoPrevSlide()},gotoFirstSlide:function(){return this.getAppImpl().gotoFirstSlide()},gotoLastSlide:function(){return this.getAppImpl().gotoLastSlide()},getCurrOperation:function(){return this.getAppImpl().getCurrOperation()},execNextOperation:function(){return this.getAppImpl().execNextOperation()},reverseCurrOperation:function(){return this.getAppImpl().reverseCurrOperation()},instantExecuteNextOperation:function(){return this.getAppImpl().instantExecuteNextOperation()},stopCurrOperation:function(){return this.getAppImpl().stopCurrOperation()},cancelCurrOperation:function(){return this.getAppImpl().cancelCurrOperation()},execCustomOperation:function(b,a,c){return this.getAppImpl().execCustomOperation(b,a,c)},nextStep:function(){return this.getAppImpl().nextStep()},prevStep:function(){return this.getAppImpl().prevStep()},hasNextStep:function(){return this.getAppImpl().hasNextStep()},hasPrevStep:function(){return this.getAppImpl().hasPrevStep()}});WebShow.AppAjaxUrlUtil={APP_PARAM_NAME:"wsApp",SLIDE_INDEX_PARAM_NAME:"wsSlide",PARAM_VALUE_SEPERATOR:"=",PARAMS_SEPERATOR:";",HASH_GROUP_BEGINNER:"{",HASH_GROUP_ENDER:"}",formatAjaxHash:function(b,c){var a=WebShow.AppAjaxUrlUtil.APP_PARAM_NAME+WebShow.AppAjaxUrlUtil.PARAM_VALUE_SEPERATOR+b;if(c!==null){a+=WebShow.AppAjaxUrlUtil.PARAMS_SEPERATOR+WebShow.AppAjaxUrlUtil.SLIDE_INDEX_PARAM_NAME+WebShow.AppAjaxUrlUtil.PARAM_VALUE_SEPERATOR+c}return WebShow.AppAjaxUrlUtil.HASH_GROUP_BEGINNER+a+WebShow.AppAjaxUrlUtil.HASH_GROUP_ENDER},getAppAjaxHash:function(b){var a=null;if(b.getCurrSlide()){a=b.getCurrSlideIndex()}if((a!==null)&&(a>=0)){return WebShow.AppAjaxUrlUtil.formatAjaxHash(b.getName(),a)}else{return null}},getSlideAjaxHash:function(a,c){if(!c){c=a.getApp()}var b=c.indexOfSlide(a);return WebShow.AppAjaxUrlUtil.formatAjaxHash(c.getName(),b)},updateHashByAllApps:function(){var d="";if(WebShow.appArray){for(var b=0,a=WebShow.appArray.length;b<a;++b){var e=WebShow.appArray[b];if(e.getEnableAjaxUrl()&&e.getName()){var c=WebShow.AppAjaxUrlUtil.getAppAjaxHash(e);if(c){d+=WebShow.AppAjaxUrlUtil.getAppAjaxHash(e)}}}if(d){window.location.hash=d}}},analysisHash:function(d){var k=[];var j=WebShow.AppAjaxUrlUtil.HASH_GROUP_BEGINNER+"([^"+WebShow.AppAjaxUrlUtil.HASH_GROUP_ENDER+"]+)"+WebShow.AppAjaxUrlUtil.HASH_GROUP_ENDER;var f=new RegExp(j,"gi");var h;var b=[];while((h=f.exec(d))!=null){b.push(h[1])}for(var e=0,c=b.length;e<c;++e){var g=b[e];var a=WebShow.AppAjaxUrlUtil.analysisHashGroup(g);if(a){k.push(a)}}return k},analysisHashGroup:function(f){var e=f.split(WebShow.AppAjaxUrlUtil.PARAMS_SEPERATOR);if(e.length<=0){return null}var a={};for(var d=0,b=e.length;d<b;++d){var c=e[d].split(WebShow.AppAjaxUrlUtil.PARAM_VALUE_SEPERATOR);if(c.length==2){a[c[0]]=c[1]}}return a},analysisCurrUrl:function(){var a=window.location.hash;return WebShow.AppAjaxUrlUtil.analysisHash(a)},getHashedSlideIndexOfApp:function(a){var e=WebShow.AppAjaxUrlUtil.analysisCurrUrl();for(var c=0,b=e.length;c<b;++c){var d=e[c];if(d[WebShow.AppAjaxUrlUtil.APP_PARAM_NAME]==a){return d[WebShow.AppAjaxUrlUtil.SLIDE_INDEX_PARAM_NAME]}}return -1},hashInfosToHashStr:function(h){var b="";for(var d=0,c=h.length;d<c;++d){var f=h[d];var a=f[WebShow.AppAjaxUrlUtil.APP_PARAM_NAME];var e=f[WebShow.AppAjaxUrlUtil.SLIDE_INDEX_PARAM_NAME];var g=WebShow.AppAjaxUrlUtil.formatAjaxHash(a,e);if(g){b+=g}}return b},updateAllAppsByHash:function(){var f=WebShow.AppAjaxUrlUtil.analysisCurrUrl();for(var b=0,a=f.length;b<a;++b){var d=f[b];var e=WebShow.getAppByName(d[WebShow.AppAjaxUrlUtil.APP_PARAM_NAME]);if(e&&e.getEnableAjaxUrl()){var c=d[WebShow.AppAjaxUrlUtil.SLIDE_INDEX_PARAM_NAME];if(c!==null){e.forceToGotoSlideIndex(c)}return}}},updateAppByHash:function(f){var g=WebShow.AppAjaxUrlUtil.analysisCurrUrl();for(var c=0,a=g.length;c<a;++c){var e=g[c];var b=e[WebShow.AppAjaxUrlUtil.APP_PARAM_NAME];if((f.getName()==b)||(f.getName()==decodeURI(b))){if(f&&f.getEnableAjaxUrl()){var d=e[WebShow.AppAjaxUrlUtil.SLIDE_INDEX_PARAM_NAME];if(d!==null){f.forceToGotoSlideIndex(d)}return}}}}};WebShow.AppLauncher={HTML_LINK_ELEMENT_TAG:"link",HTML_LINK_ELEMENT_INDICATOR_ATTRIB:"rel",HTML_LINK_ELEMENT_INDICATOR_VALUE:"webshow.app",HTML_LINK_ELEMENT_HREF_ATTRIB:"href",HTML_LINK_ELEMENT_TARGET_ATTRIB:"target",HTML_LINK_ELEMENT_SLIDE_STAGE_ATTRIB:"webshow-stage",HTML_LINK_ELEMENT_APP_ROOT_ATTRIB:"webshow-root",HTML_LINK_ELEMENT_PLAYER_ATTRIB:"webshow-player",HTML_LINK_ELEMENT_PLAYER_PARENT_ATTRIB:"webshow-player-parent",HTML_LINK_ELEMENT_LAUNCH_AT_ATTRIB:"webshow-launch-at",HTML_EMBED_APP_TAG:WebShow.EMBEDDED_ELEMENT_PREFIX+"app",LAUNCH_MODE_PLAYER_PRIMARY:0,LAUNCH_MODE_SLIDES_PRIMARY:1,RUN_APP_AFTER_DOM_LOADED:0,RUN_APP_AFTER_WINDOW_ONLOAD:1,APP_LAUNCH_EVENT:"webshow:appLaunch",autoLaunchApp:true,autoLaunchOccasion:0,loadedLinks:[],loadedEmbededElems:[],findAppLinkElements:function(c){if(!c){return[]}var a=WebShow.AppLauncher.HTML_LINK_ELEMENT_TAG+"["+WebShow.AppLauncher.HTML_LINK_ELEMENT_INDICATOR_ATTRIB+"="+WebShow.AppLauncher.HTML_LINK_ELEMENT_INDICATOR_VALUE+"]";var b=$(c.documentElement).select(a);return b},getAppLinkElementDetail:function(b){if(!b){return null}var a={};a.configUrl=b.getAttribute(WebShow.AppLauncher.HTML_LINK_ELEMENT_HREF_ATTRIB);a.targetSelector=b.getAttribute(WebShow.AppLauncher.HTML_LINK_ELEMENT_TARGET_ATTRIB);a.stageSelector=b.getAttribute(WebShow.AppLauncher.HTML_LINK_ELEMENT_SLIDE_STAGE_ATTRIB);a.rootSelector=b.getAttribute(WebShow.AppLauncher.HTML_LINK_ELEMENT_APP_ROOT_ATTRIB);a.playerUrl=b.getAttribute(WebShow.AppLauncher.HTML_LINK_ELEMENT_PLAYER_ATTRIB);a.playerParentSelector=b.getAttribute(WebShow.AppLauncher.HTML_LINK_ELEMENT_PLAYER_PARENT_ATTRIB);return a},findAppEmbedElements:function(d,c){var b=c||WebShow.AppLauncher.HTML_EMBED_APP_TAG;var a=WebShow.XmlIslandUtils.getElementsByTagName(d,b);return a},loadAppFromUrl:function(b,e,a,c){var d=WebShow.Xml.load(b,function(h,f){if(f&&h){WebShow.AppLauncher.loadAppFromElement(h.documentElement,e,a,b)}else{var g=WebShow.ErrorStr.errLoadFileFailed+": "+b;if(WebShow&&WebShow.reportError){WebShow.reportError(g)}throw g}})},loadAppFromElement:function(a,f,b,c){var d=f?WebShow.AppMode.FrameEmbeded:WebShow.AppMode.SimplePage;var e=new WebShow.App(null,null,d,f,null);e.onLoad=WebShow.AppLauncher.reactAppLoad.bind(this,b);e.onAppReady=WebShow.AppLauncher.reactAppReady.bind(this,b);if(c){e.setConfigFileUrl(c)}e.setAppElement(b);e.loadFromXml(a);return e},fireLaunchAppEvent:function(b,a){if(!b){b=document.documentElement}Element.fire(b,WebShow.AppLauncher.APP_LAUNCH_EVENT,{app:a})},_appLaunched:false,launchApp:function(b,a){if(WebShow.AppLauncher._appLaunched){return}WebShow.AppLauncher._appLaunched=true;if(WebShow.AppLauncher.autoLaunchApp){if(!b){b=document}var c=WebShow.AppLauncher.findAppLinkElements(b);var h=null;var g;for(var f=0,e=c.length;f<e;++f){h=c[f];if(WebShow.AppLauncher.loadedLinks.indexOf(h)<0){WebShow.AppLauncher.loadedLinks.push(h);g=WebShow.AppLauncher.getAppLinkElementDetail(h);WebShow.AppLauncher.launchAppFromLinkDetail(g,b)}}var d=WebShow.AppLauncher.findAppEmbedElements(b);for(var f=0,e=d.length;f<e;++f){var j=d[f];if(WebShow.AppLauncher.loadedEmbededElems.indexOf(j)<0){WebShow.AppLauncher.loadedEmbededElems.push(j);WebShow.AppLauncher.launchAppFromEmbeddedConfig(j,b)}}}},launchAppFromEmbeddedConfig:function(c,d){var b=c.getAttribute(WebShow.AppLauncher.HTML_LINK_ELEMENT_APP_ROOT_ATTRIB);var a;if(b){a=$A($(d.documentElement).select(b)).first()}else{a=null}WebShow.AppLauncher.loadAppFromElement(c,a)},launchAppFromLinkDetail:function(b,e){if(b&&b.configUrl){var d;var g,a;if(b.playerUrl&&b.playerParentSelector){var c=$A($(e.documentElement).select(b.playerParentSelector)).first();if(!c){throw new Error(WebShow.ErrorStr.errExternalPlayerParentElemNotFound);return}var f=function(k,j,h){if(!j){throw new Error(WebShow.ErrorStr.errExternalPlayerCanNotLoad)}else{c.innerHTML=k;b.playerUrl=null;b.playerParentSelector=null;WebShow.AppLauncher.launchAppFromLinkDetail(b,e)}};WebShow.AppLauncher.loadExternalPlayer(b.playerUrl,c,f);return}if(b.targetSelector){d=$A($(e.documentElement).select(b.targetSelector)).first();g=d;a=document.body}else{if(b.stageSelector||b.rootSelector){g=b.stageSelector?$A($(e.documentElement).select(b.stageSelector)).first():null;a=b.rootSelector?$A($(e.documentElement).select(b.rootSelector)).first():null;if(!a){a=document.body}}}WebShow.AppLauncher.loadAppFromUrl(b.configUrl,g,a,WebShow.AppLauncher.reactAppLoad.bind(this,d))}},loadExternalPlayer:function(c,b,e){var d=b.ownerDocument||document;var a={resultType:WebShow.FileLoader.ResultType.TEXT,extractBody:true,document:d,rootElement:b};WebShow.AjaxLoader.load(c,e,a)},reactAppLoad:function(a,b){WebShow.AppLauncher.fireLaunchAppEvent(a,b)},reactAppReady:function(a,b){},checkAutoLaunchOccasionSetting:function(){if(window._webshow_autolaunch_occasion){WebShow.AppLauncher.autoLaunchOccasion=window._webshow_autolaunch_occasion}},reactDomloaded:function(a){WebShow.AppLauncher.init();if(WebShow.AppLauncher.autoLaunchOccasion==WebShow.AppLauncher.RUN_APP_AFTER_DOM_LOADED){if(WebShow.AppLauncher.autoLaunchApp){WebShow.AppLauncher.launchApp()}}},reactWindowLoad:function(a){WebShow.AppLauncher.init();if(WebShow.AppLauncher.autoLaunchOccasion==WebShow.AppLauncher.RUN_APP_AFTER_WINDOW_ONLOAD){if(WebShow.AppLauncher.autoLaunchApp){WebShow.AppLauncher.launchApp()}}},_inited:false,init:function(){if(!WebShow.AppLauncher._inited){WebShow.init();WebShow.AppLauncher.checkAutoLaunchOccasionSetting();WebShow.AppLauncher._inited=true}}};Event.observe(document,"dom:loaded",WebShow.AppLauncher.reactDomloaded);Event.observe(window,"load",WebShow.AppLauncher.reactWindowLoad);WebShow.ShortCut=WebShow.createClass(WebShow.Object,{CLASS_NAME:"WebShow.ShortCut",initialize:function($super,a,c){$super();var d;if(typeof(a)=="string"){d=WebShow.KeyUtils.getKeyCode(a)}else{d=a}var b;if(typeof(c)=="string"){b=WebShow.KeyUtils.getKeyModifierObj(c)}else{b=c}this.setKeyCode(d);this.setModifierObj(b)},initProperties:function($super){$super();this.initPublicProp("keyCode",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("key",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("modifierObj",WebShow.PropertyType.Object,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("modifiers",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null)},matchEvent:function(a){return WebShow.KeyUtils.isKeyEventMatch(a,this.getKeyCode(),this.getModifierObj())},getKey:function(){return WebShow.KeyUtils.getKeyName(this.getKeyCode())},setKey:function(a){this.setKeyCode(WebShow.KeyUtils.getKeyCode(a))},getModifiers:function(){return WebShow.KeyUtils.getKeyModifierStr(this.getModifierObj())},setModifiers:function(a){this.setModifierObj(WebShow.KeyUtils.getKeyModifierObj(a))}});WebShow.ShortCutList=WebShow.createClass(WebShow.ObjectList,{CLASS_NAME:"WebShow.ShortCutList",initialize:function($super,a){$super(WebShow.ShortCut,false)},getShortCut:function(a){return this.getItem(a)},getPrimaryShortCut:function(){return(this.getLength()>0)?this.getShortCut(0):null},indexOfShortCut:function(b,f){var e;if(typeof(b)=="string"){e=WebShow.KeyUtils.getKeyCode(b)}else{e=b}var d;if(typeof(modifierStrOrObj)=="string"){d=modifierStrOrObj}else{d=WebShow.KeyUtils.getKeyModifierStr(f)}for(var c=0,a=this.getLength();c<a;++c){if(e==this.getShortCut(c).getKeyCode()&&(d==this.getShortCut(c).getModifiers())){return c}}return -1},hasShortCut:function(a,b){return(this.indexOfShortCur(a,b)>=0)},addShortCut:function(b,f){var e;if(typeof(b)=="string"){e=WebShow.KeyUtils.getKeyCode(b)}else{e=b}var d;if(!f){d=""}else{if(typeof(f)=="string"){d=WebShow.KeyUtils.getKeyModifierObj(f)}else{d=f}}var c=this.indexOfShortCut(e,f);if(c<0){var a=new WebShow.ShortCut(e,d);this.append(a);return a}else{return this.getShortCut(c)}},removeShortCut:function(a,c){var b=this.indexOfShortCut(a,c);if(b>0){return this.removeAt(b)}else{return null}}});WebShow.ElementRootList=WebShow.createClass(WebShow.List,{CLASS_NAME:"WebShow.ElementRootList",initialize:function($super){$super([],false)},appendItem:function(b,a){var c={element:b,root:a};return this.append(c)},removeElementItem:function(b){var a=this.indexOfElement(b);if(a>=0){return this.removeAt(a)}},indexOfElement:function(c){var d;for(var b=0,a=this.getLength();b<a;++b){d=this.getItem(b);if(d.element==c){return b}}return -1},getElementsOfRoot:function(c){var a=[];var e;for(var d=0,b=this.getLength();d<b;++d){e=this.getItem(d).element;if((!c)||(c==this.getItem(d).root)){a.push(e)}}return a},getElements:function(){return this.getElementsOfRoot()},getElementAt:function(a){return this.getItem(a).element},getRootAt:function(a){return this.getItem(a).root},getRootOfElement:function(c){var d;for(var b=0,a=this.getLength();b<a;++b){d=this.getItem(b);if(d.element==c){return d.root}}return null}});WebShow.BaseCommand=WebShow.createClass(WebShow.Object,{CLASS_NAME:"WebShow.BaseCommand",DEF_DISABLED_CLASS:"Disabled",DEF_CHECKED_CLASS:"Checked",initialize:function($super,a){$super(a);this._keyEventRootMapping=new Hash()},initProperties:function($super){$super();this.initPublishedProp("shortCuts","WebShow.ShortCutList",WebShow.PropertyMode.READWRITE,null);this.initPublicProp("primaryShortCut","WebShow.ShortCut",WebShow.PropertyMode.READ,null);this.initPublishedProp("enableShortCuts",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true);this.initPublishedProp("label",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("preserveElementContent",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true);this.initPublishedProp("hint",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("checked",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("checkedClass",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("disabled",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("disabledClass",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("stopEventPropagation",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true);this.initPublishedProp("reactOnKeyPressableElements",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("elements","WebShow.ElementRootList",WebShow.PropertyMode.READ,null);this.initPublicEvent("onExecute",null);this.initPublicEvent("onUpdate",null);this.keyEventListenerBinding=this.keyEventListener.bindAsEventListener(this);this.clickEventListenerBinding=this.clickEventListener.bindAsEventListener(this);this.keyPressEventListenerBinding=this.keyPressEventListener.bindAsEventListener(this)},initPropertyValues:function($super){$super();this.fshortCuts=new WebShow.ShortCutList();this.felements=new WebShow.ElementRootList();this.getElements().onAdd=this.reactElementAdd.bind(this);this.getElements().onRemove=this.reactElementRemove.bind(this)},free:function($super){$super();this.uninstallOnAllElements()},execute:function(b){var a=null;if(!this.getDisabled()){var c=this.getElementEmbedAttribParam(b);this.doExecute(b,c);this.evokeEventHandler(this.onExecute,this,b,c)}return a},doExecute:function(a,b){},getElementEmbedAttribParam:function(c){var a,d;var b=c.getAttribute(WebShow.Command.EMBED_COMMAND_ATTRIB);if(b){a=b.match(WebShow.Command.EMBED_COMMAND_PARAM_PATTERN);if(a&&(a.length>1)){d=a[1];return d.evalJSON()}}return{}},update:function(){this.doUpdate();this.evokeEventHandler(this.onUpdate,this)},doUpdate:function(){var d=this.recalcDisabled();if(d!==null){this.setDisabled(d)}var a=this.recalcChecked();if(a!==null){this.setChecked(a)}var b=this.recalcLabel();if(b!==null){this.setLabel(b)}var c=this.recalcHint();if(c!==null){this.setHint(c)}},recalcDisabled:function(){return null},recalcChecked:function(){return null},recalcLabel:function(){return null},recalcHint:function(){return null},installOnElement:function(b,a){if(!a){a=WebShow.ElementUtils.getRootDocElement(b)}if(this.getElements().indexOfElement(b)<0){this.getElements().appendItem(b,a)}},uninstallOnElement:function(a){this.getElements().removeElementItem(a)},uninstallOnAllElements:function(){for(var a=this.getElements().getLength()-1;a>=0;--a){if(this.getElements().getItem(a)){this.uninstallOnElement(this.getElements().getItem(a).element)}}},installShortCutOnElement:function(b){var a=b.ownerDocument.documentElement;if(this._addRootElementRef(a)==1){Event.observe(a,"keydown",this.keyEventListenerBinding)}},uninstallShortCutOnElement:function(b){var a=b.ownerDocument.documentElement;if(this._releaseRootElementRef(a)<=0){Event.stopObserving(a,"keydown",this.keyEventListenerBinding)}},reactElementAdd:function(d,b){var a=d.root;var c=d.element;this.installShortCutOnElement(a);Event.stopObserving(c,"click",this.clickEventListenerBinding);Event.stopObserving(c,"keypress",this.keyPressEventListenerBinding);Event.observe(c,"click",this.clickEventListenerBinding);Event.observe(c,"keypress",this.keyPressEventListenerBinding);this.updateOnElement(c)},reactElementRemove:function(c,d){var a=c.root;var b=c.element;this.uninstallShortCutOnElement(a);Event.stopObserving(b,"click",this.clickEventListenerBinding);Event.stopObserving(b,"keypress",this.keyPressEventListenerBinding)},_getRootElementRef:function(a){return this._keyEventRootMapping.get(a)||0},_addRootElementRef:function(b){var a=this._getRootElementRef(b);if(a<0){a=0}a++;this._keyEventRootMapping.set(b,a);return a},_releaseRootElementRef:function(b){var a=this._getRootElementRef(b)||0;if(a>0){a--;this._keyEventRootMapping.set(b,a)}return a},updateElementsLabel:function(){for(var b=0,a=this.getElements().getLength();b<a;++b){this.updateLabelOnElement(this.getElements().getElementAt(b))}},updateLabelOnElement:function(a){if(this.getLabel()&&(Element.childElements(a).length<=0)){if(WebShow.ControlElementUtils.isControl(a)){if((!this.getPreserveElementContent())||(a.value=="")){a.value=this.getLabel()}}else{if((!this.getPreserveElementContent())||(a.innerHTML=="")){a.innerHTML=this.getLabel()}}}},updateElementsHint:function(){for(var b=0,a=this.getElements().getLength();b<a;++b){this.updateHintOnElement(this.getElements().getElementAt(b))}},updateHintOnElement:function(a){if(this.getHint()){if((!this.getPreserveElementContent())||(a.title=="")){a.title=this.getHint()}}},updateElementsDisabled:function(){for(var b=0,a=this.getElements().getLength();b<a;++b){this.updateDisabledOnElement(this.getElements().getElementAt(b))}},updateDisabledOnElement:function(a){a.disabled=this.getDisabled();if(this.getDisabled()){Element.addClassName(a,this.getActualDisabledClass())}else{Element.removeClassName(a,this.getActualDisabledClass())}},updateElementsChecked:function(){for(var b=0,a=this.getElements().getLength();b<a;++b){this.updateCheckedOnElement(this.getElements().getElementAt(b))}},updateCheckedOnElement:function(a){a.checked=this.getChecked();if(this.getChecked()){Element.addClassName(a,this.getActualCheckedClass())}else{Element.removeClassName(a,this.getActualCheckedClass())}},updateElements:function(){this.updateElementsLabel();this.updateElementsHint();this.updateElementsChecked();this.updateElementsDisabled()},updateOnElement:function(a){this.updateLabelOnElement(a);this.updateHintOnElement(a);this.updateCheckedOnElement(a);this.updateDisabledOnElement(a)},matchEvent:function(c){for(var b=0,a=this.getShortCuts().getLength();b<a;++b){if(this.getShortCuts().getShortCut(b).matchEvent(c)){return true}}return false},keyEventListener:function(a){if(!this.getEnableShortCuts()){return true}if(this.matchEvent(a)){var c=Event.element(a);if((!this.getReactOnKeyPressableElements())&&WebShow.ElementUtils.isKeyPressableElement(c)){return true}var b=WebShow.ElementUtils.getNeareastElement(c,this.getElements().getElements())||c;if(!this.getDisabled()){this.execute(b);if(this.getStopEventPropagation()){Event.stop(a)}return false}}return true},keyPressEventListener:function(a){if((a.charCode&&(charCode==13))||((!a.charCode)&&(a.keyCode==13))){if(!this.getDisabled()){this.evokeChildElementExecute(Event.element(a));if(this.getStopEventPropagation()){Event.stop(a)}return false}}return true},clickEventListener:function(a){if((a.detail&&(a.detail<2))||(!a.detail)){if(!this.getDisabled()){var b=Event.element(a);this.evokeChildElementExecute(b);if(this.getStopEventPropagation()){Event.stop(a)}return false}}return true},evokeChildElementExecute:function(c){var e=c;while(e!=null){for(var b=0,a=this.getElements().getLength();b<a;++b){if(e==this.getElements().getElementAt(b)){this.execute(e);return}}var d=Element.up(e);e=d}},getPrimaryShortCut:function(){return(this.getShortCuts()?this.getShortCuts().getPrimaryShortCut():null)},addShortCut:function(a,b){return this.getShortCuts().addShortCut(a,b)},setLabel:function(a){this.flabel=a;this.updateElementsLabel()},setHint:function(a){this.fhint=a;this.updateElementsHint()},setChecked:function(a){this.fchecked=a;this.updateElementsChecked()},getActualCheckedClass:function(){var a=this.getCheckedClass();if(!a){a=this.DEF_CHECKED_CLASS}return a},setDisabled:function(a){this.fdisabled=a;this.updateElementsDisabled()},getActualDisabledClass:function(){var a=this.getDisabledClass();if(!a){a=this.DEF_DISABLED_CLASS}return a}});WebShow.Command=WebShow.createClass(WebShow.BaseCommand,{CLASS_NAME:"WebShow.Command",initialize:function($super,a){$super(a)},initProperties:function($super){$super();this.initPublishedProp("command",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("disabledEvaluator",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("checkedEvaluator",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("labelEvaluator",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("hintEvaluator",WebShow.PropertyType.String,WebShow.PropertyMode.READWRITE,null)},doExecute:function($super,element,param){var result=null;if(!this.getDisabled()){if(this.getCommand()){result=eval(this.getCommand())}}result=result||$super(element,param);return result},recalcDisabled:function(){if(this.getDisabledEvaluator()){return eval(this.getDisabledEvaluator())}else{return null}},recalcChecked:function(){if(this.getCheckedEvaluator()){return eval(this.getCheckedEvaluator())}else{return null}},recalcLabel:function(){if(this.getLabelEvaluator()){return eval(this.getLabelEvaluator())}else{return null}},recalcHint:function(){if(this.getHintEvaluator()){return eval(this.getHintEvaluator())}else{return null}}});WebShow.CommandList=WebShow.createClass(WebShow.FlexObjectListEx,{CLASS_NAME:"WebShow.CommandList",initialize:function($super,a,b){$super(WebShow.Command,false);this.periodicalUpdateBinding=this.periodicalUpdate.bind(this);this.setRootElem(a);this.setEnableShortCuts(true)},initProperties:function($super){$super();this.initPublishedProp("enablePeriodicalUpdater",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("updaterInterval",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,500);this.initPublishedProp("enableShortCuts",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("rootElem",WebShow.PropertyType.Object,WebShow.PropertyMode.READWRITE,null);this.initPublicProp("autoImplementEmbeddedCommandAttribs",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,true)},free:function($super){$super();this.uninstallAllCommands()},setRootElem:function(a){if(a!=this.getRootElem()){if(this.getLength()>0){if(this.getRootElem()){this.uninstallAllCommands()}}this.frootElem=a;if((this.getLength()>0)&&this.getAutoImplementEmbeddedCommandAttribs()){this.implementEmbededCommandAttribs()}}},setEnableShortCuts:function(d){if(d!=this.getEnableShortCuts()){this.fenableShortCuts=d;for(var b=0,a=this.getLength();b<a;++b){var c=this.getCommand(b);c.setEnableShortCuts(d)}}},added:function(b,a){b.setEnableShortCuts(this.getEnableShortCuts());if(b){if(this.getRootElem()&&this.getAutoImplementEmbeddedCommandAttribs()){this.implementEmbededCommandAttribs(this.getRootElem(),b)}}},removed:function(a){if(a){a.uninstallOnAllElements()}},getCommand:function(a){return this.getItem(a)},findCommand:function(c){var a;for(var d=0,b=this.getLength();d<b;++d){a=this.getCommand(d);if(a.getName()==c){return a}}return null},installShortCutsOnElement:function(c){for(var b=0,a=this.getLength();b<a;++b){this.getCommand(b).installShortCutOnElement(c)}},uninstallShortCutsOnElement:function(c){for(var b=0,a=this.getLength();b<a;++b){this.getCommand(b).uninstallShortCutOnElement(c)}},implementEmbededCommandAttribs:function(a,e,d){if(!a){a=this.getRootElem()}else{if(!this.getRootElem()){this.setRootElem(a)}}var b=(function(h){var g,f,k;var j;f=h.getAttribute(WebShow.Command.EMBED_COMMAND_ATTRIB);if(f){k=f.match(WebShow.Command.EMBED_COMMAND_NAME_PATTERN);if(k&&(k.length>1)){g=k[1]}if(g){if(e){if(e.getName()==g){j=e}else{j=null}}else{j=this.findCommand(g)}if(j){j.installOnElement(h,a)}}}}).bind(this);var c=WebShow.DomUtils.iterateDescendants(b,a,d)},applyCommandAttribs:function(a,c,b){this.implementEmbededCommandAttribs(root,c,b)},uninstallAllCommands:function(){var b;for(var a=this.getLength()-1;a>=0;--a){b=this.getCommand(a);if(b){b.uninstallOnAllElements()}}},executeCommand:function(a){var b=this.getCommand(a);if(b){return b.execute()}},updateCommand:function(a){var b=this.getCommand(a);if(b){return b.update()}},updateAllCommands:function(){for(var b=0,a=this.getLength();b<a;++b){this.updateCommand(b)}},periodicalUpdate:function(){this.updateAllCommands();if(this.getEnablePeriodicalUpdater()&&this.getUpdaterInterval()){setTimeout(this.periodicalUpdateBinding,this.getUpdaterInterval(),[])}},setEnablePeriodicalUpdater:function(a){if(this.fenablePeriodicalUpdater!=a){this.fenablePeriodicalUpdater=a}if(a){this.periodicalUpdate()}}});WebShow.CommandNameClassMapping=WebShow.createClass(WebShow.Map,{CLASS_NAME:"WebShow.CommandNameClassMapping",initialize:function($super){$super()}});WebShow.PredefinedCommandList=WebShow.createClass(WebShow.CommandList,{CLASS_NAME:"WebShow.PredefinedCommandList",initialize:function($super,a,b){$super(a,b)},initProperties:function($super){$super();this.initPublishedProp("predefinedCommandMappings","WebShow.CommandNameClassMapping",WebShow.PropertyMode.READ,null)},initPropertyValues:function($super){$super();this.fpredefinedCommandMappings=new WebShow.CommandNameClassMapping()},addMapping:function(b,a){this.getPredefinedCommandMappings().add(b,a)},removeMapping:function(a){this.getPredefinedCommandMappings().remove(a)},getCmdClassName:function(a){return this.getPredefinedCommandMappings().get(a)},createPredefinedCmdObj:function(predefinedName){if(!predefinedName){return null}var className=this.getCmdClassName(predefinedName);if(!className){WebShow.reportError(new Error(WebShow.ErrorStr.errPredefinedCommandNotFound+predefinedName));return null}else{var cmdObj=eval("new "+className+'("'+predefinedName+'")');this.append(cmdObj);return cmdObj}},createAllPredefinedCommands:function(){var d=this.getPredefinedCommandMappings().getData().keys();var b;for(var c=0,a=d.length;c<a;++c){b=d[c];if(!this.findCommand(b)){this.createPredefinedCmdObj(b)}}},findCommand:function($super,a){var b=$super(a);if((!b)){b=this.createPredefinedCmdObj(a)}return b},installShortCutsOnElement:function($super,a){this.createAllPredefinedCommands();$super(a)}});WebShow.Command.EMBED_COMMAND_ATTRIB=WebShow.EMBEDDED_ATTRIB_PREFIX+"command";WebShow.Command.EMBED_COMMAND_NAME_PATTERN=/^([^\(]+)\(?|$/;WebShow.Command.EMBED_COMMAND_PARAM_PATTERN=/\(([^\(\)]*)\)/;WebShow.AppCommandID={FirstSlide:"App:FirstSlide",LastSlide:"App:LastSlide",PrevSlide:"App:PrevSlide",NextSlide:"App:NextSlide",PrevStep:"App:PrevStep",NextStep:"App:NextStep",GotoSlideIndex:"App:GotoSlideIndex",GotoSlideName:"App:GotoSlideName",ToggleAutoPlay:"App:ToggleAutoPlay",Close:"App:Close",OpenUrl:"App:OpenUrl"};WebShow.AppCommandList=WebShow.createClass(WebShow.PredefinedCommandList,{CLASS_NAME:"WebShow.AppCommandList",initialize:function($super,d,c,b){var a=d?d.getAppElement():null;$super(b,a,b);this.fapp=d;this.fillDefaultCmdNames();if(c){this.createAllPredefinedCommands()}this.setEnablePeriodicalUpdater(true)},initProperties:function($super){$super();this.initPublicProp("app","WebShow.App",WebShow.PropertyMode.READ,null)},fillDefaultCmdNames:function(){this.addMapping(WebShow.AppCommandID.FirstSlide,"WebShow.CommandAppFirstSlide");this.addMapping(WebShow.AppCommandID.LastSlide,"WebShow.CommandAppLastSlide");this.addMapping(WebShow.AppCommandID.PrevSlide,"WebShow.CommandAppPrevSlide");this.addMapping(WebShow.AppCommandID.NextSlide,"WebShow.CommandAppNextSlide");this.addMapping(WebShow.AppCommandID.PrevStep,"WebShow.CommandAppPrevStep");this.addMapping(WebShow.AppCommandID.NextStep,"WebShow.CommandAppNextStep");this.addMapping(WebShow.AppCommandID.GotoSlideIndex,"WebShow.CommandAppGotoSlideIndex");this.addMapping(WebShow.AppCommandID.GotoSlideName,"WebShow.CommandAppGotoSlideName");this.addMapping(WebShow.AppCommandID.ToggleAutoPlay,"WebShow.CommandAppToggleAutoPlay");this.addMapping(WebShow.AppCommandID.Close,"WebShow.CommandAppClose");this.addMapping(WebShow.AppCommandID.OpenUrl,"WebShow.CommandAppOpenUrl")},doAppChanged:function(b){var d;for(var c=0,a=this.getLength();c<a;++c){d=this.getCommand(c);this.setCommandApp(d,b)}},setCommandApp:function(a,b){if(a.setApp){a.setApp(b)}},add:function($super,b,a){this.setCommandApp(b,this.getApp());return $super(b,a)}});WebShow.AppCommand=WebShow.createClass(WebShow.BaseCommand,{CLASS_NAME:"WebShow.AppCommand",initialize:function($super,a,b){$super(a);this.setApp(b);this.initAppCommand()},initProperties:function($super){$super();this.initPublicProp("app","WebShow.App",WebShow.PropertyMode.READWRITE,null)},initAppCommand:function(){},getNearestApp:function(d){if(WebShow.appArray.length<=0){return null}else{var b=[];for(var c=0,a=WebShow.appArray.length;c<a;++c){b.push(app.getAppElement())}var e=WebShow.ElementUtils.getNeareastElement(d,b);for(var c=0,a=WebShow.appArray.length;c<a;++c){if(WebShow.appArray[c].getAppElement()==e){return WebShow.appArray[c]}}}return null},doExecute:function($super,b,d){$super(b,d);var c=null;var a=d.app;if(a){c=WebShow.apps[a]}if(!c){c=this.getApp()}if(!c){c=this.getNearestApp(b)}return this.appCmdExecute(b,c,d)},appCmdExecute:function(a,c,b){return null}});WebShow.CommandAppFirstSlide=WebShow.createClass(WebShow.AppCommand,{CLASS_NAME:"WebShow.CommandAppFirstSlide",initAppCommand:function(){this.setLabel(WebShow.CommandText.labelAppFirstSlide);this.setHint(WebShow.CommandText.hintAppFirstSlide);this.addShortCut("home")},appCmdExecute:function(a,c,b){return c.gotoFirstSlide()},recalcDisabled:function(){return this.getApp()?this.getApp().isCurrFirstSlide():null}});WebShow.CommandAppLastSlide=WebShow.createClass(WebShow.AppCommand,{CLASS_NAME:"WebShow.CommandAppLastSlide",initAppCommand:function(){this.setLabel(WebShow.CommandText.labelAppLastSlide);this.setHint(WebShow.CommandText.hintAppLastSlide);this.addShortCut("end")},appCmdExecute:function(a,c,b){return c.gotoLastSlide()},recalcDisabled:function(){return this.getApp()?this.getApp().isCurrLastSlide():null}});WebShow.CommandAppPrevSlide=WebShow.createClass(WebShow.AppCommand,{CLASS_NAME:"WebShow.CommandAppPrevSlide",initAppCommand:function(){this.setLabel(WebShow.CommandText.labelAppPrevSlide);this.setHint(WebShow.CommandText.hintAppPrevSlide);this.addShortCut("pageup")},appCmdExecute:function(a,c,b){return c.gotoPrevSlide()},recalcDisabled:function(){return this.getApp()?this.getApp().isCurrFirstSlide():null}});WebShow.CommandAppNextSlide=WebShow.createClass(WebShow.AppCommand,{CLASS_NAME:"WebShow.CommandAppNextSlide",initAppCommand:function(){this.setLabel(WebShow.CommandText.labelAppNextSlide);this.setHint(WebShow.CommandText.hintAppNextSlide);this.addShortCut("pagedown")},appCmdExecute:function(a,c,b){return c.gotoNextSlide()},recalcDisabled:function(){return this.getApp()?this.getApp().isCurrLastSlide()&&(!this.getApp().getLoopPlay()):null}});WebShow.CommandAppPrevStep=WebShow.createClass(WebShow.AppCommand,{CLASS_NAME:"WebShow.CommandAppPrevStep",initAppCommand:function(){this.setLabel(WebShow.CommandText.labelAppPrevStep);this.setHint(WebShow.CommandText.hintAppPrevStep);this.addShortCut("up");this.addShortCut("left");this.addShortCut("up","ctrl");this.addShortCut("left","ctrl")},appCmdExecute:function(a,c,b){return c.prevStep()},recalcDisabled:function(){return this.getApp()?(!this.getApp().hasPrevStep()):null}});WebShow.CommandAppNextStep=WebShow.createClass(WebShow.AppCommand,{CLASS_NAME:"WebShow.CommandAppNextStep",initAppCommand:function(){this.setLabel(WebShow.CommandText.labelAppNextStep);this.setHint(WebShow.CommandText.hintAppNextStep);this.addShortCut("down");this.addShortCut("right");this.addShortCut("space");this.addShortCut("down","ctrl");this.addShortCut("right","ctrl")},appCmdExecute:function(a,c,b){return c.nextStep()},recalcDisabled:function(){return this.getApp()?(!(this.getApp().hasNextStep()||this.getApp().getLoopPlay())):null}});WebShow.CommandAppToggleAutoPlay=WebShow.createClass(WebShow.AppCommand,{CLASS_NAME:"WebShow.CommandAppToggleAutoPlay",initAppCommand:function(){this.setLabel(WebShow.CommandText.labelAppAutoPlay);this.setHint(WebShow.CommandText.hintAppAutoPlay)},appCmdExecute:function(a,c,b){return c.toggleAutoPlay()},recalcDisabled:function(){return this.getApp()?(!this.getApp().hasNextStep()):null},recalcChecked:function(){return this.getApp()?this.getApp().isAutoPlaying():null}});WebShow.CommandAppClose=WebShow.createClass(WebShow.AppCommand,{CLASS_NAME:"WebShow.CommandAppClose",initAppCommand:function(){this.setLabel(WebShow.CommandText.labelAutoPlay);this.setHint(WebShow.CommandText.hintAutoPlay)},appCmdExecute:function(a,c,b){WebShow.DocUtils.getWindow(this.getApp().getAppDoc()).close()}});WebShow.CommandAppGotoSlideName=WebShow.createClass(WebShow.AppCommand,{CLASS_NAME:"WebShow.CommandAppGotoSlideName",appCmdExecute:function(b,d,c){var a=c.name;if(a){d.gotoSlideName(a);return true}else{return null}}});WebShow.CommandAppGotoSlideIndex=WebShow.createClass(WebShow.AppCommand,{CLASS_NAME:"WebShow.CommandAppGotoSlideIndex",appCmdExecute:function(b,d,c){var a=c.index;if(a){d.gotoSlideIndex(a);return true}else{return null}}});WebShow.CommandAppOpenUrl=WebShow.createClass(WebShow.AppCommand,{CLASS_NAME:"WebShow.CommandAppClose",appCmdExecute:function(a,c,b){if(b.url){if(!b.newWindow){this.getApp().getAppDoc().location=b.url}else{window.open(b.url)}}}});WebShow.ZoomerFactory={registeredZoomers:[],registerZoomer:function(a,c){var b={};b.name=a;b.classFunc=c;WebShow.ZoomerFactory.registeredZoomers.push(b)},getZoomer:function(b){for(var c=0,a=WebShow.ZoomerFactory.registeredZoomers.length;c<a;++c){var d=WebShow.ZoomerFactory.registeredZoomers[c];if(d.name.toLowerCase()==b.toLowerCase()){return d}}return null},createZoomer:function(a){var b=WebShow.ZoomerFactory.getZoomer(a);if(b){return new b.classFunc()}else{return null}}};WebShow.Zoomer=WebShow.createLightClass(WebShow.Object,{CLASS_NAME:"WebShow.Zoomer",initialize:function($super){$super()},initProperties:function($super){$super()},free:function($super){this.unprepare();$super()},prepare:function(b,a){},unprepare:function(a){},zoom:function(b,c,a){},reset:function(a){},getActualZoomElem:function(a){return a},browserSupported:function(){return true}});WebShow.TransformZoomer=WebShow.createLightClass(WebShow.Zoomer,{CLASS_NAME:"WebShow.TransformZoomer",prepare:function(b,a,d){if(!b){return}if(b._isManuallyPrepared){return}a=Object.extend({changeFlow:true},a);if((!Prototype.Browser.IE)&&a.changeFlow){var c=b._zoomInternal;if(!c){if(a.transformElem){b._zoomInternal=a.transformElem;c=a.transformElem;b._preserveZoomInternal=true}else{c=this.createInternalElem(b);b._zoomInternal=c}}if(!d){b._isManuallyPrepared=true}}},unprepare:function(a){if(a._isManuallyPrepared){try{delete a._isManuallyPrepared}catch(b){a._isManuallyPrepared=undefined}}this.reset(a)},_zoomToRatio:function(e,c,b){if(Prototype.Browser.IE){Element.setStyle(e,{zoom:c})}else{var a="scale("+c+")";var d="left top";WebShow.CssTransformUtils.setTransformStyle(e,a,d)}},zoom:function(b,c,a){if(!this.browserSupported()){return}a=Object.extend({changeFlow:true},a);var d=b;if(!Prototype.Browser.IE){if(a.changeFlow){var e=b._zoomInternal;if(!e){if(a.transformElem){b._zoomInternal=a.transformElem;e=a.transformElem;b._preserveZoomInternal=true}else{e=this.createInternalElem(b);b._zoomInternal=e}}}this.prepare(b,a,true);var d=b._zoomInternal||b;if(a.changeFlow){this.scaleElementDimensionPx(b,c)}}this._zoomToRatio(d,c,a)},reset:function(c){if(c._zoomerOriginInlineStyle!==null){c.style.cssText=c._zoomerOriginInlineStyle;try{delete c._zoomerOriginInlineStyle;delete c._originWidthPx;delete c._originHeightPx}catch(d){c.zoomerOriginInlineStyle=undefined;c._originWidthPx=undefined;c._originHeightPx=undefined}}if(!c._isManuallyPrepared){if(c._zoomInternal&&(!c._preserveZoomInternal)){var b=c._zoomInternal.childNodes;for(var a=b.length-1;a>=0;--a){var f=b[a];if(f!=c._zoomInternal){if(f.nodeType!=Node.ATTRIBUTE_NODE){c.insertBefore(b[a],null)}}}c.removeChild(c._zoomInternal);try{delete c._zoomInternal}catch(d){c._zoomInternal=undefined}}}else{if(c._zoomInternal){this._zoomToRatio(c._zoomInternal,1)}}},getActualZoomElem:function(a){return a._zoomInternal||a},browserSupported:function(){return Prototype.Browser.IE||this.transformPropertySupported()},transformPropertySupported:function(){return WebShow.CssTransformUtils.isTransformSupported()},createInternalElem:function(c){var g=c.ownerDocument;var f=g.createElement("div");var j=Element.getStyle(c,"width");var e=Element.getStyle(c,"height");Element.setStyle(f,{width:j,height:e});c.insertBefore(f,null);var b=c.childNodes;var k=null;for(var d=b.length-1;d>=0;--d){var a=b[d];if(a!=f){if(a.nodeType!=Node.ATTRIBUTE_NODE){k=f.insertBefore(a,k)}}}c._zoomInternal=f;return f},scaleElementDimensionPx:function(a,b){var c={};if(!a._zoomerOriginInlineStyle){a._zoomerOriginInlineStyle=a.style.cssText}if(!a._originWidthPx){c.width=parseFloat(Element.getStyle(a,"width"));a._originWidthPx=c.width}else{c.width=a._originWidthPx}if(!a._originHeightPx){c.height=parseFloat(Element.getStyle(a,"height"));a._originHeightPx=c.height}else{c.height=a._originHeightPx}c.width=c.width*b;c.height=c.height*b;Element.setStyle(a,{width:c.width+"px",height:c.height+"px"})}});WebShow.ZoomerFactory.registerZoomer("WebShow.TransformZoomer",WebShow.TransformZoomer);WebShow.AutoZoomer=WebShow.createLightClass(WebShow.Object,{CLASS_NAME:"WebShow.AutoZoomer",initialize:function($super,b,a,c){$super();this.fzoomerName=b;this.fzoomer=null;this._initW=null;this._initH=null;this._prepared=null;this.setElement(a);this.setUsePredefinedRatio(c);this.reactViewPortResizeBinding=this.reactViewPortResize.bindAsEventListener(this);this.installEventListener()},initProperties:function($super){$super();this.initPublicProp("element",WebShow.PropertyType.Object,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("enabled",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("zoomerName",WebShow.PropertyType.String,WebShow.PropertyMode.READ,null);this.initPublishedProp("options",WebShow.PropertyType.Object,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("usePredefinedRatio",WebShow.PropertyType.Boolean,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("widthRatio",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("heightRatio",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("preferedWidth",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("preferedHeight",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("preferedViewportWidth",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("preferedViewportHeight",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("fixedWidth",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null);this.initPublishedProp("fixedHeight",WebShow.PropertyType.Number,WebShow.PropertyMode.READWRITE,null)},initPropertyValues:function($super){$super();this.foptions={}},free:function($super){this.uninstallEventListener();this.unprepare();if(fzoomer){fzoomer.free()}$super()},browserSupported:function(){return this.getZoomer().browserSupported()},reactViewPortResize:function(a){if(this.getEnabled()){this.adjustSize()}},installEventListener:function(){Event.observe(window,"resize",this.reactViewPortResizeBinding)},uninstallEventListener:function(){Event.stopObserving(window,"resize",this.reactViewPortResizeBinding)},getActualZoomElem:function(b){if(!b){b=this.getElement()}var a=this.getZoomer().getActualZoomElem(b);return a},createZoomer:function(){var b=this.getZoomerName();if(!b){b="WebShow.TransformZoomer"}var a=WebShow.ZoomerFactory.createZoomer(b);return a},getZoomer:function(){if(!this.fzoomer){this.fzoomer=this.createZoomer()}return this.fzoomer},setEnabled:function(a){if(!this.browserSupported()){a=false}if(a!=this.getEnabled()){this.fenabled=a;if(a&&this._prepared){this.prepare()}else{if(!a&&(!this._prepared)){this.unprepare()}}this.update()}},setElement:function(a){if(a!=this.felement){if(this.felement){this.resetSize()}this.felement=a;this.prepare();if(a){this.update()}}},setPreferedWidth:function(a){this.fpreferedWidth=a;this.update()},setPreferedHeight:function(a){this.fpreferedHeight=a;this.update()},setPreferedViewportWidth:function(a){this.fpreferedViewportWidth=a;this.update()},setPreferedViewportHeight:function(a){this.fpreferedViewportHeight=a;this.update()},setFixedWidth:function(a){this.ffixedWidth=a;this.update()},setFixedHeight:function(a){this.ffixedHeight=a;this.update()},prepare:function(a){if(this.getElement()&&this.getEnabled()){if(!a){a=this.getZoomer()}a.prepare(this.getElement(),this.getOptions());this._prepared=true}},unprepare:function(a){if(this.getElement()){this.setEnabled(false);if(!a){a=this.fzoomer}if(a){a.unprepare(this.getElement())}this._prepared=false}},update:function(){if(this.getEnabled()){this.adjustSize()}else{this.resetSize()}},initElement:function(b){if(!b){b=this.getElement()}if(!b){return}b._autoZoomeroriginInlineStyle=b.style.cssText;var a,c;if(!this.getPreferedWidth()){a=Element.getStyle(b,"width")}else{a=this.getPreferedWidth()+"px"}if(!this.getPreferedHeight()){c=Element.getStyle(b,"height")}else{c=this.getPreferedHeight()+"px"}Element.setStyle(b,{width:a,height:c});this._initW=parseFloat(a);this._initH=parseFloat(c);b._autoZoomerInited=true},adjustSize:function(){var f=this.getElement();if(!f){return}if(!f._autoZoomerInited){this.initElement(f)}var n,c;var e=document.viewport.getDimensions();var o=this.getFixedWidth()?e.width-this.getFixedWidth():e.width;var g=this.getFixedHeight()?e.height-this.getFixedHeight():e.height;var j=this.getFixedWidth()?this.getPreferedViewportWidth()-this.getFixedWidth():this.getPreferedViewportWidth();var a=this.getFixedHeight()?this.getPreferedViewportHeight()-this.getFixedHeight():this.getPreferedViewportHeight();if(this.getUsePredefinedRatio()){var m,b;if(this.getWidthRatio()){m=o*this.getWidthRatio()}if(this.getHeightRatio()){b=g*this.getHeightRatio()}if(m&&b){n=m/this._initW;c=b/this._initH;k=Math.min(n,c)}else{if(m){k=m/this._initW}else{if(b){k=b/this._initH}else{k=0}}}}else{if(this.getPreferedViewportWidth()){n=o/j}if(this.getPreferedViewportHeight()){c=g/a}var k=n?(c?Math.min(n,c):n):(c?c:0)}if(k){var d=this.getZoomer();d.zoom(f,k,this.getOptions())}},resetSize:function(){this.fenabled=false;var a=this.getElement();if(!a){return}if(this.getZoomer()){this.getZoomer().reset(a)}if(a._autoZoomeroriginInlineStyle!==null){a.style.cssText=a._autoZoomeroriginInlineStyle;try{delete a._autoZoomeroriginInlineStyle;delete a._autoZoomerInited}catch(b){a._autoZoomeroriginInlineStyle=undefined;a._autoZoomerInited=undefined}}}});