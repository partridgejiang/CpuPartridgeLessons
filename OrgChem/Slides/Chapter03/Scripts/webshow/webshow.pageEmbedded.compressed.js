var WebShow={Version:"0.7.0",NAMESPACE:"WebShow",PREFIX:"WebShow",CLASS_PREFIX:"WebShow.",EMBEDDED_ELEMENT_PREFIX:"webshow_",EMBEDDED_ATTRIB_PREFIX:"webshow_",XML_ISLAND_TAG:"xml",WS_PAGE_DOM_LOADED:"webshow:pageDomLoaded"};var WS_PAGE_DOM_LOADED=WebShow.WS_PAGE_DOM_LOADED;WebShow.init=function(){if(!WebShow.init._inited){WebShow.ClassMetas.fillDetails();WebShow.init._inited=true}};WebShow.init._inited=false;document.observe("dom:loaded",function(){WebShow.init()});WebShow.Error=Error;WebShow.createClass=function(){var a=Class.create.apply(this,arguments);a.prototype.fProps=null;WebShow.ClassMetas.add(a);return a};WebShow.createLightClass=function(){var a=Class.create.apply(this,arguments);a.prototype.fProps=null;return a};WebShow.ClassMeta=Class.create({classFunc:null,classPrototype:null,className:"",shortName:"",loadDetail:function(){this.classPrototype=this.classFunc.prototype;if(this.classPrototype){if(this.classPrototype.getClassName){this.className=this.classPrototype.getClassName()}if(this.classPrototype.getShortName){this.shortName=this.classPrototype.getShortName()}}}});WebShow.ClassMetas=new Array();WebShow.ClassMetas.add=function(b){var a=new WebShow.ClassMeta();a.classFunc=b;WebShow.ClassMetas.push(a);return a};WebShow.ClassMetas.fillDetails=function(){for(var b=0,a=WebShow.ClassMetas.length;b<a;++b){var c=WebShow.ClassMetas[b];c.loadDetail()}};WebShow.ClassMetas.update=WebShow.ClassMetas.fillDetails;WebShow.ClassMetas.findClassMeta=function(e){for(var c=0,b=WebShow.ClassMetas.length;c<b;++c){var a=WebShow.ClassMetas[c].className;if(a==e){return WebShow.ClassMetas[c]}}for(var c=0,b=WebShow.ClassMetas.length;c<b;++c){var d=WebShow.ClassMetas[c].shortName;if(d==e){return WebShow.ClassMetas[c]}}return null};WebShow.ClassMetas.findClassMetaByXmlTag=function(f){for(var c=0,a=WebShow.ClassMetas.length;c<a;++c){try{var b=WebShow.ClassMetas[c].classPrototype.getXmlStoreTag()}catch(d){throw (f+" : "+WebShow.ClassMetas[c].classPrototype.getClassName())}if(b.toLowerCase()==f.toLowerCase()){return WebShow.ClassMetas[c]}}return null};WebShow.ClassMetas.findClassPrototype=function(b){var a=WebShow.ClassMetas.findClassMeta(b);if(a){return a.classPrototype}else{return null}};WebShow.ClassMetas.findClassFunc=function(b){var a=WebShow.ClassMetas.findClassMeta(b);if(a){return a.classFunc}else{return null}};WebShow.ObjFactory={createObj:function(){var name=arguments[0];var params=$A(arguments);params.shift();var classMeta=WebShow.ClassMetas.findClassMeta(name);if(!classMeta){classMeta=WebShow.ClassMetas.findClassMeta(WebShow.CLASS_PREFIX+name)}if(classMeta){return WebShow.ObjFactory.createObjByMeta(classMeta,params)}else{try{if(eval(name)){return eval("new "+name+"()")}else{return eval("new "+WebShow.CLASS_PREFIX+name+"()")}}catch(e){WebShow.reportError(e);return null}}},createObjByTag:function(){var a=arguments[0];var b=$A(arguments);b.shift();var c;var c=WebShow.ClassMetas.findClassMetaByXmlTag(a.toXmlCase());if(!c){c=WebShow.ClassMetas.findClassMetaByXmlTag(a.toLowerCase())}return WebShow.ObjFactory.createObjByMeta(c,b)},createObjByMeta:function(classMeta,params){if(classMeta){if(params.length<=0){var classFunc=classMeta.classFunc;return new classFunc()}else{var strs=[];for(var i=0,l=params.length;i<l;++i){strs[i]="params["+i+"]"}var argStr=strs.join(",");var className=classMeta.className;var expresstion="new "+className+"("+argStr+")";return eval(expresstion)}}else{return null}}};WebShow.ObjFactory.createObjByName=WebShow.ObjFactory.createObj;WebShow.ObjFactory.createObjByTagName=WebShow.ObjFactory.createObjByTag;WebShow.mixObjs=function(a,c,d){var b=Object.clone(a);return WebShow.mergeObj(b,c,d)};WebShow.mergeObj=function(a,b,c){for(var d in b){if(b[d]&&(!a[d])){if((!c)&&(Object.isFunction(b[d]))){continue}a[d]=b[d]}}return a};WebShow.STRUE="true";WebShow.SFALSE="false";function strToBool(a){return WebShow.strToBool(a)}function boolToStr(a){return WebShow.boolToStr(a)}WebShow.boolToStr=function(a){if(a){return WebShow.STRUE}else{return WebShow.SFALSE}};WebShow.strToBool=function(b){if(typeof(b)=="string"){var a=b.toLowerCase();return !((a==WebShow.SFALSE)||(a=="")||(a=="0"))}else{return !(!b)}};WebShow.isBoolStr=function(a){return(a==WebShow.SFALSE)||(a==WebShow.STRUE)};function $E(e,b){if(arguments.length>2){for(var a=1,d=[],c=arguments.length;a<c;a++){d.push($E(e,arguments[a]))}return d}if(Object.isString(b)){b=e.getElementById(b)}return Element.extend(b)}function $$E(){var b=$A(arguments);var a=b.shift();return $(Selector.findChildElements($(a),b))}Object.isObject=function(a){return(typeof(a)=="object")};Object.extend(String.prototype,{lowerFirstLetter:function(){if(!this){return this}var a=this.substring(0,1).toLowerCase();return a+this.substr(1,this.length)},upperFirstLetter:function(){if(!this){return this}var a=this.substring(0,1).toUpperCase();return a+this.substr(1,this.length)},toXmlCase:function(){return this}});Selector.handlers.id=function(b,a,j,f){var g;if(a.getElementById){g=a.getElementById(j)}else{if(a.ownerDocument){g=a.ownerDocument.getElementById(j)}else{g=$(j)}}var d=Selector.handlers;if(!g){return[]}if(!b&&a==document){return[g]}if(b){if(f){if(f=="child"){for(var c=0,e;e=b[c];c++){if(g.parentNode==e){return[g]}}}else{if(f=="descendant"){for(var c=0,e;e=b[c];c++){if(Element.descendantOf(g,e)){return[g]}}}else{if(f=="adjacent"){for(var c=0,e;e=b[c];c++){if(Selector.handlers.previousElementSibling(g)==e){return[g]}}}else{b=d[f](b)}}}}for(var c=0,e;e=b[c];c++){if(e==g){return[g]}}return[]}return(g&&Element.descendantOf(g,a))?[g]:[]};WebShow.LogType={LOG:0,INFO:10,WARNING:20,ERROR:30};WebShow.Logger={element:null,logItemTagName:"p",logTypeClassNames:[],onLog:null,onInfo:null,onWarning:null,onError:null,getLogTypeName:function(b){var a;switch(b){case WebShow.LogType.LOG:a=WebShow.LogTypeStr.LOG;break;case WebShow.LogType.INFO:a=WebShow.LogTypeStr.INFO;break;case WebShow.LogType.WARNING:a=WebShow.LogTypeStr.WARNING;break;case WebShow.LogType.ERROR:a=WebShow.LogTypeStr.ERROR;break;default:a=WebShow.LogTypeStr.LOG;break}return a},_initLogTypeClassNames:function(){WebShow.Logger.logTypeClassNames[WebShow.LogType.LOG]="";WebShow.Logger.logTypeClassNames[WebShow.LogType.INFO]="Info";WebShow.Logger.logTypeClassNames[WebShow.LogType.WARNING]="Warning";WebShow.Logger.logTypeClassNames[WebShow.LogType.ERROR]="Error"},getLogTypeClassName:function(a){return WebShow.Logger.logTypeClassNames[a]},doLog:function(d,a){if(!d){return}try{WebShow.Logger.evokeLogEvents(d,a);var c=WebShow.Logger.getLogTypeName(a)+d;element=WebShow.Logger.element;if(element){var g=element.ownerDocument;var h=g.createTextNode(c);var i=g.createElement(WebShow.Logger.logItemTagName);var b=WebShow.Logger.getLogTypeClassName(a);if(b){i.className=b}i.appendChild(h);element.appendChild(i)}else{try{if(console){console.log(c)}else{if(a==WebShow.LogType.ERROR){throw c}}}catch(f){if(a==WebShow.LogType.ERROR){throw c}}}}catch(f){throw f}},evokeLogEvents:function(c,a){if(WebShow.Logger.onLog){WebShow.Logger.onLog(c,a)}var b=null;switch(a){case WebShow.LogType.INFO:b=WebShow.Logger.onInfo;break;case WebShow.LogType.WARNING:b=WebShow.Logger.onWarning;break;case WebShow.LogType.ERROR:b=WebShow.Logger.onError;break}if(b){b(c)}},log:function(a){WebShow.Logger.doLog(a,WebShow.LogType.LOG)},reportInfo:function(a){WebShow.Logger.doLog(a,WebShow.LogType.INFO)},reportWarning:function(a){WebShow.Logger.doLog(a,WebShow.LogType.WARNING)},reportError:function(a){if(!a){return}if(typeof(a)=="string"){WebShow.Logger.doLog(a,WebShow.LogType.ERROR)}else{if(a.message){WebShow.Logger.doLog(a.message,WebShow.LogType.ERROR)}}throw a}};WebShow.Logger._initLogTypeClassNames();WebShow.log=WebShow.Logger.log;WebShow.reportInfo=WebShow.Logger.reportInfo;WebShow.reportWarning=WebShow.Logger.reportWarning;WebShow.reportError=WebShow.Logger.reportError;function fireEventToAllParentWindow(h,b,a){try{var d=h;var c;var g;while((d)&&(d!=c)){g=$(d.document.body);if(g){g.fire(b,a)}c=d;d=d.parent}}catch(f){}}function fireDomLoadEvent(){try{if(WS_PAGE_DOM_LOADED&&window.frameElement){Event.fire(window.frameElement,WS_PAGE_DOM_LOADED,{pageFrame:window,pageDoc:document})}}catch(a){}}Event.observe(document,"dom:loaded",fireDomLoadEvent);